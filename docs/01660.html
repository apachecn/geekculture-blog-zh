<html>
<head>
<title>How to use macOS Specific API in macCatalyst Apps(and Vice Versa)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨macCatalyståº”ç”¨ä¸­ä½¿ç”¨ç‰¹å®šäºmacOSçš„API(åä¹‹äº¦ç„¶)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/use-of-macos-specific-api-in-maccatalyst-apps-and-vice-versa-e7082a007b7c?source=collection_archive---------10-----------------------#2021-04-19">https://medium.com/geekculture/use-of-macos-specific-api-in-maccatalyst-apps-and-vice-versa-e7082a007b7c?source=collection_archive---------10-----------------------#2021-04-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="10af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Mac Catalystå…è®¸å¼€å‘è€…å¿«é€Ÿå°†ä»–ä»¬çš„iOSåº”ç”¨ç§»æ¤åˆ°macOSã€‚ä½†æ˜¯åœ¨ä¸æ·»åŠ ä»»ä½•macç‰¹å®šåŠŸèƒ½çš„æƒ…å†µä¸‹è¿ç§»å®ƒä»¬ä¸è¿è¡ŒiOS simulatoræ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p><h2 id="9e98" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">åŠ¨æœº</h2><p id="6cc5" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">Homeæ˜¯è‹¹æœä»iOSç§»æ¤çš„é¦–æ‰¹åº”ç”¨ä¹‹ä¸€ã€‚å®ƒå¯ä»¥è®©ä½ ä»macä¸Šæ§åˆ¶homekité…ä»¶ã€‚å½“ä½ å°è¯•åœ¨ä½ çš„macOSåº”ç”¨ä¸­ä½¿ç”¨HomeKit APIä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/b12086541514356eef9189b7d0006eea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUnZTyeCzIoB5mHsm_PY2Q.png"/></div></div></figure><p id="ff0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°è¯•ä½¿ç”¨<code class="du kp kq kr ks b">NSStatusItem</code>æ—¶ï¼ŒiOSä¸­ä¹Ÿä¼šå‡ºç°åŒæ ·çš„æƒ…å†µã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•åŒæ—¶ä½¿ç”¨iOSç‰¹å®šçš„APIå’ŒmacOSç‰¹å®šçš„å‡½æ•°ã€‚(å¦‚æœä½ ä¸æƒ³éµå¾ªä¸€æ­¥ä¸€æ­¥çš„è¿‡ç¨‹ï¼Œä½ å¯ä»¥åœ¨è¿™ç¯‡æ–‡ç« çš„æœ«å°¾æ‰¾åˆ°å®Œæ•´çš„æºä»£ç ã€‚)</p><h1 id="bea8" class="kt je hi bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">é¡¹ç›®è®¾ç½®</h1><p id="dd29" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„iOSåº”ç”¨ç¨‹åºé¡¹ç›®ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹è®¾ç½®:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lk"><img src="../Images/e12f7374552c2f43582c3579d676edd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSshn4FUvhxvXkhhAS-8NQ.png"/></div></div></figure><p id="ff95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¹¶åœ¨é¡¹ç›®è®¾ç½®çš„â€œå¸¸è§„â€é€‰é¡¹å¡ä¸­çš„â€œéƒ¨ç½²ä¿¡æ¯â€ä¸‹å¯ç”¨macæ”¯æŒã€‚</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ll"><img src="../Images/76dd4a82745424395644d53d8d021d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VmGvdvKwJP9uyMzy44mUkA.png"/></div></div></figure><p id="8c55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆå§‹åŒ–macOSå’ŒiOSä¹‹é—´çš„é€šä¿¡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå®ç°â€œUIApplicationDelegateâ€çš„æ–°ç±»ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ä¸»åº”ç”¨ç¨‹åºç»“æ„ä¸­å£°æ˜å®ƒã€‚</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="0f5d" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">import</strong> SwiftUI<br/><strong class="ks hj">@main</strong></span><span id="b5ec" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">struct</strong> iOS2macApp: App {</span><span id="224a" class="jd je hi ks b fi lu lr l ls lt">   @UIApplicationDelegateAdaptor(AppDelegate.<strong class="ks hj">self</strong>) <strong class="ks hj">var</strong> appDelegate</span><span id="66c5" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">   var</strong> body: <strong class="ks hj">some</strong> Scene {<br/>      WindowGroup {<br/>        ContentView()<br/>      }<br/>   }<br/>}</span></pre><p id="07db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨åˆ°äº†é­”æ³•å‘ç”Ÿçš„éƒ¨åˆ†â€¦</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><h2 id="0018" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">macOSå¥—è£…è®¾ç½®</h2><p id="4668" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">ä¸ºäº†åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­è¿è¡ŒmacOSä»£ç ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®æ ‡â€”â€”MAC OS Bundleã€‚æˆ‘å°†å…¶å‘½åä¸º<code class="du kp kq kr ks b">macOSBridge</code>,ä½†æ˜¯ä½ å¯ä»¥é€‰æ‹©ä½ å–œæ¬¢çš„ä»»ä½•ä¸œè¥¿ï¼Œå¹¶å°†å…¶ä½™çš„è®¾ç½®ä¿ç•™ä¸ºé»˜è®¤è®¾ç½®ã€‚</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mc"><img src="../Images/0e1d57ea87e4dc9ea3438ee0e7eb3e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTN8XLJwsy-IKwBGVMd93Q.png"/></div></div></figure><p id="4205" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™å°†ç”¨ä½ é€‰æ‹©çš„åå­—åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­ä½ åªèƒ½æ‰¾åˆ°ä¸€ä¸ª<code class="du kp kq kr ks b">Info.plist</code>æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶çš„æœ€åä¸€è¡Œæ˜¯è¿™ä¸ªåŒ…çš„ä¸»ä½“ç±»ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªï¼åœ¨åˆ›å»ºä¸€ä¸ªæ–°ç±»çš„æ—¶å€™ï¼Œä½ ä¼šçœ‹åˆ°åˆ›å»ºä¸€ä¸ªæ–°çš„æ¡¥æ¥å¤´çš„é€‰é¡¹ï¼Œæ‰€ä»¥ä½ ä¸€å®šè¦åŒæ„è¿™æ ·åšã€‚</p><p id="010d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘ä»¬å®šä¹‰äº†ä¸»ç±»(<code class="du kp kq kr ks b">MacOSBridge</code>)ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒçš„åå­—æ·»åŠ åˆ°<code class="du kp kq kr ks b">Info.plist</code>çš„æœ€åä¸€è¡Œã€‚æˆ‘ä»¬çš„ç±»åä¼šè¿™æ ·å®šä¹‰<br/> <code class="du kp kq kr ks b">$(PRODUCT_MODULE_NAME).MacOSBridge</code></p><h1 id="82a1" class="kt je hi bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">å‡†å¤‡é€šä¿¡æ¥å£</h1><p id="05d5" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»º<code class="du kp kq kr ks b">NSStatusItem</code>å¹¶åœ¨åº”ç”¨ç¨‹åºçš„iOSç«¯å¯¹å…¶ç‚¹å‡»åšå‡ºååº”æ¥æ¼”ç¤ºåŒå‘é€šä¿¡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¦‚ä¸‹å®šä¹‰çš„ä¸¤ä¸ªæ¥å£ã€‚</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="afde" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">@objc(iOS2Mac)<br/>public protocol</strong> iOS2Mac: NSObjectProtocol {<br/>   <strong class="ks hj">init</strong>()<br/>   <strong class="ks hj">var</strong> iosListener: mac2iOS? { <strong class="ks hj">get</strong> <strong class="ks hj">set</strong> }<br/>   <strong class="ks hj">func</strong> createBarItem()<br/>}</span><span id="9c5c" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">@objc(mac2iOS)<br/>public protocol</strong> mac2iOS: NSObjectProtocol {<br/>   <strong class="ks hj">func</strong> barItemClicked()<br/>}</span></pre><p id="4c42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬çš„<code class="du kp kq kr ks b">MacOSBridge</code>ç±»éœ€è¦å®ç°<code class="du kp kq kr ks b">iOS2Mac</code>åè®®ã€‚</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es md"><img src="../Images/3c36e968bd9b2f8a688983bb8be75509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*yT4rbEhqUB3yjhJIYhjUhA.png"/></div></figure><p id="1e50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç¡®ä¿åœ¨ä¸¤ä¸ªç›®æ ‡(mac Bundleå’ŒiOS App)ä¸­éƒ½æœ‰ç›®æ ‡æˆå‘˜çš„æ–‡ä»¶ä¸­å®šä¹‰è¿™ä¸¤ä¸ªæ¥å£ã€‚</p><h2 id="d1aa" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">ä»åŒ…ä¸­åŠ è½½å’Œä½¿ç”¨ä»£ç </h2><p id="fe76" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">æœ‰å¿…è¦åŠ è½½åŒ…å¹¶å®ä¾‹åŒ–å®ƒçš„ä¸»ä½“ç±»ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨<code class="du kp kq kr ks b">AppDelegate</code>ä¸­å®ç°ï¼Œä½†æ˜¯æ‚¨å¯ä»¥åœ¨ä»»ä½•é€‚åˆæ‚¨é€‰æ‹©çš„æ¶æ„çš„åœ°æ–¹å®ç°ã€‚appç¡®å®è¿™æ ·å¯åŠ¨å®Œlookaåæ‰‹åŠ¨åŠ è½½ã€‚æˆ‘ä»¬ä¿ç•™äº†å¯¹iOS2Macå®ç°çš„å¼•ç”¨ï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†å®ç°<code class="du kp kq kr ks b">mac2iOS</code>åè®®çš„<code class="du kp kq kr ks b">AppDelegate</code>ç±»è®¾ç½®ä¸ºmacOSäº‹ä»¶çš„ç›‘å¬å™¨ã€‚</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="b507" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">var</strong> ios2mac: iOS2Mac?</span><span id="a5b4" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">func</strong> application(<strong class="ks hj">_</strong> application: UIApplication,<br/>     didFinishLaunchingWithOptions<br/>     launchOptions: [UIApplication.LaunchOptionsKey : <strong class="ks hj">Any</strong>]? = <strong class="ks hj">nil<br/></strong>) -&gt; Bool {<br/>   loadPlugin()<br/>   <strong class="ks hj">return</strong> <strong class="ks hj">true<br/></strong>}</span><span id="380d" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">func</strong> loadPlugin() {<br/><strong class="ks hj">   let</strong> bundleFile = "macOSBridge.bundle"<br/>   <strong class="ks hj">guard</strong> <strong class="ks hj">let</strong> bundleURL = Bundle.main.builtInPlugInsURL?.appendingPathComponent(bundleFile),<br/>   <strong class="ks hj">let</strong> bundle = Bundle(url: bundleURL),<br/>   <strong class="ks hj">let</strong> pluginClass = bundle.principalClass <strong class="ks hj">as</strong>? iOS2Mac.Type <br/>   <strong class="ks hj">else</strong> { <strong class="ks hj">return</strong> }</span><span id="e4ad" class="jd je hi ks b fi lu lr l ls lt">   ios2mac = pluginClass.init()<br/>   ios2mac?.iosListener = <strong class="ks hj">self //respond to mac events<br/></strong>}</span></pre><h1 id="2d4c" class="kt je hi bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">ç»“æŸå¾ªç¯</h1><p id="83ee" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡<code class="du kp kq kr ks b">SwiftUI</code>çš„<code class="du kp kq kr ks b">@EnvironmentObject</code>ä¼ é€’å¯¹<code class="du kp kq kr ks b">AppDelegate</code>çš„å¼•ç”¨ã€‚(è¯·è®°ä½ï¼Œæˆ‘ä»¬è¿™æ ·åšæ˜¯ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œä»¥ä¾¿è¿›è¡ŒæŒ‡å¯¼ã€‚)æˆ‘è‚¯å®šä½ çŸ¥é“ä½ æƒ³æŠŠä½ çš„<strong class="ih hj">ç”µè¯æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚æ‚¨å¯ä»¥åœ¨æœ¬æ–‡æœ«å°¾æ‰¾åˆ°å¸¦æœ‰å®Œæ•´ä»£ç çš„Githubé“¾æ¥ã€‚ç‚¹å‡»æŒ‰é’®å°†è§¦å‘<code class="du kp kq kr ks b">createBarItem()</code>,åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯è¿™æ ·çš„:</strong></p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="fb42" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">let</strong> statusItem = NSStatusBar.system.statusItem(withLength:NSStatusItem.squareLength)</span><span id="f761" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">func</strong> createBarItem() {<br/><strong class="ks hj">  if</strong> <strong class="ks hj">let</strong> button = statusItem.button {<br/>    button.title = "ğŸ " //since we control home ğŸ™‚<br/>    button.target = <strong class="ks hj">self<br/>    </strong>button.action = <strong class="ks hj">#selector</strong>(MacOSBridge.statusItemClicked)<br/>  }<br/>}</span><span id="80b7" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">@objc</strong> <strong class="ks hj">func</strong> statusItemClicked() {<br/>  iosListener?.barItemClicked()<br/>}</span></pre><h2 id="7b81" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">æœ€åçš„é­”æ³•</h2><p id="938d" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">æ­£å¦‚å¼€å§‹æ—¶æ‰€æ‰¿è¯ºçš„ï¼Œå½“ç‚¹å‡»<code class="du kp kq kr ks b">NSStatusItem</code>æ—¶ï¼Œæˆ‘ä»¬å°†é€šè¿‡æ§åˆ¶HomeKitè®¾å¤‡æ¥å…³é—­å¾ªç¯ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§â€¦</p><p id="0027" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†åšä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…=æ‰“å¼€åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè®¾å¤‡ã€‚è®©æˆ‘ä»¬ä»åœ¨ä¸€ä¸ªç®€å•çš„é˜µåˆ—ä¸­å­˜å‚¨å…·æœ‰åŠŸç‡æ§åˆ¶ç‰¹æ€§çš„å™¨ä»¶å¼€å§‹ã€‚</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="3bc9" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">func</strong> setUpHomeManager() {<br/>  mgr = HMHomeManager()<br/>  mgr?.delegate = <strong class="ks hj">self<br/></strong>}</span><span id="12b8" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">func</strong> homeManagerDidUpdateHomes(<strong class="ks hj">_</strong> manager: HMHomeManager) {<br/>  <strong class="ks hj">var</strong> supportedAccessories:[HMAccessory] = []<br/>  <strong class="ks hj">for</strong> home <strong class="ks hj">in</strong> manager.homes {</span><span id="bb23" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">  let</strong> powerControls = home.accessories.filter {<br/>      $0.services.contains {<br/>          $0.characteristics.contains {<br/>             $0.characteristicType == HMCharacteristicTypePowerState<br/>          }<br/>       }<br/>    }<br/>    supportedAccessories.append(contentsOf: powerControls)<br/>  }<br/>  allPowerControllableAccessories = supportedAccessories<br/> }<br/>}</span></pre><p id="a041" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‹¼å›¾çš„æœ€åä¸€å—æ˜¯å°†å€¼<code class="du kp kq kr ks b">1</code>å†™å…¥åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªé™„ä»¶çš„åŠŸç‡ç‰¹æ€§ã€‚æˆ‘ä»¬åœ¨<code class="du kp kq kr ks b">HMAccessory</code>æ‰©å±•ä¸­è¿™æ ·åš:</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="2082" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">extension</strong> HMAccessory {</span><span id="7bd8" class="jd je hi ks b fi lu lr l ls lt"><strong class="ks hj">func</strong> turnOn() {<br/>  <strong class="ks hj">_</strong> = <strong class="ks hj">self</strong>.services.map {<br/>    $0.characteristics.map {<br/>      <strong class="ks hj">if</strong> ($0.characteristicType == HMCharacteristicTypePowerState) {<br/>        $0.writeValue(1) { (e) <strong class="ks hj">in<br/>         </strong>print("error while turning on the device \(e?.localizedDescription ?? "")")<br/>        }<br/>      }<br/>    }<br/>  }<br/> }<br/>}</span></pre><h2 id="a24f" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">è§£å†³çº·äº‰</h2><p id="1923" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">æ²¿é€”æ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›é”™è¯¯æ¶ˆæ¯..</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="ddd8" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">This app has crashed because it attempted to access privacy-sensitive data without a usage description.  The app's Info.plist must contain an NSHomeKitUsageDescription key with a string value explaining to the user how the app uses this data.</strong></span></pre><p id="b0b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ çŸ¥é“è¯¥æ€ä¹ˆåšï¼›)æ‰€ä»¥åœ¨iOS Appé‡Œåš<code class="du kp kq kr ks b">Info.plist</code></p><p id="dea7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæ‚¨çœ‹åˆ°ä»¥ä¸‹é”™è¯¯â€¦</p><pre class="ke kf kg kh fd lm ks ln lo aw lp bi"><span id="86b4" class="jd je hi ks b fi lq lr l ls lt"><strong class="ks hj">Sync operation failed with error: Error Domain=NSCocoaErrorDomain Code=4097 "connection to service on pid 0 named com.apple.homed.xpc" UserInfo={NSDebugDescription=connection to service on pid 0 named com.apple.homed.xpc}</strong></span></pre><p id="1db8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">â€¦æ‚¨å¿˜è®°å°†HomeKitåŠŸèƒ½æ·»åŠ åˆ°æ‚¨çš„iOSç›®æ ‡æˆ–æ‹’ç»è®¿é—®å®¶åº­æ•°æ®çš„æƒé™ã€‚</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><h1 id="92d4" class="kt je hi bd jf ku me kw jj kx mf kz jn la mg lc jq ld mh lf jt lg mi li jw lj bi translated">åŒ…è£¹</h1><p id="3029" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">æ·»åŠ macOSç‰¹å®šçš„æ§ä»¶å’ŒåŠŸèƒ½ä¼šå°†ç§»æ¤çš„åº”ç”¨ç¨‹åºæå‡åˆ°å¦ä¸€ä¸ªå±‚æ¬¡ã€‚ä½†æ˜¯æœ‰æ—¶å­˜åœ¨APIå¯ç”¨æ€§æ‚–è®ºï¼Œæ¯”å¦‚HomeKitï¼Œå®ƒè¿«ä½¿æ‚¨ä¸ºé¡¹ç›®ä½¿ç”¨ä¸åŒçš„è®¾ç½®ã€‚æˆ‘ç”¨è¿™ç§æ–¹æ³•å»ºç«‹äº†ä¸€ä¸ªtouchbaråº”ç”¨ç¨‹åºæ¥æ§åˆ¶æˆ‘åŠå…¬å®¤çš„ç¯ï¼Œå¹¶ä»æˆ‘çš„æœ¬åœ°ç½‘ç»œå¤–éƒ¨æ§åˆ¶æˆ‘çš„é…ä»¶ï¼Œè€Œä¸ç”¨iPadæˆ–HomePodä½œä¸ºå®¶åº­ä¸­æ¢ã€‚</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es mj"><img src="../Images/ad0a27055a922a2f8c8dec00bf89aa43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/1*Nmt4viqSnJiwm8UQlY2taA.gif"/></div><figcaption class="mk ml et er es mm mn bd b be z dx">My â€™Room8' app (lights are visible in reflection)</figcaption></figure><p id="b413" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘å¸Œæœ›è¿™ç§å˜é€šæ–¹æ³•èƒ½å¸®åŠ©ä½ å®ç°ä½ çš„æƒ³æ³•ã€‚å®Œæ•´çš„æºä»£ç å¯åœ¨<a class="ae mo" href="https://github.com/erikhric/ios2mac" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>è·å¾—ã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œç»™æˆ‘ä¸€ä¸ªâ­ï¸ã€‚<br/>ç¥ä½ é¡¹ç›®é¡ºåˆ©:)</p></div></div>    
</body>
</html>