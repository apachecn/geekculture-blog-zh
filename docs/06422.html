<html>
<head>
<title>Yourkit Remote Java Application Profiling with Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Dockerè¿›è¡Œè¿œç¨‹Javaåº”ç”¨ç¨‹åºå‰–æ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/yourkit-remote-java-application-profiling-with-docker-b2667eb88082?source=collection_archive---------14-----------------------#2021-08-19">https://medium.com/geekculture/yourkit-remote-java-application-profiling-with-docker-b2667eb88082?source=collection_archive---------14-----------------------#2021-08-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/1e633551f96d5f3b097a4c5ced6b57f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PcVV-Stq79lbp4y8tYcdqA.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/@casparrubin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Caspar Camille Rubin</a> on <a class="ae hv" href="https://unsplash.com/s/photos/java-memory-profiling?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="75ca" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¯¹æˆ‘æ¥è¯´ï¼Œå‰–æjavaåº”ç”¨ç¨‹åºä¸€ç›´å¾ˆæ£˜æ‰‹ã€‚ä¸åˆ†æè¿œç¨‹javaåº”ç”¨ç¨‹åºç›¸æ¯”ï¼Œåˆ†ææœ¬åœ°javaåº”ç”¨ç¨‹åºæ›´å®¹æ˜“ã€‚</p><p id="8abe" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å‡ å¤©å‰ï¼Œæˆ‘åœ¨å¯»æ‰¾åˆ†æè¿œç¨‹javaåº”ç”¨ç¨‹åºçš„æ–¹æ³•ï¼Œå¹¶èŠ±äº†ç›¸å½“å¤šçš„æ—¶é—´æ¥æ‰¾å‡ºå¦‚ä½•åœ¨ä¸å¢åŠ å…¬å¸é¢å¤–æˆæœ¬çš„æƒ…å†µä¸‹åšåˆ°è¿™ä¸€ç‚¹ã€‚åœ¨å¯»æ‰¾è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°è¯•ä½¿ç”¨äº†æ‚¨çš„å·¥å…·åŒ…å·¥å…·ï¼Œè¯¥å·¥å…·å…è®¸æ‚¨ä¸‹è½½å¹¶å…è´¹ä½¿ç”¨15å¤©ï¼Œç”¨äºå·¥å…·è¯„ä¼°ç›®çš„(æˆ‘è®¤ä¸º15å¤©è¶³ä»¥è¯†åˆ«æ‚¨çš„åº”ç”¨ç¨‹åºçš„é—®é¢˜ğŸ˜†).æ‰€ä»¥è®©æˆ‘ä»¬å¼€é—¨è§å±±ï¼Œä¸è¦å†æµªè´¹ä½ çš„æ—¶é—´äº†ã€‚</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h2 id="7c8e" class="ka kb hy bd kc kd ke kf kg kh ki kj kk jg kl km kn jk ko kp kq jo kr ks kt ku bi translated">è¦éµå¾ªçš„æ­¥éª¤ã€‚</h2><ul class=""><li id="5837" class="kv kw hy ix b iy kx jc ky jg kz jk la jo lb js lc ld le lf bi translated">ä½¿ç”¨å‘½ä»¤<br/><strong class="ix hz">sshåˆ°æ‚¨çš„dockerå®¹å™¨ä¸»æœºï¼Œä¾‹å¦‚ssh &lt; dockerä¸»æœºåŸŸæˆ–IP &gt; </strong></li><li id="7a93" class="kv kw hy ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated">ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ—å‡ºdockerä¸»æœºä¸Šçš„dockerå®¹å™¨<br/>ï¼Œä¾‹å¦‚docker ps</li><li id="aef4" class="kv kw hy ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated">ç„¶åsshè¿›å…¥ä½ çš„dockerå®¹å™¨ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤<br/>è®¿é—®docker bashï¼Œæ¯”å¦‚docker exec -it &lt;å®¹å™¨idç”¨docker ps &gt; bashæ ‡è¯†</li><li id="2bb0" class="kv kw hy ix b iy lg jc lh jg li jk lj jo lk js lc ld le lf bi translated">ç„¶åï¼Œæ‚¨éœ€è¦åœ¨dockerå®¹å™¨ä¸­ä¸‹è½½æ‚¨çš„å·¥å…·åŒ…å·¥å…·ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½å¹¶æå–è¯¥å·¥å…·ã€‚<br/> 1ã€‚yumå®‰è£…wget <br/> 2ã€‚yumå®‰è£…unzip <br/> 3ã€‚wget<a class="ae hv" href="https://www.yourkit.com/download/YourKit-JavaProfiler-2021.3-b231.zip" rel="noopener ugc nofollow" target="_blank">https://www . your kit . com/download/your kit-Java profiler-2021.3-b231 . zip</a><br/>4 .è§£å‹<a class="ae hv" href="https://www.yourkit.com/download/YourKit-JavaProfiler-2021.3-b231.zip" rel="noopener ugc nofollow" target="_blank">your kit-Java profiler-2021.3-b231 . zip</a><br/>5 RM<a class="ae hv" href="https://www.yourkit.com/download/YourKit-JavaProfiler-2021.3-b231.zip" rel="noopener ugc nofollow" target="_blank">your kit-Java profiler-2021.3-b231 . zip</a></li></ul><p id="68be" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸€æ—¦ä¸‹è½½äº†æ‚¨çš„kitå·¥å…·å’Œæå–çš„å†…å®¹ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è¯†åˆ«æ‚¨çš„javaåº”ç”¨ç¨‹åºè¿›ç¨‹idï¼Œå¹¶å°†å…¶é™„åŠ åˆ°æ‚¨çš„kit profilerä»£ç†ã€‚è¦æ‰§è¡Œâ€œåœ¨ä¸‹é¢è¿è¡Œâ€å‘½ä»¤</p><p id="0381" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">sh your kit-java Profiler-2021.3/bin/attach . sh<br/></strong>è¯¥å‘½ä»¤å°†åˆ—å‡ºdockerå®¹å™¨ä¸­è¿è¡Œçš„æ‰€æœ‰Javaè¿›ç¨‹idï¼Œå¹¶è¦æ±‚æ‚¨é€‰æ‹©è¦é™„åŠ åˆ°profilerä»£ç†çš„è¿›ç¨‹idã€‚è¯¥å‘½ä»¤çš„è¾“å‡ºå¦‚ä¸‹æ‰€ç¤º</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="1e60" class="ka kb hy lq b fi lu lv l lw lx">Enumerating running JVMs with /home/YourKit-JavaProfiler-2021.3/jre64<br/>[YourKit Java Profiler 2021.3-b231] Log file: /root/.yjp/log/profiler-ui-3035.log<br/>Running JVMs:</span><span id="64c9" class="ka kb hy lq b fi ly lv l lw lx">Name                             |   PID| Profiler Agent                  <br/>-------------------------------- |------|--------------------------------<br/>MyApplicationTwo                 |    82| Not loaded                          <br/>Myapplication-19.3-fat.          |    13| Not loaded</span><span id="08ec" class="ka kb hy lq b fi ly lv l lw lx">Enter PID of the application you want to attach (0 to exit) and press Enter:</span></pre><p id="5c63" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨è¾“å…¥è¦é™„åŠ åˆ°æ¢æŸ¥å™¨ä»£ç†çš„è¿›ç¨‹Idã€‚ä¸€æ—¦ä½ è¾“å…¥äº†è¿›ç¨‹idå¹¶æŒ‰ä¸‹å›è½¦é”®ï¼Œå®ƒå°†ä¼šè¦æ±‚ä½ è¾“å…¥æ›´å¤šçš„å†…å®¹ï¼Œä½†æ˜¯æˆ‘å»ºè®®ä½ ä½¿ç”¨é»˜è®¤é€‰é¡¹å¹¶æŒ‰ä¸‹å›è½¦é”®ã€‚</p><p id="8fbb" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç„¶åï¼Œæ‚¨çš„kit profilerä»£ç†å°†å¼€å§‹åœ¨<strong class="ix hz"> localhost:10001ä¸Šåˆ—å‡ºã€‚</strong></p><p id="a9a4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥åœ¨Yourkit profilerä¸­ä½¿ç”¨çš„å‘½ä»¤åˆ—è¡¨ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="1bdf" class="ka kb hy lq b fi lu lv l lw lx">Usage: <br/>java -jar yjp-controller-api-redist.jar &lt;host&gt; &lt;port&gt; &lt;command&gt;</span><span id="d018" class="ka kb hy lq b fi ly lv l lw lx">where &lt;command&gt; is one of:</span><span id="72e3" class="ka kb hy lq b fi ly lv l lw lx">status<br/>capture-memory-snapshot<br/>capture-hprof-snapshot<br/>capture-performance-snapshot<br/>start-sampling<br/>start-async-sampling-cpu<br/>start-tracing<br/>start-call-counting<br/>stop-cpu-profiling<br/>clear-cpu-data<br/>start-alloc-recording-all [alloc-sampled] <br/>  // record all objects<br/>start-alloc-recording-adaptive [alloc-sampled] <br/>  // record all objects with size &gt;= 4 KB, and only each 10th smaller object<br/>start-alloc-recording=&lt;N&gt;,&lt;B&gt; [alloc-sampled] <br/>  // record all objects with size &gt;= &lt;B&gt; bytes, and only each &lt;N&gt;-th smaller object<br/>stop-alloc-recording<br/>clear-alloc-data<br/>print-alloc-object-count<br/>  // get total count of all objects created during object allocation recording<br/>print-alloc-object-size<br/>  // get total size in bytes of all objects created during object allocation recording in full mode<br/>start-monitor-profiling<br/>stop-monitor-profiling<br/>clear-monitor-data<br/>start-stack-telemetry<br/>stop-stack-telemetry<br/>force-gc<br/>clear-charts</span><span id="22e4" class="ka kb hy lq b fi ly lv l lw lx">Examples:<br/>java -jar yjp-controller-api-redist.jar localhost 10001 capture-memory-snapshot<br/>java -jar yjp-controller-api-redist.jar localhost 10001 start-sampling<br/>java -jar yjp-controller-api-redist.jar localhost 10001 capture-performance-snapshot</span></pre><p id="216a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨ï¼Œä¸‹ä¸€æ­¥æ˜¯è¿è¡Œæ‚¨è®¤ä¸ºæœ‰é—®é¢˜çš„ç”¨ä¾‹ï¼Œå¹¶æ•è·å¿«ç…§ä»¥ä½¿ç”¨æ‚¨çš„å¥—ä»¶åº”ç”¨ç¨‹åºè¿›è¡Œåˆ†æã€‚</p><blockquote class="lz ma mb"><p id="b02e" class="iv iw mc ix b iy iz ja jb jc jd je jf md jh ji jj me jl jm jn mf jp jq jr js hb bi translated">è¿è¡Œä½ çš„ç”¨ä¾‹å¹¶æ•è·å¿«ç…§ï¼Œæ•è·å¿«ç…§çš„å‘½ä»¤æ˜¯<br/><strong class="ix hz">Java-jar your kit-JavaProfiler-2021.3/lib/yjp-controller-API-redist . jar localhost 10001 Capture-performance-Snapshot</strong></p></blockquote><p id="7173" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æ‚¨çš„å·¥å…·åŒ…å°†å¿«ç…§å­˜å‚¨åœ¨/root/Snapshots/æ–‡ä»¶å¤¹ä¸­ã€‚åœ¨æ‚¨çš„å·¥å…·åŒ…å®Œæˆä»¥ä¸‹æ ¼å¼çš„å¿«ç…§åï¼Œæ‚¨è¿˜å°†è·å¾—å…³äºæ‚¨çš„å·¥å…·åŒ…å­˜å‚¨å¿«ç…§çš„ä½ç½®çš„ä¿¡æ¯ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="8433" class="ka kb hy lq b fi lu lv l lw lx"> Snapshot captured: /root/Snapshots/MyApplicationOne-19.3-fat-2021-08-18.snapshot</span></pre><p id="40da" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨ï¼Œæ‚¨å·²ç»å‡†å¤‡å¥½äº†å¿«ç…§ï¼Œæ‚¨éœ€è¦ä½¿ç”¨Yourkitåº”ç”¨ç¨‹åºå¯¹å…¶è¿›è¡Œåˆ†æã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦åœ¨æœ¬åœ°æœºå™¨ä¸Šä¸‹è½½å¿«ç…§ï¼Œå¹¶å°†å…¶å¯¼å…¥åˆ°æ‚¨çš„kitåº”ç”¨ç¨‹åºä¸­ã€‚</p><p id="c3c6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä¸‹è½½å¿«ç…§ã€‚è¯·æ³¨æ„â€œ.â€(å¥å·)åœ¨å‘½ä»¤ç»“æŸæ—¶ï¼Œè¿™å°†åœ¨å½“å‰ç›®å½•ä¸‹å¤åˆ¶å¿«ç…§ã€‚</p><blockquote class="lz ma mb"><p id="c377" class="iv iw mc ix b iy iz ja jb jc jd je jf md jh ji jj me jl jm jn mf jp jq jr js hb bi translated">1)å°†å¿«ç…§å¤åˆ¶åˆ°æ‚¨çš„dockerä¸»æœº<br/>docker CP&lt;container _ id&gt;:/root/Snapshot s/my application one-19.3-fat-2021â€“08â€“18 . Snapshotã€‚</p><p id="9e1b" class="iv iw mc ix b iy iz ja jb jc jd je jf md jh ji jj me jl jm jn mf jp jq jr js hb bi translated">2)å°†å¿«ç…§ä»dockerä¸»æœºå¤åˆ¶åˆ°æœ¬åœ°æœºå™¨<br/> scp &lt;ä¸»æœºIP&gt;:/home/nchinchore/my application one-19.3-fat-2021â€“08â€“18 . Snapshotã€‚</p></blockquote><p id="4b52" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨æ‚¨åœ¨æœ¬åœ°æœºå™¨ä¸Šæœ‰äº†å¿«ç…§ï¼Œç°åœ¨æ‚¨å°†éœ€è¦æ‚¨çš„å·¥å…·åŒ…åº”ç”¨ç¨‹åºæ¥åˆ†æå¿«ç…§ã€‚æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿä»è¿™é‡Œä¸‹è½½ã€‚</p><div class="hh hi ez fb hj mg"><a href="https://www.yourkit.com/java/profiler/download/" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab dw"><div class="mi ab mj cl cj mk"><h2 class="bd hz fi z dy ml ea eb mm ed ef hx bi translated">ä¸‹è½½æ‚¨çš„å¥—ä»¶Java Profiler</h2><div class="mn l"><h3 class="bd b fi z dy ml ea eb mm ed ef dx translated">é¢å‘Java EEå’ŒJava SEå¹³å°çš„å…¨åŠŸèƒ½ä½å¼€é”€åˆ†æå™¨ã€‚æ˜“äºä½¿ç”¨çš„æ€§èƒ½å’Œå†…å­˜ã€‚ç½‘ç»œâ€¦</h3></div><div class="mo l"><p class="bd b fp z dy ml ea eb mm ed ef dx translated">www.yourkit.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu hp mg"/></div></div></a></div><p id="58f4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä¸€æ—¦ä½ æ‰“å¼€ä½ çš„å¥—ä»¶æ¡£æ¡ˆï¼Œå®ƒä¼šé—®ä½ æ¿€æ´»å¯†é’¥ã€‚æ‚¨éœ€è¦å¡«å†™è¯„ä¼°è¡¨ï¼Œæ‚¨å°†åœ¨æä¾›çš„é‚®ä»¶ä¸­è·å¾—15å¤©å…è´¹ä½¿ç”¨çš„è¯„ä¼°å¯†é’¥ã€‚</p><p id="cd0c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è·å¾—è¯„ä¼°å¯†é’¥åï¼Œæ·»åŠ è¯¥å¯†é’¥å¹¶é€šè¿‡ç‚¹å‡»<strong class="ix hz">æ‰“å¼€å¿«ç…§å¯¼å…¥å¿«ç…§â€¦å¹¶å¼€å§‹åˆ†æã€‚</strong></p><p id="2846" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ä½ å¯èƒ½ä¼šé‡å¤æ‰§è¡Œè¿™äº›æ­¥éª¤ï¼Œç›´åˆ°ä½ å‘ç°é—®é¢˜ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="1b09" class="ka kb hy lq b fi lu lv l lw lx">1) <strong class="lq hz">java -jar YourKit-JavaProfiler-2021.3/lib/yjp-controller-api-redist.jar localhost 10001</strong> <strong class="lq hz">clear-cpu-data</strong></span><span id="529b" class="ka kb hy lq b fi ly lv l lw lx">2) <strong class="lq hz">Run your use case </strong></span><span id="a81d" class="ka kb hy lq b fi ly lv l lw lx">3) <strong class="lq hz">java -jar YourKit-JavaProfiler-2021.3/lib/yjp-controller-api-redist.jar localhost 10001</strong> capture-memory-snapshot</span><span id="330c" class="ka kb hy lq b fi ly lv l lw lx">4) <strong class="lq hz">java -jar YourKit-JavaProfiler-2021.3/lib/yjp-controller-api-redist.jar localhost 10001 </strong>capture-performance-snapshot</span></pre><p id="1189" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è°ƒè¯•æ„‰å¿«â€¦ğŸ˜†ï¼ï¼</p></div></div>    
</body>
</html>