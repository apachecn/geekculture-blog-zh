<html>
<head>
<title>Web Scraping Google Finance Markets in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨PythonæŠ“å–è°·æ­Œé‡‘èå¸‚åœº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/web-scraping-google-finance-markets-in-python-a657da42a7d?source=collection_archive---------4-----------------------#2022-08-02">https://medium.com/geekculture/web-scraping-google-finance-markets-in-python-a657da42a7d?source=collection_archive---------4-----------------------#2022-08-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><ul class=""><li id="712d" class="if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw bi translated"><a class="ae ix" href="#ee1e" rel="noopener ugc nofollow">ä¼šåˆ®ä»€ä¹ˆ</a></li><li id="b860" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="#aec9" rel="noopener ugc nofollow">å…¨ç </a></li><li id="ac09" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="#2979" rel="noopener ugc nofollow">å…ˆå†³æ¡ä»¶</a></li><li id="f017" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="#53ae" rel="noopener ugc nofollow">ä»£ç è§£é‡Š</a></li><li id="5490" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="#f7ce" rel="noopener ugc nofollow">è°·æ­Œé‡‘èå¸‚åœºåº”ç”¨ç¼–ç¨‹æ¥å£</a></li><li id="1179" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="#8471" rel="noopener ugc nofollow">é“¾æ¥</a></li></ul><h1 id="ee1e" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">ä¼šåˆ®ä»€ä¹ˆ</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/d2ff1572a16c30c43eefb20756600aa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6hYecEC4Umbti-WL.png"/></div></div></figure><h1 id="aec9" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">å®Œæ•´ä»£ç </h1><figure class="kc kd ke kf fd kg"><div class="bz dy l di"><div class="kn ko l"/></div></figure><h1 id="2979" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">å…ˆå†³æ¡ä»¶</h1><p id="9b55" class="pw-post-body-paragraph kp kq hi ih b ii kr ks kt ik ku kv kw im kx ky kz io la lb lc iq ld le lf is hb bi translated"><strong class="ih hj">å®‰è£…åº“</strong>:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="5f1e" class="ll je hi lh b fi lm ln l lo lp">pip install requests parsel</span></pre><p id="6114" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated"><strong class="ih hj">CSSé€‰æ‹©å™¨åŸºç¡€çŸ¥è¯†æŠ“å–</strong></p><p id="cbe0" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">CSSé€‰æ‹©å™¨å£°æ˜æ ·å¼åº”ç”¨äºæ ‡è®°çš„å“ªä¸€éƒ¨åˆ†ï¼Œä»è€Œå…è®¸ä»åŒ¹é…çš„æ ‡ç­¾å’Œå±æ€§ä¸­æå–æ•°æ®ã€‚</p><p id="5980" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">å¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨CSSé€‰æ‹©å™¨ï¼Œæˆ‘æœ‰ä¸€ç¯‡å…³äºå¦‚ä½•åœ¨æŠ“å–ç½‘é¡µæ—¶ä½¿ç”¨CSSé€‰æ‹©å™¨çš„åšæ–‡,å†…å®¹åŒ…æ‹¬å®ƒæ˜¯ä»€ä¹ˆï¼Œä¼˜ç¼ºç‚¹ï¼Œä»¥åŠä¸ºä»€ä¹ˆä»æŠ“å–ç½‘é¡µçš„è§’åº¦æ¥çœ‹å®ƒä»¬å¾ˆé‡è¦ã€‚</p><p id="90be" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated"><strong class="ih hj">ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ</strong></p><p id="24ad" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">ç®€è€Œè¨€ä¹‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ç»„ç‹¬ç«‹çš„å·²å®‰è£…åº“ï¼ŒåŒ…æ‹¬ä¸åŒçš„Pythonç‰ˆæœ¬ï¼Œè¿™äº›ç‰ˆæœ¬å¯ä»¥åœ¨åŒä¸€ç³»ç»Ÿä¸­å…±å­˜ï¼Œä»è€Œé˜²æ­¢åº“æˆ–Pythonç‰ˆæœ¬å†²çªã€‚</p><p id="ddbf" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">å¦‚æœä½ ä»¥å‰æ²¡æœ‰ä½¿ç”¨è¿‡è™šæ‹Ÿç¯å¢ƒï¼Œçœ‹çœ‹æˆ‘çš„åšå®¢æ–‡ç« <br/>ä¸“ç”¨çš„<a class="ae ix" href="https://serpapi.com/blog/python-virtual-environments-using-virtualenv-and-poetry/" rel="noopener ugc nofollow" target="_blank"> Pythonè™šæ‹Ÿç¯å¢ƒæ•™ç¨‹(ä½¿ç”¨Virtualenvå’Œpoems</a>)ä¼šæ›´ç†Ÿæ‚‰ä¸€äº›ã€‚</p><p id="a3ca" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">ğŸ“Œæ³¨æ„:è¿™ä¸æ˜¯è¿™ä¸ªåšå®¢çš„ä¸¥æ ¼è¦æ±‚ã€‚</p><p id="d057" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated"><strong class="ih hj">é™ä½è¢«å±è”½çš„å‡ ç‡</strong></p><p id="b6b8" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">è¯·æ±‚æœ‰å¯èƒ½è¢«é˜»æ­¢ã€‚çœ‹çœ‹<a class="ae ix" href="https://serpapi.com/blog/how-to-reduce-chance-of-being-blocked-while-web/" rel="noopener ugc nofollow" target="_blank">å¦‚ä½•é™ä½æŠ“å–ç½‘é¡µæ—¶è¢«å±è”½çš„å‡ ç‡</a>ï¼Œæœ‰11ç§æ–¹æ³•å¯ä»¥ç»•è¿‡å¤§å¤šæ•°ç½‘ç«™çš„å±è”½ã€‚</p><h1 id="53ae" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">ä»£ç è§£é‡Š</h1><p id="f92a" class="pw-post-body-paragraph kp kq hi ih b ii kr ks kt ik ku kv kw im kx ky kz io la lb lc iq ld le lf is hb bi translated">å¯¼å…¥åº“:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="cdda" class="ll je hi lh b fi lm ln l lo lp">import requests<br/>import json<br/>import re<br/>import argparse<br/>from parsel import Selector</span></pre><ul class=""><li id="ada9" class="if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://requests.readthedocs.io/en/latest/user/quickstart/" rel="noopener ugc nofollow" target="_blank">requests</a></code>å‘ç½‘ç«™æå‡ºè¯·æ±‚ã€‚</li><li id="6a5c" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/json.html" rel="noopener ugc nofollow" target="_blank">json</a></code>å°†æå–çš„æ•°æ®è½¬æ¢æˆJSONå¯¹è±¡ã€‚</li><li id="107e" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">re</a></code>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æå–éƒ¨åˆ†æ•°æ®ã€‚</li><li id="8c64" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/argparse.html" rel="noopener ugc nofollow" target="_blank">argparse</a></code>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æå–éƒ¨åˆ†æ•°æ®ã€‚</li><li id="c569" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://parsel.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">parsel</a></code>è§£æHTML/XMLæ–‡æ¡£ä¸­çš„æ•°æ®ã€‚ç±»ä¼¼äº<code class="du lt lu lv lh b">BeautifulSoup</code>ï¼Œä½†æ˜¯æ”¯æŒXPathã€‚</li></ul><p id="0498" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">é¦–å…ˆï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦é€šè¿‡é”®å…¥å‘½ä»¤è¡Œå‚æ•°æ¥è§£ææ•°æ®ï¼Œè€Œä¸éœ€è¦æ¿€æ´»ä»£ç ä¸­çš„æŸäº›åŠŸèƒ½æ¥æå–ç‰¹å®šç±»å‹çš„ç»“æœï¼Œä¾‹å¦‚ï¼ŒåŠ å¯†ã€è·ç›Šè€…æˆ–å¤±è´¥è€…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºå‘½ä»¤è¡Œå‚æ•°ä½¿ç”¨<code class="du lt lu lv lh b">argparse</code>å†…ç½®åº“æ¥å®Œæˆ:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="4689" class="ll je hi lh b fi lm ln l lo lp">parser = argparse.ArgumentParser(prog="Google Finance Markets Options")<br/>parser.add_argument('-i','--indexes', action="store_true")<br/>parser.add_argument('-ma','--most-active', action="store_true")<br/>parser.add_argument('-g','--gainers', action="store_true")<br/>parser.add_argument('-l','--losers', action="store_true")<br/>parser.add_argument('-cl','--climate-leaders', action="store_true")<br/>parser.add_argument('-cc','--crypto', action="store_true")<br/>parser.add_argument('-c','--currency', action="store_true")</span><span id="6b0a" class="ll je hi lh b fi lw ln l lo lp">args = parser.parse_args()</span></pre><p id="7081" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">ç„¶åæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·è¿è¡Œè„šæœ¬:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="c726" class="ll je hi lh b fi lm ln l lo lp">$ python main.py -cc # will parse crypto results</span></pre><p id="abdb" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æ³¨æ„å¦‚æœä¸ä½¿ç”¨<code class="du lt lu lv lh b">action="store_true"</code>ï¼Œç»“æœå°†æ˜¯ä¸€ä¸ªé”™è¯¯:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="ba8c" class="ll je hi lh b fi lm ln l lo lp">$ python main.py -cc</span><span id="76c1" class="ll je hi lh b fi lw ln l lo lp">Google Finance Markets Options: error: argument -cc/--crypto: expected one argument</span></pre><p id="5ac2" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">è®¾ç½®ä¸º<code class="du lt lu lv lh b">store_true</code>çš„<code class="du lt lu lv lh b">action</code>å°†å‚æ•°å­˜å‚¨ä¸º<code class="du lt lu lv lh b">True</code>ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚æ‰€ä»¥å¦‚æœå‚æ•°å­˜åœ¨ï¼Œå®ƒå°†è¿”å›ä¸€äº›è¾“å‡ºã€‚</p><p id="7c4d" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å‚æ•°è®¾ä¸º<code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/argparse.html#required" rel="noopener ugc nofollow" target="_blank">requried</a></code>ï¼Œè¿™æ„å‘³ç€æŸä¸ªå‚æ•°æ˜¯<em class="lx">éœ€è¦</em>åœ¨ä½¿ç”¨æ–‡ä»¶æ—¶ä½¿ç”¨ã€‚</p><ul class=""><li id="62a5" class="if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/argparse.html#the-add-argument-method" rel="noopener ugc nofollow" target="_blank">add_argument</a></code>å®šä¹‰å¦‚ä½•è§£æä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ã€‚</li><li id="dc75" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.parse_args" rel="noopener ugc nofollow" target="_blank">parse_args</a></code>å†³å®š<code class="du lt lu lv lh b">add_argument</code>åˆ›å»ºä»€ä¹ˆå¯¹è±¡ä»¥åŠå¦‚ä½•åˆ†é…å®ƒä»¬ã€‚è¿”å›å¡«å……çš„å‘½åç©ºé—´ã€‚</li></ul><p id="61fc" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">ä¸‹ä¸€æ­¥æ˜¯ç”¨æ‰€æœ‰å‘½ä»¤è¡Œé€»è¾‘åˆ›å»ºå‡½æ•°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç‚¹ç¬¦å·è®¿é—®å‘½ä»¤è¡Œå‚æ•°:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="f6d8" class="ll je hi lh b fi lm ln l lo lp">def main():</span><span id="bcac" class="ll je hi lh b fi lw ln l lo lp">    # https://docs.python-requests.org/en/master/user/quickstart/#custom-headers<br/>    # https://www.whatismybrowser.com/detect/what-is-my-user-agent<br/>    headers = {<br/>        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.134 Safari/537.36"<br/>    }</span><span id="f586" class="ll je hi lh b fi lw ln l lo lp">    if args.indexes:<br/>        html = requests.get("https://www.google.com/finance/markets/indexes", headers=headers, timeout=30)<br/>        return parser(html=html)</span><span id="961c" class="ll je hi lh b fi lw ln l lo lp">    # ... other arguments logic</span></pre><ul class=""><li id="c96f" class="if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://developer.mozilla.org/en-US/docs/Glossary/User_agent" rel="noopener ugc nofollow" target="_blank">user-agent</a></code>ä½œä¸ºæ¥è‡ªæµè§ˆå™¨çš„â€œçœŸå®â€ç”¨æˆ·è¯·æ±‚ï¼Œå°†å…¶ä¼ é€’ç»™<a class="ae ix" href="https://docs.python-requests.org/en/master/user/quickstart/#custom-headers" rel="noopener ugc nofollow" target="_blank">è¯·æ±‚å¤´</a>ã€‚è¿™æ˜¯ç”¨æ¥ç»•è¿‡è°·æ­Œçš„å±è”½ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹<code class="du lt lu lv lh b">requests</code>ç”¨æˆ·ä»£ç†æ˜¯<code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/psf/requests/blob/main/requests/utils.py#L884-L890" rel="noopener ugc nofollow" target="_blank">python-requests</a></code>ï¼Œç½‘ç«™çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå‘é€è¯·æ±‚çš„æœºå™¨äººï¼Œå¯èƒ½ä¼šé˜»æ­¢å®ƒã€‚<a class="ae ix" href="https://www.whatismybrowser.com/detect/what-is-my-user-agent" rel="noopener ugc nofollow" target="_blank">æ£€æŸ¥ä½ çš„</a>æ˜¯ä»€ä¹ˆ<code class="du lt lu lv lh b"><a class="ae ix" href="https://www.whatismybrowser.com/detect/what-is-my-user-agent" rel="noopener ugc nofollow" target="_blank">user-agent</a></code>ã€‚</li><li id="5abd" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b">if args.indexes</code>å°†æ£€æŸ¥æŸä¸ªå‘½ä»¤è¡Œå‚æ•°æ˜¯å¦è¢«ä¼ é€’ã€‚</li><li id="0656" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://requests.readthedocs.io/en/latest/user/quickstart/#timeouts" rel="noopener ugc nofollow" target="_blank">timeout=30</a></code>å‘Šè¯‰<code class="du lt lu lv lh b">requests</code>30ç§’ååœæ­¢ç­‰å¾…å“åº”ã€‚</li><li id="4208" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b">return parser(html=html)</code>ä»<code class="du lt lu lv lh b">parser()</code>å‡½æ•°è¿”å›æ•°æ®ï¼Œä»¥å‡å°‘ä»£ç å¤§å°ï¼Œå› ä¸ºæ¯ä¸ªé€‰æ‹©å™¨æå–çš„æ•°æ®éƒ½æ˜¯ç›¸åŒçš„ã€‚</li></ul><p id="384b" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªè§£æå™¨å‡½æ•°ï¼Œä»é¡µé¢ä¸­æå–æ‰€æœ‰éœ€è¦çš„æ•°æ®ã€‚è¯¥å‡½æ•°éœ€è¦å°†ä¼ é€’ç»™<code class="du lt lu lv lh b">parsel</code>çš„<code class="du lt lu lv lh b">html</code>å‚æ•°ï¼Œç„¶åæˆ‘ä»¬éœ€è¦åˆ›å»º<code class="du lt lu lv lh b">data</code>è§£æåçš„ç»“æ„:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="d4bc" class="ll je hi lh b fi lm ln l lo lp">def parser(html):<br/>    selector = Selector(text=html.text)<br/>    stock_topic = selector.css(".Mrksgc::text").get().split("on ")[1].replace(" ", "_")</span><span id="3503" class="ll je hi lh b fi lw ln l lo lp">    data = {<br/>        f"{stock_topic}_trends": [],<br/>        f"{stock_topic}_discover_more": [],<br/>        f"{stock_topic}_news": []<br/>    }</span></pre><ul class=""><li id="a4ef" class="if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw bi translated"><code class="du lt lu lv lh b">Selector(text=html.text)</code>å“åº”ä¸­ä¼ é€’çš„HTMLå°†ç”±<code class="du lt lu lv lh b">parsel</code>å¤„ç†ã€‚</li><li id="7b3c" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b">text=</code>æ˜¯ä¸€ä¸ª<code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/52b1db6f1c0e9768334d9c33627773e0e687a60d/parsel/selector.py#L230" rel="noopener ugc nofollow" target="_blank">parsel</a></code> <a class="ae ix" href="https://github.com/scrapy/parsel/blob/52b1db6f1c0e9768334d9c33627773e0e687a60d/parsel/selector.py#L230" rel="noopener ugc nofollow" target="_blank">å‚æ•°ï¼Œå®ƒæ¥å—å°†ä»ä¸­æå–HTMLèŠ‚ç‚¹çš„</a> <code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/52b1db6f1c0e9768334d9c33627773e0e687a60d/parsel/selector.py#L230" rel="noopener ugc nofollow" target="_blank">str</a></code> <a class="ae ix" href="https://github.com/scrapy/parsel/blob/52b1db6f1c0e9768334d9c33627773e0e687a60d/parsel/selector.py#L230" rel="noopener ugc nofollow" target="_blank">å¯¹è±¡</a>ã€‚</li><li id="102c" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L351-L362" rel="noopener ugc nofollow" target="_blank">css()</a></code>ä»ä¼ é€’çš„CSSé€‰æ‹©å™¨ä¸­è§£ææ•°æ®ã€‚æ¯ä¸ª<a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L357-L358" rel="noopener ugc nofollow" target="_blank"> CSSæŸ¥è¯¢éƒ½ä½¿ç”¨</a> <code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L357-L358" rel="noopener ugc nofollow" target="_blank">csselect</a></code> <a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L357-L358" rel="noopener ugc nofollow" target="_blank">åŒ…</a>è½¬æ¢æˆXPathã€‚</li><li id="ee6a" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/csstranslator.py#L48-L51" rel="noopener ugc nofollow" target="_blank">::text</a></code> <a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/csstranslator.py#L48-L51" rel="noopener ugc nofollow" target="_blank">æˆ–</a> <code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/csstranslator.py#L48-L51" rel="noopener ugc nofollow" target="_blank">::attr(&lt;attribute&gt;)</a></code>ä»èŠ‚ç‚¹ä¸­æå–æ–‡æœ¬æˆ–å±æ€§æ•°æ®ã€‚</li><li id="95d9" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L197-L204" rel="noopener ugc nofollow" target="_blank">get()</a></code>è·å–ä»<code class="du lt lu lv lh b">parsel</code>è¿”å›çš„å®é™…æ•°æ®</li><li id="71ad" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://www.w3schools.com/python/ref_string_split.asp" rel="noopener ugc nofollow" target="_blank">split()</a></code>å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†æˆä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå•è¯éƒ½æ˜¯ä¸€ä¸ªåˆ—è¡¨é¡¹</li><li id="2419" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated">ç”¨ä¸€ä¸²æ–°çš„ä¸œè¥¿ä»£æ›¿æ—§çš„ä¸œè¥¿ã€‚</li></ul><p id="e1fb" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">åœ¨åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„å­—å…¸ç»“æ„åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<code class="du lt lu lv lh b">appending</code> itç”¨æ–°é—»ã€è‚¡ç¥¨å’Œå…¶ä»–æ•°æ®å¡«å……å®ƒï¼Œåœ¨æœ¬ä¾‹ä¸­ä½œä¸ºä¸€ä¸ª<code class="du lt lu lv lh b">dict</code>:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="23cd" class="ll je hi lh b fi lm ln l lo lp"># news ressults<br/>for index, news_results in enumerate(selector.css(".yY3Lee"), start=1):<br/>    data[f"{stock_topic}_news"].append({<br/>        "position": index,<br/>        "title": news_results.css(".mRjSYb::text").get(),<br/>        "source": news_results.css(".sfyJob::text").get(),<br/>        "date": news_results.css(".Adak::text").get(),<br/>        "image": news_results.css("img::attr(src)").get(),<br/>    })</span><span id="1940" class="ll je hi lh b fi lw ln l lo lp"># stocks table<br/>for index, stock_results in enumerate(selector.css("li a"), start=1):<br/>    current_percent_change_raw_value = stock_results.css("[jsname=Fe7oBc]::attr(aria-label)").get()<br/>    current_percent_change = re.search(r"<!-- -->\d+\.\d+%<!-- -->", stock_results.css("[jsname=Fe7oBc]::attr(aria-label)").get()).group()</span><span id="e94e" class="ll je hi lh b fi lw ln l lo lp">    # ./quote/SNAP:NASDAQ -&gt; SNAP:NASDAQ<br/>    quote = stock_results.attrib["href"].replace("./quote/", "")</span><span id="1323" class="ll je hi lh b fi lw ln l lo lp">    data[f"{stock_topic}_trends"].append({<br/>        "position": index,<br/>        "title": stock_results.css(".ZvmM7::text").get(),<br/>        "quote": stock_results.css(".COaKTb::text").get(),<br/>        # "https://www.google.com/finance/MSFT:NASDAQ"<br/>        "quote_link": f"https://www.google.com/finance/{quote}",<br/>        "price_change": stock_results.css(".SEGxAb .P2Luy::text").get(),<br/>        "percent_price_change": f"+{current_percent_change}" if "Up" in current_percent_change_raw_value else f"-{current_percent_change}"<br/>    })</span><span id="2695" class="ll je hi lh b fi lw ln l lo lp"># "you may be interested in" at the bottom of the page<br/>for index, interested_bottom in enumerate(selector.css(".HDXgAf .tOzDHb"), start=1):<br/>    current_percent_change_raw_value = interested_bottom.css("[jsname=Fe7oBc]::attr(aria-label)").get()<br/>    current_percent_change = re.search(r"<!-- -->\d+\.\d+%<!-- -->", interested_bottom.css("[jsname=Fe7oBc]::attr(aria-label)").get()).group()</span><span id="8ca3" class="ll je hi lh b fi lw ln l lo lp">    # ./quote/SNAP:NASDAQ -&gt; SNAP:NASDAQ<br/>    quote = stock_results.attrib["href"].replace("./quote/", "")</span><span id="f6de" class="ll je hi lh b fi lw ln l lo lp">    data[f"{stock_topic}_discover_more"].append({<br/>        "position": index,<br/>        "quote": interested_bottom.css(".COaKTb::text").get(),<br/>        "quote_link": f"https://www.google.com/finance{quote}",<br/>        "title": interested_bottom.css(".RwFyvf::text").get(),<br/>        "price": interested_bottom.css(".YMlKec::text").get(),<br/>        "percent_price_change": f"+{current_percent_change}" if "Up" in current_percent_change_raw_value else f"-{current_percent_change}"<br/>    })</span></pre><ul class=""><li id="b342" class="if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/functions.html#enumerate" rel="noopener ugc nofollow" target="_blank">enumerate()</a></code> <a class="ae ix" href="https://www.programiz.com/python-programming/methods/built-in/enumerate" rel="noopener ugc nofollow" target="_blank">ç»™ä¸€ä¸ªiterableæ·»åŠ ä¸€ä¸ªè®¡æ•°å™¨å¹¶è¿”å›å®ƒ</a>ã€‚</li><li id="2f3e" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b">start=1</code>å°†ä»1å¼€å§‹è®¡æ•°ï¼Œè€Œä¸æ˜¯ä»é»˜è®¤å€¼0å¼€å§‹è®¡æ•°ã€‚</li><li id="646f" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/csstranslator.py#L48-L51" rel="noopener ugc nofollow" target="_blank">::text</a></code> <a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/csstranslator.py#L48-L51" rel="noopener ugc nofollow" target="_blank">æˆ–</a> <code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/csstranslator.py#L48-L51" rel="noopener ugc nofollow" target="_blank">::attr(&lt;attribute&gt;)</a></code>ä»èŠ‚ç‚¹ä¸­æå–æ–‡æœ¬æˆ–å±æ€§æ•°æ®ã€‚</li><li id="f2f0" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b">data[f"{stock_topic}_news"]</code>åŠ¨æ€åœ°å°†æ•°æ®ä½œä¸º<code class="du lt lu lv lh b">dict</code>é™„åŠ åˆ°ç”±<code class="du lt lu lv lh b">stock_topic</code>å˜é‡æå–çš„ä»»ä½•å€¼ä¸Šã€‚</li><li id="3563" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/tutorial/datastructures.html" rel="noopener ugc nofollow" target="_blank">append()</a></code>å°†æå–çš„æ•°æ®è¿½åŠ åˆ°<code class="du lt lu lv lh b">list</code>ä½œä¸ºå­—å…¸ã€‚</li><li id="a997" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L351-L362" rel="noopener ugc nofollow" target="_blank">css()</a></code>ä»ä¼ é€’çš„CSSé€‰æ‹©å™¨ä¸­è§£ææ•°æ®ã€‚æ¯ä¸€ä¸ª<a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L357-L358" rel="noopener ugc nofollow" target="_blank"> CSSæŸ¥è¯¢éƒ½ä½¿ç”¨</a> <code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L357-L358" rel="noopener ugc nofollow" target="_blank">csselect</a></code> <a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L357-L358" rel="noopener ugc nofollow" target="_blank">åŒ…</a>è½¬æ¢æˆXPathã€‚</li><li id="83a9" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://serpapi.com/blog/scrape-google-finance-markets-in-python/(https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L197-L204)" rel="noopener ugc nofollow" target="_blank">get()</a></code>è·å–å®é™…æ•°æ®ã€‚</li><li id="52cc" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/90397dcd0b2c1cbb91e44f65c50f9e11628ba028/parsel/selector.py#L180-L185" rel="noopener ugc nofollow" target="_blank">getall()</a></code>è·å¾—å…¨éƒ¨ä¸€åœº<code class="du lt lu lv lh b">list</code>çš„æ¯”èµ›ã€‚</li><li id="548b" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b">[jsname=Fe7oBc]</code>æ˜¯ä¸€ä¸ª<a class="ae ix" href="https://www.w3schools.com/cssref/sel_attribute_value.asp" rel="noopener ugc nofollow" target="_blank"> CSSé€‰æ‹©å™¨ï¼Œç”¨äºé€‰æ‹©å…·æœ‰æŒ‡å®šå±æ€§å’Œå€¼</a>çš„å…ƒç´ ï¼Œå¦‚<code class="du lt lu lv lh b">[attribute=value]</code>ã€‚</li><li id="6378" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://github.com/scrapy/parsel/blob/52b1db6f1c0e9768334d9c33627773e0e687a60d/parsel/selector.py#L209" rel="noopener ugc nofollow" target="_blank">attrib["href"]</a></code>æ˜¯è®¿é—®èŠ‚ç‚¹å±æ€§çš„<code class="du lt lu lv lh b">parsel</code>æ–¹æ³•ã€‚å®ƒä¸ºç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ è¿”å›<code class="du lt lu lv lh b">dict</code>ã€‚<code class="du lt lu lv lh b">None</code>å¦‚æœå­—å…¸ä¸ºç©ºã€‚</li><li id="46e9" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/stdtypes.html#str.replace" rel="noopener ugc nofollow" target="_blank">replace("&lt;something&gt;", "&lt;with_something&gt;")</a></code>ç”¨ä¸€ä¸²æ–°çš„ä¸œè¥¿ä»£æ›¿æ—§çš„ä¸œè¥¿ã€‚</li><li id="5e36" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/library/re.html#re.search" rel="noopener ugc nofollow" target="_blank">re.search()</a></code>åŒ¹é…éƒ¨åˆ†å­—ç¬¦ä¸²ï¼ŒåªæŠ“å–æ•°å­—å€¼ã€‚</li><li id="e937" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><code class="du lt lu lv lh b"><a class="ae ix" href="https://docs.python.org/3/howto/regex.html#grouping" rel="noopener ugc nofollow" target="_blank">group()</a></code>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿”å›åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚</li></ul><p id="1dcd" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">è¿”å›æ•°æ®:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="905a" class="ll je hi lh b fi lm ln l lo lp"># data = {<br/>#     f"{stock_topic}_trends": [],<br/>#     f"{stock_topic}_discover_more": [],<br/>#     f"{stock_topic}_news": []<br/># }</span><span id="fd63" class="ll je hi lh b fi lw ln l lo lp"># extraction code...</span><span id="5167" class="ll je hi lh b fi lw ln l lo lp">return data</span></pre><p id="b74e" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æœ€åï¼Œæˆ‘ä»¬éœ€è¦ä¸ºä»£ç è¯»è€…æŒ‡å®šè¿™æ˜¯ä¸€ä¸ª<a class="ae ix" href="https://www.youtube.com/watch?v=g_wlZ9IhbTs" rel="noopener ugc nofollow" target="_blank">å¯è¿è¡Œè„šæœ¬</a>:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="db9b" class="ll je hi lh b fi lm ln l lo lp">if __name__ == "__main__":<br/>    print(json.dumps(main(), indent=2, ensure_ascii=False))</span></pre><p id="d222" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä»å‘½ä»¤è¡Œè¿è¡Œæ‚¨çš„è„šæœ¬:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="06f7" class="ll je hi lh b fi lm ln l lo lp">$ python main.py -ma # most-active</span></pre><p id="8d84" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æ‚¨è¿˜å¯ä»¥è®¿é—®helpå‘½ä»¤<code class="du lt lu lv lh b">-h</code>æ¥æŸ¥çœ‹å¯ç”¨çš„å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="3375" class="ll je hi lh b fi lm ln l lo lp">$ python main.py -h<br/>usage: Google Finance Markets Options [-h] [-i] [-ma] [-g] [-l]<br/>                                      [-cl] [-cc] [-c]</span><span id="fbe2" class="ll je hi lh b fi lw ln l lo lp">optional arguments:<br/>  -h, --help            show this help message and exit<br/>  -i, --indexes<br/>  -ma, --most-active<br/>  -g, --gainers<br/>  -l, --losers<br/>  -cl, --climate-leaders<br/>  -cc, --crypto<br/>  -c, --currency</span></pre><p id="de03" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">å…¨è¾“å‡º:</p><pre class="kc kd ke kf fd lg lh li lj aw lk bi"><span id="a22e" class="ll je hi lh b fi lm ln l lo lp">{<br/>  "most_active_trends": [<br/>    {<br/>      "position": 1,<br/>      "title": "Advanced Micro Devices, Inc.",<br/>      "quote": "AMD",<br/>      "quote_link": "https://www.google.com/finance/AMD:NASDAQ",<br/>      "price_change": "+$3.04",<br/>      "percent_price_change": "+3.22%"<br/>    }, ... other results<br/>    {<br/>      "position": 50,<br/>      "title": "Freeport-McMoRan Inc",<br/>      "quote": "FCX",<br/>      "quote_link": "https://www.google.com/finance/FCX:NYSE",<br/>      "price_change": "-$1.15",<br/>      "percent_price_change": "-3.66%"<br/>    }<br/>  ],<br/>  "most_active_discover_more": [<br/>    {<br/>      "position": 1,<br/>      "quote": "Index",<br/>      "quote_link": "https://www.google.com/financeFCX:NYSE",<br/>      "title": "Dow Jones Industrial Average",<br/>      "price": "32,772.36",<br/>      "percent_price_change": "-0.22%"<br/>    }, ... other results<br/>    {<br/>      "position": 18,<br/>      "quote": "NFLX",<br/>      "quote_link": "https://www.google.com/financeFCX:NYSE",<br/>      "title": "Netflix Inc",<br/>      "price": "$226.14",<br/>      "percent_price_change": "+0.55%"<br/>    }<br/>  ],<br/>  "most_active_news": [<br/>    {<br/>      "position": 1,<br/>      "title": "Alibaba says will work to keep trading in U.S., Hong Kong after being added \nto SEC delisting risk list",<br/>      "source": "CNBC",<br/>      "date": "7 hours ago",<br/>      "image": "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRMBjVDpAgK8AJP6gxfd89Kb5rz7th_s3ntTLA_WYWnVWT3Q05aQJTWpMpjcOg"<br/>    }, ... other news results<br/>    {<br/>      "position": 6,<br/>      "title": "Intel CEO: 'This is a time for a bit of austerity'",<br/>      "source": "Yahoo Finance",<br/>      "date": "4 hours ago",<br/>      "image": "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTxkwNmmHmcXqkF3-pa2Bl0SsCzdIJyB0jPdutL0vw9pV4sRkgy8BKemYIkEeg"<br/>    }<br/>  ]<br/>}</span></pre><h1 id="f7ce" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">è°·æ­Œé‡‘èå¸‚åœºAPI</h1><p id="439c" class="pw-post-body-paragraph kp kq hi ih b ii kr ks kt ik ku kv kw im kx ky kz io la lb lc iq ld le lf is hb bi translated">åœ¨SerpApiï¼Œæˆ‘ä»¬æœ€è¿‘å‘å¸ƒäº†ç¬¬ä¸€ä¸ªæ”¯æŒä»Google Financeæå–æ•°æ®çš„Apiã€‚æœ¬èŠ‚å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªAPIä»¥åŠå®ƒä¸DIYè§£å†³æ–¹æ¡ˆçš„ä¸åŒä¹‹å¤„ã€‚</p><p id="e74a" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">APIä»<code class="du lt lu lv lh b">google.com/finance/markets/indexes</code>ä¸­æå–ä¸€åˆ‡ã€‚ä»<a class="ae ix" href="https://serpapi.com/playground?engine=google_finance_markets&amp;trend=indexes" rel="noopener ugc nofollow" target="_blank">äº’åŠ¨æ¸¸ä¹åœºå¿«é€Ÿæµè§ˆ</a>:</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es ly"><img src="../Images/5595f44daef8e63b2a5cf829eb5924fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3PJZYcUWE--tI6WQ.gif"/></div></div></figure><p id="c9c7" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">è¿™äº›å·®å¼‚æ—¨åœ¨è§£å†³ä¸æ–­å˜åŒ–çš„CSSé€‰æ‹©å™¨æˆ–HTMLå…¶ä»–éƒ¨åˆ†çš„é—®é¢˜ï¼Œå› æ­¤ä¸éœ€è¦ç»´æŠ¤è§£æå™¨ã€‚</p><p id="e1c9" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿæ²¡æœ‰å¿…è¦å¼„æ¸…æ¥šå¦‚ä½•ç»•è¿‡å—ï¼Œå³ç‡IPé™åˆ¶ï¼ŒéªŒè¯ç ï¼Œæˆ–å…¶ä»–ç±»ä¼¼çš„ä¸œè¥¿ï¼Œè¦ä¹ˆç»•è¿‡å—æˆ–ç»´æŠ¤è§£æå™¨ã€‚</p><p id="e0a3" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">åœ¨è¿›å…¥ç”¨æ³•éƒ¨åˆ†ä¹‹å‰ï¼Œä¸‹é¢æ˜¯å¦‚ä½•ç”¨PyPiå®‰è£…å®ƒ:</p><pre class="kc kd ke kf fd lg lh lz bn ma mb bi"><span id="334a" class="mc je hi lh b be md me l mf lp">$ pip install google-search-results</span></pre><p id="dd49" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æå–â€œç¾æ´²â€è‚¡ç¥¨çš„ç”¨æ³•ç¤ºä¾‹:</p><pre class="kc kd ke kf fd lg lh lz bn ma mb bi"><span id="ebd1" class="mc je hi lh b be md me l mf lp">from serpapi import GoogleSearch<br/>import json<br/><br/># search parameters<br/>params = {<br/>  "api_key": "&lt;your-serpapi-api-key&gt;", <br/>  "device": "desktop",                  # device used for the search. Could be mobile or tablet also<br/>  "engine": "google_finance_markets",   # serpapi parser engine<br/>  "trend": "indexes"                    # market trend category<br/>}<br/>search = GoogleSearch(params)           # where data extraction happens on the SerpApi backend    <br/>results = search.get_dict()             # JSON -&gt; Python dict<br/><br/>americas_stocks = []<br/><br/>for result in results['market_trends']:<br/>    if 'americas' in result['title'].lower():<br/>        americas_stocks.append(result['results']) # list of stocks<br/>print(json.dumps(americas_stock, indent=2))</span></pre><p id="9c52" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">JSONè¾“å‡º:</p><pre class="kc kd ke kf fd lg lh lz bn ma mb bi"><span id="77c9" class="mc je hi lh b be md me l mf lp">[<br/>  [<br/>    {<br/>      "stock": ".INX:INDEXSP",<br/>      "link": "https://www.google.com/finance/quote/.INX:INDEXSP",<br/>      "name": "S&amp;P 500",<br/>      "price": "4,080.11",<br/>      "extracted_price": 4080.11,<br/>      "price_movement": {<br/>        "percentage": 3.09,<br/>        "value": 122.48,<br/>        "movement": "Up"<br/>      }<br/>    },<br/>    {<br/>      "stock": ".DJI:INDEXDJX",<br/>      "link": "https://www.google.com/finance/quote/.DJI:INDEXDJX",<br/>      "name": "Dow Jones Industrial Average",<br/>      "price": "34,589.77",<br/>      "extracted_price": 34589.77,<br/>      "price_movement": {<br/>        "percentage": 2.18,<br/>        "value": 737.24,<br/>        "movement": "Up"<br/>      }<br/>    },<br/>    {<br/>      "stock": ".IXIC:INDEXNASDAQ",<br/>      "link": "https://www.google.com/finance/quote/.IXIC:INDEXNASDAQ",<br/>      "name": "Nasdaq Composite",<br/>      "price": "11,468.00",<br/>      "extracted_price": 11468.0,<br/>      "price_movement": {<br/>        "percentage": 4.41,<br/>        "value": 484.22,<br/>        "movement": "Up"<br/>      }<br/>    },<br/>    {<br/>      "stock": "RUT:INDEXRUSSELL",<br/>      "link": "https://www.google.com/finance/quote/RUT:INDEXRUSSELL",<br/>      "name": "Russell 2000 Index",<br/>      "price": "1,886.58",<br/>      "extracted_price": 1886.58,<br/>      "price_movement": {<br/>        "percentage": 2.72,<br/>        "value": 50.03,<br/>        "movement": "Up"<br/>      }<br/>    },<br/>    {<br/>      "stock": "OSPTX:INDEXTSI",<br/>      "link": "https://www.google.com/finance/quote/OSPTX:INDEXTSI",<br/>      "name": "S&amp;P/TSX Composite Index",<br/>      "price": "20,453.26",<br/>      "extracted_price": 20453.26,<br/>      "price_movement": {<br/>        "percentage": 0.87,<br/>        "value": 175.85,<br/>        "movement": "Up"<br/>      }<br/>    },<br/>    {<br/>      "stock": "IBOV:INDEXBVMF",<br/>      "link": "https://www.google.com/finance/quote/IBOV:INDEXBVMF",<br/>      "name": "IBOVESPA",<br/>      "price": "112,486.01",<br/>      "extracted_price": 112486.01,<br/>      "price_movement": {<br/>        "percentage": 1.42,<br/>        "value": 1576.4,<br/>        "movement": "Up"<br/>      }<br/>    }<br/>  ]<br/>]</span></pre><h1 id="7781" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">é“¾æ¥</h1><ul class=""><li id="71ff" class="if ig hi ih b ii kr ik ku im mg io mh iq mi is it iu iv iw bi translated"><a class="ae ix" href="https://replit.com/@DimitryZub1/Scrape-Google-Finance-Markets-in-Python#main.py" rel="noopener ugc nofollow" target="_blank">åœ¨çº¿IDEä¸­çš„ä»£ç </a></li><li id="4fcf" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="https://github.com/dimitryzub/google-finance-py" rel="noopener ugc nofollow" target="_blank"> GitHubèµ„æºåº“</a></li><li id="f655" class="if ig hi ih b ii iy ik iz im ja io jb iq jc is it iu iv iw bi translated"><a class="ae ix" href="https://serpapi.com/google-finance-markets" rel="noopener ugc nofollow" target="_blank">è°·æ­Œé‡‘èå¸‚åœºåº”ç”¨ç¼–ç¨‹æ¥å£</a></li></ul><p id="f884" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">åŠ å…¥æˆ‘ä»¬çš„æ¨ç‰¹<a class="ae ix" href="https://twitter.com/serp_api" rel="noopener ugc nofollow" target="_blank"/>|<a class="ae ix" href="https://www.youtube.com/channel/UCUgIHlYBOD3yA3yDIRhg_mg" rel="noopener ugc nofollow" target="_blank">YouTube</a></p><p id="7555" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æ·»åŠ ä¸€ä¸ª<a class="ae ix" href="https://github.com/serpapi/public-roadmap/issues" rel="noopener ugc nofollow" target="_blank">ç‰¹å¾è¯·æ±‚</a>ğŸ’«è¿˜æ˜¯ä¸€ä¸ª<a class="ae ix" href="https://github.com/serpapi/public-roadmap/issues" rel="noopener ugc nofollow" target="_blank"> Bug </a>ğŸ</p><p id="77f4" class="pw-post-body-paragraph kp kq hi ih b ii ij ks kt ik il kv kw im lq ky kz io lr lb lc iq ls le lf is hb bi translated">æœ€åˆå‘å¸ƒäºser papi:<a class="ae ix" href="https://serpapi.com/blog/scrape-google-finance-markets-in-python/#full-code" rel="noopener ugc nofollow" target="_blank">https://ser papi . com/blog/scrape-Google-finance-markets-in-python/</a></p></div></div>    
</body>
</html>