<html>
<head>
<title>gRPC between Java and ReactJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javaå’ŒReactJSä¹‹é—´çš„gRPC</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/grpc-between-java-and-reactjs-bbfefe42a1a6?source=collection_archive---------5-----------------------#2021-09-06">https://medium.com/geekculture/grpc-between-java-and-reactjs-bbfefe42a1a6?source=collection_archive---------5-----------------------#2021-09-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/1f72ded2978b557eae86590a0dcc00d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*4zUbflvMIy0uYqtluVH3OQ.png"/></div></figure><p id="73d0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">RPCä»£è¡¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ŒgRPCæ˜¯Googleåœ¨2015å¹´å¼€å‘çš„RPCæ¡†æ¶ã€‚</p><p id="7a0f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ä¸RESTæˆ–GraphQLä¸€æ ·ï¼ŒgRPCæœ‰åŠ©äºå¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚ç„¶è€Œï¼Œå®ƒæœ‰ç‚¹ä¸åŒï¼Œå› ä¸ºå®ƒä½¿ç”¨HTTP/2è€Œä¸æ˜¯HTTP/1ï¼Œè¿™å°±æ˜¯gRPCå—æ¬¢è¿çš„åŸå› ï¼Œå› ä¸ºä½¿ç”¨HTTP/2æ¯”HTTP/1æ›´å¿«ã€æ›´å®‰å…¨ã€‚</p><h1 id="245d" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">æœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿåè®®ç¼“å†²åŒºæ˜¯æ­£ç¡®çš„é€‰æ‹©</h1><p id="25ac" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">åè®®ç¼“å†²åŒºæ˜¯ä¸€ç§åºåˆ—åŒ–ç»“æ„åŒ–æ•°æ®çš„æœºåˆ¶ï¼Œå®ƒå®šä¹‰äº†ä»ä¸åŒæœåŠ¡å‘é€æˆ–æ¥æ”¶çš„æ•°æ®çš„å½¢çŠ¶ï¼ŒåŒ…æ‹¬å±æ€§å’Œæ–¹æ³•ã€‚</p><p id="54bf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æ•°æ®çš„å½¢çŠ¶å¿…é¡»åœ¨<strong class="io hj">ä¸­å®šä¹‰ã€‚proto </strong>æ–‡ä»¶å¦‚ä¸‹:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="f372" class="kw jl hi ks b fi kx ky l kz la">syntax=â€proto3";</span><span id="e86f" class="kw jl hi ks b fi lb ky l kz la">package greet;</span><span id="43c4" class="kw jl hi ks b fi lb ky l kz la">message Greeting{</span><span id="b22a" class="kw jl hi ks b fi lb ky l kz la">   string first_name = 1;</span><span id="29ab" class="kw jl hi ks b fi lb ky l kz la">   string last_name = 2;</span><span id="2c69" class="kw jl hi ks b fi lb ky l kz la">}</span><span id="9f57" class="kw jl hi ks b fi lb ky l kz la">message GreetRequest{</span><span id="34b9" class="kw jl hi ks b fi lb ky l kz la">   Greeting greeting = 1;</span><span id="331e" class="kw jl hi ks b fi lb ky l kz la">}</span><span id="1369" class="kw jl hi ks b fi lb ky l kz la">message GreetResponse{</span><span id="1e5a" class="kw jl hi ks b fi lb ky l kz la">   string result = 1;</span><span id="1274" class="kw jl hi ks b fi lb ky l kz la">}</span><span id="643a" class="kw jl hi ks b fi lb ky l kz la">service GreetService{</span><span id="7013" class="kw jl hi ks b fi lb ky l kz la">    rpc Greet(GreetRequest) returns (GreetResponse){};</span><span id="96f4" class="kw jl hi ks b fi lb ky l kz la">}</span></pre><p id="e76c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">è¿™æ˜¯ä¸€ä¸ªå°†ç”¨äºå¾®æœåŠ¡ä¹‹é—´é€šä¿¡çš„æ•°æ®ç¤ºä¾‹ã€‚æˆ‘ä»¬æœ‰åŒ…å«ä¸¤ä¸ªå±æ€§çš„<strong class="io hj">é—®å€™</strong>å¯¹è±¡ï¼Œä»¥åŠ<strong class="io hj">é—®å€™è¯·æ±‚</strong>(å°†ä½œä¸ºè¯·æ±‚å‘é€)å’Œ<strong class="io hj">é—®å€™å“åº”</strong>(å°†æ˜¯æ¥è‡ªæœåŠ¡çš„å“åº”)ï¼Œæœ€é‡è¦çš„æ˜¯<strong class="io hj">é—®å€™æœåŠ¡</strong>ï¼Œå®ƒåŒ…å«å¯ä»¥ä»ä»»ä½•æœåŠ¡è°ƒç”¨çš„æ–¹æ³•ï¼Œè¯¥æœåŠ¡æ˜¯ä»¥<strong class="io hj">é—®å€™è¯·æ±‚</strong>ä½œä¸ºå‚æ•°å¹¶è¿”å›<strong class="io hj">é—®å€™å“åº”</strong>ã€‚</p><p id="54a6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥å‡†ç¡®åœ°çŸ¥é“è¦å‘é€ä»€ä¹ˆä»¥åŠå°†æ¥æ”¶ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚</p><p id="6722" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ï¼Œåœ¨ç°å®ä¸–ç•Œçš„åœºæ™¯ä¸­ï¼Œä¼ä¸šåº”ç”¨å¯ä»¥ç”±åŸºäºä¸åŒç¼–ç¨‹è¯­è¨€(Javaã€Pythonã€PHPç­‰)çš„ä¸åŒå¾®æœåŠ¡ç»„æˆï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸ºæ¯ç§è¯­è¨€å£°æ˜è¿™äº›æ•°æ®ã€‚</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es lc"><img src="../Images/e688a4fb66b804087e17f1d2ecdd5b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*oToGAk3r72KlNJoWgDFHkQ.png"/></div></figure><p id="ee93" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨ä½ ä¸€å®šåœ¨æƒ³â€œæˆ‘è¦ä¸ºæ¯ä¸ªæœåŠ¡å†™æ‰€æœ‰çš„ä¸œè¥¿å—ï¼Ÿï¼!"</p><p id="7e8a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<a class="ae ld" href="https://grpc.io/docs/protoc-installation/" rel="noopener ugc nofollow" target="_blank"><strong class="io hj">protocol</strong></a>çš„å·¥å…·ï¼Œå¯ä»¥ç”¨è®¸å¤šæ”¯æŒçš„è¯­è¨€ç¼–è¯‘ä½ çš„ä»£ç ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒğŸ˜ã€‚</p><p id="5dc1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨ï¼Œè¿™æ˜¯ä½ ä»gRPCå¼€å§‹éœ€è¦çŸ¥é“çš„ï¼Œå¦‚æœä½ æƒ³æ·±å…¥äº†è§£ï¼Œä½ å¯ä»¥æŸ¥çœ‹å®˜æ–¹<a class="ae ld" href="https://grpc.io/docs/" rel="noopener ugc nofollow" target="_blank">ç½‘ç«™</a>ï¼Œå®ƒéå¸¸å…¨é¢ã€‚</p></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="9380" class="jk jl hi bd jm jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh bi translated">å…ˆå†³æ¡ä»¶:</h1><p id="e854" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç°åœ¨æˆ‘å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨Javaå’ŒReactJSä»gRPCå¼€å§‹ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®‰è£…ä»¥ä¸‹ä¸‰æ ·ä¸œè¥¿:</p><ol class=""><li id="d780" class="lq lr hi io b ip iq it iu ix ls jb lt jf lu jj lv lw lx ly bi translated">è¿™æ˜¯ç¼–è¯‘å™¨ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®‰è£…<a class="ae ld" href="https://grpc.io/docs/protoc-installation/" rel="noopener ugc nofollow" target="_blank">https://grpc.io/docs/protoc-installation/</a>ï¼Œä½ å¿…é¡»èƒ½å¤Ÿä»ä½ çš„å‘½ä»¤è¡Œè¿è¡Œâ€œåè®®â€ã€‚</li><li id="9c2a" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">protocol-gen-grpc-java:è¿™æ˜¯ä¸€ä¸ªprotocolæ’ä»¶ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬ä»protoæ–‡ä»¶ç”ŸæˆJavaä»£ç ã€‚(å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°<a class="ae ld" href="https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.40.1/" rel="noopener ugc nofollow" target="_blank">https://repo 1 . maven . org/maven 2/io/grpc/protocol-gen-grpc-Java/1 . 40 . 1/</a>)</li></ol><blockquote class="me mf mg"><p id="f1f7" class="im in mh io b ip iq ir is it iu iv iw mi iy iz ja mj jc jd je mk jg jh ji jj hb bi translated">æ³¨æ„:å¯¹äºMacOSæ¥è¯´ï¼Œè¿™æœ‰ç‚¹æ£˜æ‰‹ï¼Œä½ éœ€è¦ä¸‹è½½<a class="ae ld" href="https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.40.1/protoc-gen-grpc-java-1.40.1-osx-x86_64.exe" rel="noopener ugc nofollow" target="_blank">protocol-gen-grpc-Java-1 . 40 . 1-OS x-x86 _ 64 . exe</a>ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªwindowsåº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦åˆ é™¤ã€‚ç„¶åè¿è¡Œ<strong class="io hj">chmod+x/usr/local/bin/protocol-gen-grpc-Java</strong></p></blockquote><p id="09c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.<strong class="io hj">protoco-gen-grpc-web</strong>:è¿™æ˜¯ä¸€ä¸ªprotocoæ’ä»¶ï¼Œç”¨äºä»protoæ–‡ä»¶ç”ŸæˆTSä»£ç ã€‚(ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒ<a class="ae ld" href="https://github.com/grpc/grpc-web/releases" rel="noopener ugc nofollow" target="_blank">https://github.com/grpc/grpc-web/releases</a>å¹¶ç¡®ä¿å°†äºŒè¿›åˆ¶æ–‡ä»¶ç§»åŠ¨åˆ°<em class="mh"> /usr/local/bin </em>å°±åƒæˆ‘ä»¬å¯¹javaæ’ä»¶åšçš„é‚£æ ·)</p><h1 id="539d" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">åŠ¨æ‰‹æ“ä½œ:</h1><p id="9651" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç°åœ¨æˆ‘ä»¬å°†åˆ›å»º3ä¸ªæ–‡ä»¶å¤¹:</p><ol class=""><li id="9a65" class="lq lr hi io b ip iq it iu ix ls jb lt jf lu jj lv lw lx ly bi translated"><strong class="io hj"> proto: </strong>æˆ‘ä»¬å°†åœ¨è¿™é‡Œå­˜å‚¨ä¸ºjavaå’Œreactç”Ÿæˆçš„proto buffæ–‡ä»¶ã€‚</li><li id="400c" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated"><strong class="io hj">Java</strong>:Javaå¾®æœåŠ¡</li><li id="4eeb" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated"><strong class="io hj"> react </strong>:æˆ‘ä»¬å°åº”ç”¨çš„å‰ç«¯</li></ol><p id="8118" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æ‚¨åº”è¯¥æœ‰ç±»ä¼¼çš„ä¸œè¥¿:</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/bab35f91052e10fba14a5809d8ed6b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*nFMUTAVYv_b7VnfLYcC41A.png"/></div></figure><h1 id="c818" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">åˆ›å»ºåŸå‹æ–‡ä»¶:</h1><p id="9e4d" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º<strong class="io hj"> greet.proto </strong>çš„åŸå‹æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="11f9" class="kw jl hi ks b fi kx ky l kz la">syntax="proto3";// syntax of the proto file (current version is 3)<br/>package proto.greet; // package where we will generate the file<br/><br/>option java_multiple_files = true; // use multiple file for each object instead of one big file<br/><br/>message Greeting{<br/>   string first_name = 1;<br/>   string last_name = 2;<br/>}<br/><br/>message GreetRequest{<br/>   Greeting greeting = 1;<br/>}<br/><br/>message GreetResponse{<br/>   string result = 1;<br/>}<br/><br/>service GreetService{<br/>    rpc Greet(GreetRequest) returns (GreetResponse){};<br/>}</span></pre><p id="2526" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">è¿™é‡Œæˆ‘ä»¬å°†æœ‰3ä¸ªå¯ä»¥åœ¨æˆ‘ä»¬çš„æœåŠ¡ä¹‹é—´ä¼ é€’çš„å¯¹è±¡ï¼Œå®ƒä»¬æ˜¯<strong class="io hj"> Greeting </strong>ã€<strong class="io hj"> GreetRequest </strong>å’Œ<strong class="io hj"> GreetResponse </strong>ï¼Œæˆ‘ä»¬çš„æœåŠ¡<strong class="io hj"> GreetService </strong>å°†å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ–¹æ³•<strong class="io hj"> Greet </strong>è¿›è¡Œé€šä¿¡ï¼Œè¯¥æ–¹æ³•å°†<strong class="io hj">greeteresuest</strong>ä½œä¸ºå‚æ•°å¹¶è¿”å›<strong class="io hj"> GreetResponse </strong>ã€‚</p><h1 id="f40f" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">è®¾ç½®javaæœåŠ¡</h1><p id="a42d" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç®€å•åœ°è¯´ï¼Œå¦‚æœä½ æœ‰IntellijIDEAï¼Œä½ å¯ä»¥å¼€å§‹ä¸€ä¸ªæ–°çš„javaé¡¹ç›®(æˆ‘ç”¨çš„æ˜¯Gradleè€Œä¸æ˜¯Mavenï¼Œæ‰€ä»¥è¯·è·Ÿéšæˆ‘æœ‰åŒæ ·çš„ä½“éªŒ)ã€‚</p><p id="de24" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">é¡¹ç›®å‡†å¤‡å°±ç»ªåï¼Œæˆ‘ä»¬éœ€è¦å°†gRPCä¾èµ–é¡¹æ·»åŠ åˆ°ä¾èµ–é¡¹éƒ¨åˆ†çš„<strong class="io hj"> build.gradle </strong>æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="c878" class="kw jl hi ks b fi kx ky l kz la">dependencies <strong class="ks hj">{<br/>    </strong>testCompile group: 'junit', name: 'junit', version: '4.12'<br/>    // these are the dependecies related to grpc<br/>    implementation 'io.grpc:grpc-netty-shaded:1.40.1'<br/>    implementation 'io.grpc:grpc-protobuf:1.40.1'<br/>    implementation 'io.grpc:grpc-stub:1.40.1'<br/>    compileOnly 'org.apache.tomcat:annotations-api:6.0.53' // necessary for Java 9+<br/><strong class="ks hj">}</strong></span></pre><p id="26a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj"> <em class="mh">æ³¨æ„:ä¸€å®šè¦ç‚¹å‡»IntellijIDEAå³ä¸Šè§’çš„å°æŒ‰é’®ä¸‹è½½ã€‚</em>T41ã€‘</strong></p><h1 id="67b2" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">ä¸ºJavaç”Ÿæˆä»£ç :</h1><p id="894d" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç°åœ¨åˆ°äº†ç²¾å½©çš„éƒ¨åˆ†ï¼æˆ‘ä»¬ç°åœ¨æƒ³å°†protoæ–‡ä»¶çš„å†…å®¹è½¬ç§»åˆ°javaç±»ï¼Œè¿™å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆ:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="4e9b" class="kw jl hi ks b fi kx ky l kz la"><strong class="ks hj">$</strong> cd /path/to/proto/folder # make sure to enter the proto folder to run the command from there<br/><strong class="ks hj">$</strong> protoc -I="./" --plugin=protoc-gen-grpc-java=/path/to/protoc-gen-grpc-java --grpc-java_out="./../java/src/main/java" --java_out="./../java/src/main/java" "./greet.proto"</span></pre><p id="e0d0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">è®©æˆ‘ä»¬æ¥ç†è§£è¿™ä¸ªå‘½ä»¤:</p><ol class=""><li id="829b" class="lq lr hi io b ip iq it iu ix ls jb lt jf lu jj lv lw lx ly bi translated"><strong class="io hj">åè®®</strong>:æ˜¯ç¼–è¯‘å™¨</li><li id="4745" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated"><strong class="io hj"> -I </strong>:ç¡®å®šåŸå‹æ–‡ä»¶ä½ç½®çš„æ ‡å¿—(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯å½“å‰ä½ç½®)</li><li id="1b3a" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated"><strong class="io hj"> â€”æ’ä»¶</strong>:æ˜¯æˆ‘ä»¬ç”¨æ¥å†³å®šå°†ptotoæ–‡ä»¶è½¬æ¢æˆå“ªç§è¯­è¨€çš„æ ‡å¿—</li><li id="eafe" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated"><strong class="io hj"> â€” grpc-java_out &amp;</strong></li><li id="7ccf" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated"><strong class="io hj">â€ã€‚/greet.proto" </strong>:è¦ç”Ÿæˆçš„æ–‡ä»¶çš„åç§°</li></ol><p id="4f28" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç„¶åå˜£ğŸ˜ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º:</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/40176d7180fbabb07a3bf33932333025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*K8WiWXor56eHp_RrUsnqIg.png"/></div></figure><p id="d9f1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æˆ‘ä»¬è¿˜æ²¡å®Œï¼Œä¸è¦é«˜å…´ğŸ˜Šç°åœ¨ï¼Œåè®®ä¸ºæˆ‘ä»¬çš„å¯¹è±¡å’ŒæœåŠ¡ç”Ÿæˆäº†åŸºç±»ï¼Œä½†ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸ºgreetæ–¹æ³•å®ç°æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘ï¼Œå½“ä¸€äº›æœåŠ¡è°ƒç”¨greetæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬åˆ°åº•æƒ³åšä»€ä¹ˆï¼Œè¿™å–å†³äºæˆ‘ä»¬è‡ªå·±æ¥å®šä¹‰å®ƒã€‚</p><p id="7f5d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º<strong class="io hj"> GreetServiceImpl </strong>çš„ç±»ï¼Œå®ƒå°†ä»protocç”Ÿæˆçš„ç±»<strong class="io hj"> GreetServiceImplBase </strong>æ‰©å±•è€Œæ¥ã€‚</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="er es mn"><img src="../Images/e7733a68144e7e9957d2b17d913c1175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M14KMFsv5m9sCx3wL51XNA.png"/></div></div></figure><p id="0381" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">å¦‚ä½ æ‰€è§ï¼Œæˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªåä¸º<strong class="io hj"> com.grpc.service </strong>çš„åŒ…ï¼Œåœ¨å…¶ä¸­æˆ‘åˆ›å»ºäº†ä»<strong class="io hj"> GreetServiceGrpcæ‰©å±•è€Œæ¥çš„<strong class="io hj"> GreetServiceImpl </strong>ç±»ã€‚greeteserviceimplbase</strong>ç”±åŒ…å«greetæ–¹æ³•çš„protocç”Ÿæˆï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­å®šä¹‰è‡ªå·±çš„é€»è¾‘ï¼Œæˆ‘æ˜¯è¿™æ ·åšçš„:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="6efd" class="kw jl hi ks b fi kx ky l kz la">package com.grpc.service;<br/><br/>import io.grpc.stub.StreamObserver;<br/>import proto.greet.GreetRequest;<br/>import proto.greet.GreetResponse;<br/>import proto.greet.GreetServiceGrpc;<br/>import proto.greet.Greeting;<br/><br/>public class GreetServiceImpl extends GreetServiceGrpc.GreetServiceImplBase {<br/><br/>    @Override<br/>    public void greet(GreetRequest request, StreamObserver&lt;GreetResponse&gt; responseObserver) {<br/>        System.<em class="mh">out</em>.println("You are in the greet method or the greet service");<br/>        <br/>        // we get the greeting object from the request (as defined in the proto file)<br/>        Greeting greeting = request.getGreeting();<br/>        String result = "Hello " + greeting.getFirstName() + greeting.getLastName();<br/>        <br/>        // build our response where the type should be GreetResponse<br/>        GreetResponse response = GreetResponse.<em class="mh">newBuilder</em>()<br/>                .setResult(result)<br/>                .build();<br/>        <br/>        responseObserver.onNext(response);// send the response<br/>        responseObserver.onCompleted();// complete the execution<br/>    }<br/>}</span></pre><p id="b561" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨è®©æˆ‘ä»¬æ„å»ºæœåŠ¡å™¨ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º<strong class="io hj"> com.grpc.server </strong>çš„æ–°åŒ…ï¼Œå¹¶åœ¨å®ƒä¸‹é¢åˆ›å»º<strong class="io hj">ServerImpl.java</strong>ç±»ï¼Œç„¶åå¤åˆ¶ä»¥ä¸‹å†…å®¹:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="becc" class="kw jl hi ks b fi kx ky l kz la">package com.grpc.server;<br/><br/>import com.grpc.service.GreetServiceImpl;<br/>import io.grpc.Server;<br/>import io.grpc.ServerBuilder;<br/><br/>public class ServerImpl {<br/><br/>    public static void main(String[] args) throws Exception{<br/>        final int PORT = 9090;<br/><br/>        // Create a new server to listen on port 9090<br/>        Server server = ServerBuilder.<em class="mh">forPort</em>(PORT)<br/>                .addService(new GreetServiceImpl())<br/>                .build();<br/><br/>        // Start the server<br/>        server.start();<br/><br/>        // Server threads are running in the background.<br/>        System.<em class="mh">out</em>.println("Server started...");<br/>        // Don't exit the main thread. Wait until server is terminated.<br/>        server.awaitTermination();<br/>    }<br/>}</span></pre><p id="34d7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨æ‚¨å¯ä»¥è¿è¡ŒæœåŠ¡å™¨äº†ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°â€œæœåŠ¡å™¨å·²å¯åŠ¨â€¦â€ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬åœ¨javaæ–¹é¢çš„å·¥ä½œå°±å®Œæˆäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å¼€å§‹ååº”å§ğŸ˜Šã€‚</p><h1 id="926f" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">è®¾ç½®ReactJSæœåŠ¡:</h1><p id="1bbd" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºåŸºäºTypeScriptçš„reactåº”ç”¨ç¨‹åº:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="9e72" class="kw jl hi ks b fi kx ky l kz la"><strong class="ks hj">$</strong> npx create-react-app react-grpc --template typescript</span></pre><p id="ac9f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">åƒjavaä¾èµ–é¡¹ä¸€æ ·ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªä¾èµ–é¡¹éœ€è¦æ·»åŠ åˆ°reactä¸­ï¼Œå®ƒä»¬æ˜¯<a class="ae ld" href="https://github.com/grpc/grpc-web" rel="noopener ugc nofollow" target="_blank"> grpc-web </a>å’Œgoogle-protobufï¼Œæ‰€ä»¥ä¸€å®šè¦å®‰è£…å®ƒ:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="e7a5" class="kw jl hi ks b fi kx ky l kz la"><strong class="ks hj">$</strong> cd react-grpc<br/><strong class="ks hj">$</strong> npm i grpc-web google-protobuf</span></pre><p id="ffd7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»æˆ‘ä»¬çš„åŸå‹æ–‡ä»¶ç”Ÿæˆtypescriptä»£ç ï¼Œå°±åƒæˆ‘ä»¬å¯¹javaæ‰€åšçš„é‚£æ ·:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="03a6" class="kw jl hi ks b fi kx ky l kz la"><strong class="ks hj">$</strong> cd path/to/react-grpc # access the react project<br/><strong class="ks hj">$</strong> mkdir src/output # create a folder called "output" where to store the generated code<br/><strong class="ks hj">$</strong> cd path/to/proto/folder # access the proto files folder<br/><strong class="ks hj">$</strong> protoc ./greet.proto --js_out=import_style=commonjs:./src/output --grpc-web_out=import_style=typescript,mode=grpcwebtext:./src/output # this will generate the typescript code</span></pre><blockquote class="me mf mg"><p id="137a" class="im in mh io b ip iq ir is it iu iv iw mi iy iz ja mj jc jd je mk jg jh ji jj hb bi translated">æ³¨æ„:å¦‚æœprotocoå‘½ä»¤ä¸èµ·ä½œç”¨ï¼Œè¯·éªŒè¯protoco-gen-grpc-webæ’ä»¶ã€‚ä¸ºäº†ä½¿è¯¥å‘½ä»¤èµ·ä½œç”¨ï¼Œæ‚¨åº”è¯¥æ­£ç¡®è®¾ç½®å®ƒã€‚</p></blockquote><p id="79af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨ï¼Œæ‚¨åº”è¯¥åœ¨reacté¡¹ç›®ä¸­çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="er es ms"><img src="../Images/846743b186b834a7d5c045fb9e8c7965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fg61qeh3cgrtTYBI-eqg3g.png"/></div></div></figure><p id="b709" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">å¤ªæ£’äº†ï¼Œæ­£å¦‚ä½ å¯ä»¥ä»ä¸€ä¸ªæ–‡ä»¶ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„æœåŠ¡ç”Ÿæˆä¸åŒçš„æºä»£ç ï¼Œå¹¶è®©å®ƒä»¬è¯´åŒä¸€ç§è¯­è¨€:)</p><h1 id="89a8" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">Reactå’ŒJavaä¹‹é—´çš„é€šä¿¡:</h1><p id="3f35" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç°åœ¨è½¬åˆ°<strong class="io hj"> App.tsx </strong>æ–‡ä»¶ï¼Œåˆ é™¤å…¶ä¸­çš„æ‰€æœ‰ä»£ç å¹¶å¤åˆ¶ç²˜è´´è¿™ä¸ªæ–‡ä»¶:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="8be6" class="kw jl hi ks b fi kx ky l kz la">import './App.css';<br/>import { GreetServiceClient } from './output/GreetServiceClientPb';<br/>import { Greeting, GreetRequest, GreetResponse } from './output/greet_pb';<br/><br/>function App() {<br/><br/>  const grpcCall = () =&gt; {<br/><br/>    // create our greeting object<br/>    let greeting = new Greeting();<br/>    greeting.setFirstName('Slimen')<br/>    greeting.setLastName('Arnaout')<br/><br/>     // prepare the greet request<br/>     const request = new GreetRequest();<br/>     request.setGreeting(greeting);<br/><br/>     // create gRPC client that will call ou java server<br/>     const client = new GreetServiceClient('http://localhost:9090')<br/>                    .greet(request, {}, (err, response) =&gt; {<br/>                console.log({err, response});<br/>            });<br/>        }<br/><br/>return (<br/>      &lt;div&gt;<br/>         &lt;button onClick={grpcCall}&gt;Click&lt;/button&gt;<br/>      &lt;/div&gt;<br/> );<br/>}<br/><br/>export default App;</span></pre><p id="57a1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç®€å•åœ°è¯´ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„åªæ˜¯åˆ›å»ºäº†æˆ‘ä»¬çš„<strong class="io hj">é—®å€™</strong>å’Œ<strong class="io hj">é—®å€™è¯·æ±‚</strong>å¯¹è±¡ï¼Œä¹‹åæˆ‘ä»¬è°ƒç”¨äº†<strong class="io hj">é—®å€™æœåŠ¡å®¢æˆ·ç«¯</strong>ï¼Œè¿™å…è®¸æˆ‘ä»¬åœ¨javaç«¯è°ƒç”¨é—®å€™æ–¹æ³•ã€‚</p><p id="3b35" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">åœ¨å¹•åï¼ŒgRPCå°†è°ƒç”¨ä¸€ä¸ªç‰¹å®šçš„URLï¼Œè¯¥URLå°†ä¸javaé€šä¿¡ä»¥è·å¾—å“åº”ã€‚T9ã€‘</p><p id="4583" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨æ§åˆ¶å°ä¸­é”®å…¥â€œnpm startâ€æ¥è¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚</p><h1 id="1e66" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">æ„å¤–è¡Œä¸ºï¼ï¼</h1><p id="5202" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">å¦‚æœæˆ‘ä»¬ç‚¹å‡»æŒ‰é’®å‘javaåº”ç”¨ç¨‹åºå‘é€è¯·æ±‚ï¼Œæˆ‘ä»¬ä¼šåœ¨æ§åˆ¶å°ä¸­å¾—åˆ°è¿™ä¸ªé”™è¯¯</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="er es mt"><img src="../Images/5cb14f6464c0194b127e2bd75ce23b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o1Dl98ejOeZgFgQXTDG6hw.png"/></div></div></figure><p id="3a1f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">åœ¨javaç«¯ï¼Œæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªæ¶ˆæ¯</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="8ccb" class="kw jl hi ks b fi kx ky l kz la">Sep 06, 2021 1:09:17 PM io.grpc.netty.shaded.io.grpc.netty.NettyServerTransport notifyTerminated<br/>INFO: Transport failed<br/>io.grpc.netty.shaded.io.netty.handler.codec.http2.Http2Exception: <strong class="ks hj">Unexpected HTTP/1.x request</strong>: OPTIONS /proto.greet.GreetService/Greet</span></pre><p id="cb19" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">ç°åœ¨è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ï¼</strong></p><p id="60bf" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æ­£å¦‚æˆ‘åœ¨æœ¬æ–‡å¼€å§‹æ—¶æåˆ°çš„ï¼ŒgRPCä½¿ç”¨HTTP/2è€Œä¸æ˜¯HTTP/1ï¼Œåˆšåˆšå‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬çš„Reactåº”ç”¨ç¨‹åºè¯•å›¾å‘æˆ‘ä»¬çš„javaæœåŠ¡å‘é€ä¸€ä¸ªç®€å•çš„HTTP/1è¯·æ±‚ï¼Œè¿™å°±æ˜¯å®ƒæŠ±æ€¨å®ƒçš„åŸå› ã€‚</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="44eb" class="kw jl hi ks b fi kx ky l kz la">// the react app is trying to access directly to the java service via the port <strong class="ks hj">9090</strong><br/>const client = new GreetServiceClient('http://localhost:<strong class="ks hj">9090</strong>')<br/>   .greet(request, {}, (err, response: GreetResponse) =&gt; {<br/>    console.log({err, response});<br/>});</span></pre><p id="6a49" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æ­£å¦‚ä½ åœ¨è¿™æ®µä»£ç ä¸­çœ‹åˆ°çš„ï¼Œreactæ­£è¯•å›¾é€šè¿‡ç«¯å£<strong class="io hj"> 9090ã€</strong>ç›´æ¥è°ƒç”¨æˆ‘ä»¬çš„javaæœåŠ¡ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªæœåŠ¡ä¹‹é—´æœ‰ä¸€ä¸ªä»£ç†ï¼Œå®ƒå°†æŠŠHTTP/1è¯·æ±‚è½¬æ¢æˆHTTP/2ï¼Œä¸ºæ­¤æˆ‘ä»¬å°†ä½¿ç”¨<strong class="io hj"> Envoyã€‚</strong>ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºç‰¹ä½¿çš„å†…å®¹<strong class="io hj"/><a class="ae ld" href="https://www.envoyproxy.io/docs/envoy/latest/intro/what_is_envoy" rel="noopener ugc nofollow" target="_blank">https://www . Envoy proxy . io/docs/Envoy/latest/intro/what _ is _ Envoy</a>ã€‚</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="er es mu"><img src="../Images/ad5b99d2a01b10b3ccab59798f04dc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mrva-numgJnaANcVrEMEkg.png"/></div></div></figure><h1 id="4460" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">è§£å†³é—®é¢˜:</h1><p id="3b0f" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†reactåº”ç”¨ç¨‹åºä¸­çš„ç«¯å£ä»9090æ”¹ä¸º8080</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="5fb9" class="kw jl hi ks b fi kx ky l kz la">const client = new GreetServiceClient('http://localhost:8080') <strong class="ks hj">&lt;==</strong><br/>.greet(request, {}, (err, response: GreetResponse) =&gt; {<br/>    console.log({err, response});<br/>});</span></pre><h1 id="a8f3" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">è®¾ç½®ç‰¹ä½¿:</h1><p id="558c" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®Envoyç›‘å¬ç«¯å£8080ï¼Œå¹¶åœ¨é€šè¿‡ç«¯å£9090å°†è¯·æ±‚å‘é€åˆ°javaæœåŠ¡ä¹‹å‰å°†æ¯ä¸ªè¯·æ±‚è½¬æ¢ä¸ºHTTP/2ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨reacté¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºenvoy.yamlçš„YAMLæ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶ç²˜è´´åˆ°å…¶ä¸­:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="389d" class="kw jl hi ks b fi kx ky l kz la">admin:<br/>  access_log_path: /tmp/admin_access.log<br/>  address:<br/>    socket_address: { address: 0.0.0.0, port_value: 9901 }<br/><br/>static_resources:<br/>  listeners:<br/>    - name: listener_0<br/>      address:<br/>        socket_address: { address: 0.0.0.0, port_value: 8080 } <em class="mh"># the port to listen to<br/>      </em>filter_chains:<br/>        - filters:<br/>            - name: envoy.filters.network.http_connection_manager<br/>              typed_config:<br/>                "@type": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager<br/>                codec_type: auto<br/>                stat_prefix: ingress_http<br/>                route_config:<br/>                  name: local_route<br/>                  virtual_hosts:<br/>                    - name: local_service<br/>                      domains: ["*"]<br/>                      routes:<br/>                        - match: { prefix: "/" }<br/>                          route:<br/>                            cluster: greeter_service <em class="mh"># name of the service, you can see it in the bottom of thi file<br/>                            </em>max_stream_duration:<br/>                              grpc_timeout_header_max: 0s<br/>                      cors:<br/>                        allow_origin_string_match:<br/>                          - prefix: "*"<br/>                        allow_methods: GET, PUT, DELETE, POST, OPTIONS<br/>                        allow_headers: keep-alive,user-agent,cache-control,content-type,content-transfer-encoding,custom-header-1,x-accept-content-transfer-encoding,x-accept-response-streaming,x-user-agent,x-grpc-web,grpc-timeout<br/>                        max_age: "1728000"<br/>                        expose_headers: custom-header-1,grpc-status,grpc-message<br/>                http_filters:<br/>                  - name: envoy.filters.http.grpc_web<br/>                  - name: envoy.filters.http.cors<br/>                  - name: envoy.filters.http.router<br/>  clusters:<br/>    - name: greeter_service <em class="mh"># name of our java service<br/>      </em>connect_timeout: 0.25s<br/>      type: logical_dns<br/>      http2_protocol_options: {}<br/>      lb_policy: round_robin<br/>      load_assignment:<br/>        cluster_name: greeter_service<br/>        endpoints:<br/>          - lb_endpoints:<br/>              - endpoint:<br/>                  address:<br/>                    socket_address:<br/>                      address: host.docker.internal<br/>                      port_value: 9090 <em class="mh"># port of the java service</em></span></pre><p id="60af" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨envoyçš„dockerå›¾åƒï¼Œä¸ºäº†ç®€åŒ–ï¼Œæˆ‘å°†ä½¿ç”¨docker-composeï¼Œè¿™æ˜¯æˆ‘çš„<strong class="io hj"> docker-compose.yaml </strong>æ–‡ä»¶:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="7d19" class="kw jl hi ks b fi kx ky l kz la">version: '3'<br/>services:<br/>  envoy:<br/>    image: envoyproxy/envoy-dev:b145180d17cac80aa5f9a7801429d52017fea6d1<br/>    volumes:<br/>      - ./envoy.yaml:/etc/envoy/envoy.yaml<br/>    ports:<br/>      - "8080:8080"<br/>      - "9901:9901"</span></pre><blockquote class="me mf mg"><p id="b749" class="im in mh io b ip iq ir is it iu iv iw mi iy iz ja mj jc jd je mk jg jh ji jj hb bi translated">æ³¨æ„:ç¡®ä¿envoy.yamlå’Œdocker-compose.yamlåœ¨åŒä¸€ä¸ªä½ç½®</p></blockquote><p id="f4e5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">å°±è¿™æ ·ï¼Œæˆ‘ä»¬çš„gRPCé¡¹ç›®ç°å·²å‡†å¤‡å°±ç»ªï¼Œè¦è¿è¡Œå®ƒï¼Œè¯·ç¡®ä¿:</p><ol class=""><li id="e13e" class="lq lr hi io b ip iq it iu ix ls jb lt jf lu jj lv lw lx ly bi translated">è¿è¡Œjavaåç«¯</li><li id="2f5d" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">é€šè¿‡â€œnpmå¯åŠ¨â€è¿è¡Œreactåº”ç”¨ç¨‹åº</li><li id="c391" class="lq lr hi io b ip lz it ma ix mb jb mc jf md jj lv lw lx ly bi translated">ä½¿ç”¨â€œdocker-compose upâ€è¿è¡Œç‰¹ä½¿ä»£ç†</li></ol><p id="336e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°javaæœåŠ¡çš„å“åº”ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="kn ko kp kq fd ij er es paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="er es mv"><img src="../Images/c271b84cf3006a03551fd14a5c893c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FyLykla9JO-D4CvzAzsB4Q.png"/></div></div></figure></div><div class="ab cl le lf gp lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hb hc hd he hf"><h1 id="aad5" class="jk jl hi bd jm jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh bi translated">æ‘˜è¦</h1><p id="6165" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå°é¡¹ç›®ï¼Œä½†å®ƒæ˜¯ç†è§£å¦‚ä½•ä»gRPCå¼€å§‹ä»¥åŠå¦‚ä½•ä½¿å®ƒä¸ä¸åŒçš„æœåŠ¡ä¸€èµ·å·¥ä½œçš„ä¸€ä¸ªç®€å•æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­æ‰€åšçš„æ­¥éª¤å¯¹äºæ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯éå¸¸ç›¸åŒçš„ã€‚</p><p id="2d11" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">å¦‚æœæ‚¨æƒ³æ›´æ·±å…¥åœ°äº†è§£gRPCï¼Œæˆ‘é¼“åŠ±æ‚¨é˜…è¯»å®˜æ–¹æ–‡æ¡£ã€‚</p><p id="f3ff" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">æˆ‘å¸Œæœ›ä½ å–œæ¬¢é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œå¹¶ç¥ä½ æœ‰ç¾å¥½çš„ä¸€å¤©ğŸ˜Š</p></div></div>    
</body>
</html>