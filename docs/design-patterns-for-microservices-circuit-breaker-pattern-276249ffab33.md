# æ–­è·¯å™¨æ¨¡å¼(å¾®æœåŠ¡çš„è®¾è®¡æ¨¡å¼)

> åŸæ–‡ï¼š<https://medium.com/geekculture/design-patterns-for-microservices-circuit-breaker-pattern-276249ffab33?source=collection_archive---------1----------------------->

![](img/c741d9765db5dbf99d12085f441c69bc.png)

Source: [https://womenyoushouldknow.net/](https://womenyoushouldknow.net/)

åœ¨ä¸€ä¸ª[åˆ†å¸ƒå¼ç³»ç»Ÿ](https://en.wikipedia.org/wiki/Distributed_computing)ä¸­ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å…¶ä»–ç»„ä»¶ä¼šå¦‚ä½•å¤±æ•ˆã€‚ç½‘ç»œé—®é¢˜å¯èƒ½ä¼šå‘ç”Ÿï¼Œç»„ä»¶å¯èƒ½ä¼šå‡ºç°æ•…éšœï¼Œæˆ–è€…è·¯ç”±å™¨æˆ–äº¤æ¢æœºå¯èƒ½ä¼šæŸåã€‚æˆ‘ä»¬ä¸çŸ¥é“ä¼šå‡ºä»€ä¹ˆé—®é¢˜ã€‚
å› æ­¤ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½æœ‰è´£ä»»ä¿æŒæ´»åŠ›ã€‚ä½œä¸ºä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œä½ æœ‰è´£ä»»è®©ä»–ä»¬æ´»ä¸‹å»ã€‚

# ä»€ä¹ˆæ˜¯æ–­è·¯å™¨ï¼Ÿ

ğŸŒŸè¦äº†è§£æ–­è·¯å™¨è®¾è®¡æ¨¡å¼ï¼Œæ‚¨åº”è¯¥é¦–å…ˆäº†è§£æ–­è·¯å™¨ã€‚

ğŸŒŸå¦‚æœä½ å®¶æ˜¯ç”¨ç”µçš„ï¼Œæˆ‘è‚¯å®šä½ å®¶æœ‰æ–­è·¯å™¨ã€‚å½“ä½ ä»ä¸»ç”µç½‘è·å¾—ç”µåŠ›æ—¶ï¼Œå®ƒä¼šé€šè¿‡ä¸€ä¸ªæ–­è·¯å™¨ã€‚

ğŸŒŸæ–­è·¯å™¨æ˜¯ä¸€ç§è‡ªåŠ¨æ“ä½œçš„ç”µæ°”å¼€å…³ï¼Œç”¨äºä¿æŠ¤ç”µè·¯å…å—è¿‡è½½(ä¾‹å¦‚:é›·å‡»)æˆ–çŸ­è·¯é€ æˆçš„æŸåã€‚å…¶ä¸»è¦ç›®çš„æ˜¯åœ¨å‘ç°ç¼ºé™·æ—¶åœæ­¢ç”µæµï¼Œä¿æŠ¤æ‚¨å®¶ä¸­çš„ç”µå™¨ã€‚

ğŸŒŸä½ æƒ³çŸ¥é“è¿™ä¸€ç‚¹æ˜¯å› ä¸ºï¼Œæ–­è·¯å™¨çš„å·¥ä½œæ–¹å¼æˆ–å¤šæˆ–å°‘ä¸æ–­è·¯å™¨è®¾è®¡æ¨¡å¼éå¸¸ç›¸ä¼¼ã€‚

![](img/0e0c1b2f7f9ad580224ed98fd1a0bf3a.png)

Circuit breaker (Source: [https://pixabay.com/users/diermaier-1497330/](https://pixabay.com/users/diermaier-1497330/))

# æ–­è·¯å™¨æ¨¡å¼

ğŸŒŸé¡¾åæ€ä¹‰ï¼Œæ–­è·¯å™¨è®¾è®¡æ¨¡å¼ç”¨äºåœ¨æœåŠ¡ä¸å·¥ä½œæ—¶åœæ­¢è¯·æ±‚å’Œå“åº”è¿‡ç¨‹ã€‚

![](img/ca05fa8c3238f819bfb5a011b1317a5e.png)

Figure 1: [Circuit Breaker Pattern](https://www.edureka.co/blog/microservices-design-patterns#CircuitBreaker)

ğŸŒŸä¾‹å¦‚ï¼Œå‡è®¾ä¸€ä¸ªæ¶ˆè´¹è€…å‘é€ä¸€ä¸ªä»å¤šä¸ªæœåŠ¡è·å–æ•°æ®çš„è¯·æ±‚ã€‚ä½†æ˜¯ï¼Œç”±äºæŠ€æœ¯é—®é¢˜ï¼Œå…¶ä¸­ä¸€é¡¹æœåŠ¡ä¸å¯ç”¨ã€‚ç°åœ¨ä½ å°†é¢ä¸´ä¸¤ä¸ªä¸»è¦é—®é¢˜ã€‚

*   é¦–å…ˆï¼Œå› ä¸ºæ¶ˆè´¹è€…ä¸ä¼šæ„è¯†åˆ°æŸä¸ªç‰¹å®šçš„æœåŠ¡ä¸å¯ç”¨(å¤±è´¥)ï¼Œæ‰€ä»¥è¯·æ±‚ä¼šè¢«æŒç»­å‘é€åˆ°è¯¥æœåŠ¡ã€‚
*   ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œç½‘ç»œèµ„æºå°†è¢«è€—å°½ï¼Œæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒå¾ˆä½ã€‚

> æˆ‘ä»¬å°†é€šè¿‡ç”¨ä¾‹æ¥è®¨è®ºè¿™äº›é—®é¢˜ã€‚ç»§ç»­è¯»ä¸‹å»ğŸ˜ƒ

ğŸŒŸæ‚¨å¯ä»¥åˆ©ç”¨æ–­è·¯å™¨è®¾è®¡æ¨¡å¼æ¥é¿å…è¿™æ ·çš„é—®é¢˜ã€‚æ¶ˆè´¹è€…å°†ä½¿ç”¨è¿™ç§æ¨¡å¼é€šè¿‡ä»£ç†è°ƒç”¨è¿œç¨‹æœåŠ¡ã€‚è¯¥ä»£ç†å°†å……å½“ç”µè·¯å±éšœã€‚

ğŸŒŸå½“æ•…éšœæ•°é‡è¾¾åˆ°æŸä¸ªé˜ˆå€¼æ—¶ï¼Œæ–­è·¯å™¨åœ¨è§„å®šçš„æŒç»­æ—¶é—´å†…è·³é—¸ã€‚

ğŸŒŸåœ¨æ­¤è¶…æ—¶æœŸé—´ï¼Œå¯¹è„±æœºæœåŠ¡å™¨çš„ä»»ä½•è¯·æ±‚éƒ½å°†å¤±è´¥ã€‚å½“è¯¥æ—¶é—´æ®µç»“æŸæ—¶ï¼Œæ–­è·¯å™¨å°†å…è®¸æœ‰é™æ•°é‡çš„æµ‹è¯•é€šè¿‡ï¼Œå¦‚æœè¿™äº›è¯·æ±‚æˆåŠŸï¼Œæ–­è·¯å™¨å°†è¿”å›æ­£å¸¸æ“ä½œã€‚å¦‚æœå‡ºç°æ•…éšœï¼Œè¶…æ—¶å‘¨æœŸå°†é‡æ–°å¼€å§‹ã€‚

> ğŸ¤”ä»ç„¶å¯¹æ–­è·¯å™¨æ¨¡å¼çš„å·¥ä½œåŸç†æ„Ÿåˆ°å›°æƒ‘ã€‚æˆ‘ç›¸ä¿¡åœ¨è¿™ç¯‡æ–‡ç« ç»“æŸæ—¶ä½ ä¼šæœ‰æ›´å¥½çš„æƒ³æ³•ã€‚

ä½†åœ¨æˆ‘ä»¬æ·±å…¥äº†è§£æ›´å¤šç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘æƒ³è®©ä½ ç†Ÿæ‚‰ä¸¤ä»¶äº‹ï¼Œ

1.  æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨çš„ä¸»è¦ç”¨ä¾‹ã€‚
2.  å¦‚æœæˆ‘ä»¬çš„æœåŠ¡å¤±è´¥ï¼Œå¯ç”¨æ€§ä¼šäº§ç”Ÿæ€æ ·çš„å½±å“ã€‚

# æ–­è·¯å™¨çš„ä¸»è¦ä½¿ç”¨æ¡ˆä¾‹

ğŸŒŸè¿™å°†æ˜¯æˆ‘ç”¨æ¥è§£é‡Šæ–­è·¯å™¨æ¨¡å¼çš„å‡ ä¸ªç”¨ä¾‹çš„ä¸»è¦ä¾‹å­ã€‚

ğŸŒŸå¦‚æœä½ è¯»è¿‡æˆ‘ä»¥å‰çš„å¾®åšå®¢ï¼Œä½ å¯èƒ½å¯¹å•†ä¸šé‡‘èçš„ä¾‹å­å¾ˆç†Ÿæ‚‰ã€‚

ğŸŒŸå¦‚æœä½ ä¸ç†Ÿæ‚‰æˆ‘ä»¥å‰çš„åšå®¢ï¼Œä¸è¦æ‹…å¿ƒã€‚å› ä¸ºä½ ä¸éœ€è¦çŸ¥é“æ•´ä¸ªåœºæ™¯ã€‚(ä½†æˆ‘å¸Œæœ›æ‚¨ç†Ÿæ‚‰èšåˆæ¨¡å¼)ã€‚

ğŸŒŸæ‚¨å·²ç»ä½¿ç”¨å¾®æœåŠ¡æ¶æ„å®ç°äº† Mercantile Finance çš„å‘˜å·¥ç®¡ç†ã€‚è¯¥ç³»ç»Ÿå…·æœ‰ä»¥ä¸‹æœåŠ¡ã€‚

*   ğŸ”©æœåŠ¡ 1:è·å–ä¸ªäººä¿¡æ¯ã€‚
*   ğŸ”©æœåŠ¡äºŒ:è·å–è¯·å‡ä¿¡æ¯ã€‚
*   ğŸ”©æœåŠ¡ä¸‰:è·å–å‘˜å·¥ç»©æ•ˆä¿¡æ¯ã€‚
*   ğŸ”©æœåŠ¡ 4:è·å–åˆ†é…ä¿¡æ¯ã€‚

![](img/d7281aec0bd99e0e1c55fd496bdbe812.png)

Figure 2

ğŸŒŸå½“æœ‰å¤šä¸ªæœåŠ¡æ—¶ï¼Œè¿™äº›æœåŠ¡è°ƒç”¨(ä½¿ç”¨èšåˆå™¨æ¨¡å¼)å¤šä¸ªåç«¯(æœåŠ¡)æ˜¯éå¸¸å¯èƒ½çš„ã€‚

ğŸŒŸæ‰€ä»¥ä½ æƒ³çŸ¥é“çš„ä¸»è¦ç”¨ä¾‹åœºæ™¯ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸ºä»€ä¹ˆå¯ç”¨æ€§å¯¹äºå¾®æœåŠ¡éå¸¸é‡è¦ã€‚

# ä¸ºä»€ä¹ˆå¯ç”¨æ€§åœ¨å¾®æœåŠ¡æ¶æ„ä¸­è‡³å…³é‡è¦

![](img/8c0d310a34910a9a90f2c67909a98960.png)

Figure 3: [Levels of availability](https://web.archive.org/web/20180728204314/https:/www.digitaldaniels.com/availability-service-level-9s-equate/)

ğŸŒŸæ‰€ä»¥å‡è®¾ï¼Œå½“ä½ çš„å…¬å¸å®ç°å‘˜å·¥ç®¡ç†ç³»ç»Ÿçš„è¿™äº›æœåŠ¡æ—¶ï¼Œä»–ä»¬æ‰¿è¯ºå•†ä¸šé‡‘èçš„æ­£å¸¸è¿è¡Œæ—¶é—´ä¸º`99.999%`(äº”ä¸ªä¹)ã€‚

ğŸ’»â“`99.999%`çš„æœ€å¤§åœæœºæ—¶é—´æ˜¯å¦‚ä½•è®¡ç®—çš„

æ¯å¤©`24` `hours`å’Œæ¯å¹´`365``days`=æ¯å¹´ `8760` `hours`ã€‚

`8760` x `60` = `525600` `minutes`æ¯å¹´ã€‚

`99.999%`æ­£å¸¸è¿è¡Œæ—¶é—´æ„å‘³ç€å¯æ¥å—çš„æ•…éšœå˜åŒ–= `0.001%`

`525600` X `0.001%` = `5.256 minutes`

ğŸŒŸä¸€é¡¹æœåŠ¡æ¯å¹´å¯èƒ½ä¼šåœæœºã€‚å¯¹äºå•èŠ¯ç‰‡ç³»ç»Ÿæ¥è¯´ï¼Œæ¯å¹´ 5.25 åˆ†é’Ÿçš„åœæœºæ—¶é—´å®Œå…¨æ²¡é—®é¢˜ã€‚

ğŸŒŸä½†æ˜¯ä¸æ•´ä½“æ¶æ„ä¸åŒï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¯èƒ½æœ‰è®¸å¤šæœåŠ¡ã€‚å‡è®¾æœ‰ 100 ä¸ªæœåŠ¡ã€‚è¿™å¯èƒ½å¯¼è‡´æ¯å¹´ **8.78 å°æ—¶**çš„åœæœºæ—¶é—´ã€‚è¿™æ˜¯ä¸€ä¸ªå…³é”®çš„æ•°å­—ğŸ˜¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ³¨æ„ä¿æŠ¤æˆ‘ä»¬çš„æœåŠ¡ã€‚

é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸­æ–­æœåŠ¡çš„åŸå› æ˜¯ä»€ä¹ˆã€‚

# ä¸­æ–­æœåŠ¡çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ

## ç”¨ä¾‹ 1

ğŸŒŸå‡è®¾æ‚¨æœ‰ 5 ä¸ªä¸åŒçš„æœåŠ¡ï¼Œå¹¶ä¸”æ‚¨æœ‰ä¸€ä¸ª web æœåŠ¡å™¨æ¥è°ƒç”¨è¿™äº›æœåŠ¡ã€‚ç°åœ¨ï¼Œå½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåˆ†é…ä¸€ä¸ªçº¿ç¨‹æ¥è°ƒç”¨æœåŠ¡ã€‚

ğŸŒŸç°åœ¨å‘ç”Ÿçš„æ˜¯è¿™ä¸ªæœåŠ¡æœ‰ä¸€ç‚¹å»¶è¿Ÿ(ç”±äºä¸€ä¸ªæ•…éšœ),è¿™ä¸ªçº¿ç¨‹æ­£åœ¨ç­‰å¾…ã€‚ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å°±å¯ä»¥äº†ã€‚

![](img/e4acd361c71e209ec08ae8198e99f51f.png)

Figure 4

ğŸŒŸä½†æ˜¯å¦‚æœè¿™ä¸ªæœåŠ¡æ˜¯ä¸€ä¸ªé«˜éœ€æ±‚æœåŠ¡(è·å¾—è¶Šæ¥è¶Šå¤šçš„è¯·æ±‚)ï¼Œæ›´å¤šçš„çº¿ç¨‹å°†è¢«åˆ†é…ç»™è¿™ä¸ªæœåŠ¡ï¼Œå¹¶ä¸”æ‰€æœ‰è¢«åˆ†é…æ¥è°ƒç”¨è¯¥æœåŠ¡çš„çº¿ç¨‹å°†ä¸å¾—ä¸ç­‰å¾…ã€‚

![](img/0ecca72306f4b2c52fc9821337005a44.png)

Figure 5

ğŸŒŸå› æ­¤ï¼Œå¦‚æœæ‚¨ç°åœ¨æœ‰ 100 ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­ 98 ä¸ªå¯èƒ½è¢«å ç”¨ï¼Œå¦‚æœå¦å¤–ä¸¤ä¸ªçº¿ç¨‹è¢«å¦å¤–ä¸¤ä¸ªæœåŠ¡å ç”¨ï¼Œæ‰€æœ‰çº¿ç¨‹ç°åœ¨éƒ½è¢«é˜»å¡ã€‚

![](img/b443087071496564d6102ab0e7cc9804.png)

Figure 6

ğŸŒŸç°åœ¨å‘ç”Ÿçš„æ˜¯åˆ°è¾¾æ‚¨çš„æœåŠ¡çš„å‰©ä½™è¯·æ±‚å°†è¢«æ’é˜Ÿ(é˜»å¡)ã€‚å› æ­¤ï¼Œä¸æ­¤åŒæ—¶ï¼Œ50 å¤šä¸ªè¯·æ±‚ä¹Ÿæ¥äº†ï¼Œæ‰€æœ‰è¿™äº›è¯·æ±‚éƒ½åœ¨æ’é˜Ÿï¼Œå› ä¸ºçº¿ç¨‹è¢«è€—å°½äº†ã€‚

![](img/ed132b4dd53c177aef1db95b4c5573c5.png)

Figure 7

ğŸŒŸå‡ ç§’é’Ÿåï¼Œæ•…éšœæœåŠ¡æ¢å¤æ­£å¸¸ã€‚ç°åœ¨ï¼Œweb æœåŠ¡å™¨å°è¯•å¤„ç†é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰è¯·æ±‚ã€‚å› æ­¤ï¼Œweb æœåŠ¡å™¨(æˆ–ä»£ç†)å¯èƒ½æ°¸è¿œæ— æ³•æ¢å¤ã€‚åŸå› æ˜¯å½“ web æœåŠ¡å™¨å¤„ç†é˜Ÿåˆ—è¯·æ±‚æ—¶ï¼Œè¶Šæ¥è¶Šå¤šçš„è¯·æ±‚ä¸æ–­åˆ°è¾¾ã€‚æ‰€ä»¥ï¼Œè¿™ç§ç±»å‹çš„åœºæ™¯ä¼šæ‰¼æ€ä½ çš„æœåŠ¡ã€‚

ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€ä¸ªåœºæ™¯

## ç”¨ä¾‹ 2

![](img/b545ba5d612562133b863bca52de6576.png)

Figure 8

ğŸŒŸåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œ**æœåŠ¡ A** è°ƒç”¨ **B** ï¼Œ**æœåŠ¡ B** è°ƒç”¨ **C** ï¼Œ**æœåŠ¡ C** è°ƒç”¨ **D** ã€‚åŒæ—¶è¿˜æœ‰å…¶ä»–æœåŠ¡ **W** ã€ **X** ã€ **Y** å’Œ **Z** ã€‚ä½†æ˜¯å¦‚æœæœåŠ¡ä¸èƒ½åŠæ—¶å“åº”ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼ŸğŸ’¥

ğŸŒŸå‡è®¾æœåŠ¡ D æ²¡æœ‰åŠæ—¶å›å¤ã€‚

![](img/c631da4b5c515065597da2f55052ee73.png)

Figure 9 : Service D failed

ğŸŒŸç°åœ¨æœåŠ¡ C å¿…é¡»ç­‰å¾…ã€‚

![](img/3cde9a57c7fce3462989201244eb2de5.png)

Figure 10: Service C is waiting

ğŸŒŸç”±äºæœåŠ¡ C æ­£åœ¨ç­‰å¾…ï¼ŒæœåŠ¡ B ä¹Ÿå¿…é¡»ç­‰å¾…ã€‚å› æ­¤ï¼Œç›¸åº”åœ°ï¼ŒæœåŠ¡ A å¿…é¡»ç­‰å¾…ã€‚è¿™ä¼šå¯¼è‡´ [**çº§è”å¤±æ•ˆ**](https://en.wikipedia.org/wiki/Cascading_failure) ã€‚

![](img/907081e7efaa03a1524f95c9165d2f8b.png)

Figure 11 : Service A,B and C waiting for D

![](img/719abd8bc882f4dcf9e8c8fee264b52f.png)

Figure 12 : Casacade faliure

ğŸŒŸæ— è®ºä½ çš„æœåŠ¡å¦‚ä½•å¤±è´¥ï¼Œä½†å½“æœåŠ¡å¤±è´¥æ—¶ï¼Œå®ƒå°†ç¦»çº¿ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆæ¥ä¿æŒè¿™äº›æœåŠ¡çš„æ­£å¸¸è¿è¡Œå‘¢ï¼ŸğŸ¤”

# æ–­è·¯å™¨æ¨¡å¼çš„è§£å†³æ–¹æ¡ˆ

![](img/d73006845a5f0e64efbe280c87bf5a2f.png)

Figure 13: [Circuit breaker pattern](https://martinfowler.com/bliki/CircuitBreaker.html)

ğŸŒŸå› æ­¤ï¼Œæ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„(åœ¨â€œæ–­è·¯å™¨çš„ä¸»è¦ç”¨ä¾‹â€ä¸­)ï¼Œç³»ç»Ÿä¸­æœ‰ 04 ä¸ªæœåŠ¡å’Œä¸€ä¸ªä»£ç†(ä¸€ä¸ªè°ƒç”¨è¿™äº›æœåŠ¡çš„èšåˆå™¨æ¨¡å¼)ã€‚

ğŸŒŸåœ¨ç»å†äº†ä½¿ç”¨åŸå›  1 å’Œ 2 ä¹‹åï¼Œæˆ‘ç›¸ä¿¡æ‚¨ç°åœ¨å·²ç»çŸ¥é“ï¼Œå½“ä¸ªåˆ«æœåŠ¡å¤±è´¥æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿç³»ç»Ÿæ•…éšœ(**ä¾›åº”å•†å˜å¾—ä¸å“åº”** )â€”å›¾ 13ã€‚

ğŸŒŸé‚£ä¹ˆå®ƒå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿè€—å°½å…³é”®èµ„æº(ä¾‹å¦‚:è¿˜è®°å¾—ç”¨ä¾‹ 1 ä¸­çº¿ç¨‹æ˜¯å¦‚ä½•è¢«å ç”¨çš„å—)ã€‚

ğŸŒŸæ–­è·¯å™¨çš„åŸºæœ¬æ¦‚å¿µæ˜¯å°†å—ä¿æŠ¤çš„å‡½æ•°è°ƒç”¨åŒ…è£…åœ¨æ–­è·¯å™¨å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡ç›‘è§†æ•…éšœã€‚å½“å¤±è´¥æ¬¡æ•°è¾¾åˆ°æŸä¸ªé˜ˆå€¼æ—¶ï¼Œæ–­è·¯å™¨è·³é—¸ï¼Œå¹¶ä¸”å¯¹æ–­è·¯å™¨çš„æ‰€æœ‰è¯·æ±‚è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚

![](img/f1d3ec9e82740849aaae6b95d0f384d7.png)

Figure 14: [States of Circuit Breaker](https://martinfowler.com/bliki/CircuitBreaker.html)

æ–­è·¯å™¨æ¨¡å¼æœ‰ 3 ç§çŠ¶æ€ã€‚

1.  **æ‰“å¼€ã€‚**
2.  **å…³é—­ã€‚**
3.  **åŠå¼€ã€‚**

ğŸŒŸå½“æ–­è·¯å™¨å¤„äºâ€œ**é—­åˆ**çŠ¶æ€æ—¶ï¼Œæ–­è·¯å™¨æ­£å¸¸å·¥ä½œ(é€šè¿‡æœåŠ¡ä¼ é€’è¯·æ±‚)ã€‚ä½†æ˜¯å½“æ•…éšœè¶…è¿‡é˜ˆå€¼æé™æ—¶ï¼Œæ–­è·¯å™¨è·³é—¸ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ­¤â€œ**æ‰“å¼€**ç”µè·¯(çŠ¶æ€åˆ‡æ¢åˆ°â€œæ‰“å¼€â€)ã€‚

ğŸŒŸå½“ç”µè·¯â€œ**æ‰“å¼€**â€æ—¶ï¼Œä¼ å…¥çš„è¯·æ±‚å°†è¿”å›é”™è¯¯ï¼Œè€Œä¸ä¼šå°è¯•æ‰§è¡ŒçœŸæ­£çš„æ“ä½œ

ğŸŒŸä¸€æ®µæ—¶é—´åï¼Œæ–­è·¯å™¨è¿›å…¥â€œ**åŠå¼€**çŠ¶æ€ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œæ–­è·¯å™¨å°†å…è®¸æœ‰é™æ•°é‡çš„æµ‹è¯•è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œæ–­è·¯å™¨å¤ä½å¹¶è¿”å›åˆ°â€œ**é—­åˆ**çŠ¶æ€ï¼Œé€šä¿¡å°†ç…§å¸¸é€šè¿‡ã€‚å¦‚æœè¿™ä¸ªè¯·æ±‚å¤±è´¥ï¼Œæ–­è·¯å™¨è¿”å›åˆ°æ‰“å¼€çŠ¶æ€ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¶…æ—¶ã€‚

> ä¾‹å¦‚:æœåŠ¡ A åº”è¯¥åœ¨ 200 æ¯«ç§’å†…å“åº”ã€‚
> 
> 0ms -100ms:é¢„æœŸå»¶è¿Ÿé—´éš”ã€‚
> 100ms -200ms:æœ‰é£é™©ã€‚
> 
> å¦‚æœå“åº”æ—¶é—´è¶…è¿‡ 200 æ¯«ç§’ï¼Œåˆ™åˆ‡æ–­æœåŠ¡ã€‚
> 
> å¦‚æœæ‚¨åˆ›å»ºäº†ä¸€ä¸ªç›‘æ§ä»ªè¡¨æ¿ï¼Œæ‚¨å¯ä»¥ç›‘æ§è¯·æ±‚åŠå…¶å“åº”æ—¶é—´ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä½ å¯ä»¥å†³å®šé˜ˆå€¼æ°´å¹³ã€‚

ğŸŒŸå› æ­¤ï¼Œæ–­è·¯å™¨æ¨¡å¼çš„å·¥ä½œåŸç†æ˜¯ï¼Œå¦‚æœè¯·æ±‚çš„æ•°é‡(ä¾‹å¦‚ï¼Œ75%çš„è¯·æ±‚)è¾¾åˆ°ä¸Šé™(150-200 æ¯«ç§’)ï¼Œè¿™æ„å‘³ç€æœåŠ¡æ­£åœ¨ç¼“æ…¢å¤±è´¥ã€‚

![](img/195c16df489cc96a11736a783ee84c35.png)

Figure 15

![](img/8734f8c0021893028d734e64fd780e40.png)

Figure 16

ğŸŒŸå¦‚æœå‘ç”Ÿæ¬¡æ•°è¶…è¿‡ 200 æ¯«ç§’(æœåŠ¡çš„æœ€å¤§é˜ˆå€¼)ï¼Œä»£ç†å°†è¯†åˆ«å‡ºè¯¥æœåŠ¡ä¸å†å“åº”ã€‚

ğŸŒŸå®ƒæ¥ä¸‹æ¥åšçš„æ˜¯ï¼Œè®¿é—®æœåŠ¡ A çš„è¯·æ±‚å°†å›åˆ‡ã€‚å®ƒä¸­æ–­äº†ä»£ç†å’ŒæœåŠ¡ a ä¹‹é—´çš„è¿æ¥ã€‚

ğŸŒŸç°åœ¨ä½ çš„ä»£ç†ä¸ä¼šå»æœåŠ¡ aï¼Œè¿™æ„å‘³ç€å®ƒä¸ä¼šç­‰å¾…ã€‚

## **ä½†æ˜¯ä¸ºä»€ä¹ˆä¸ç›´æ¥å»æœåŠ¡çœ‹çœ‹ã€‚å¦‚æœå¤±è´¥ï¼Œè¯·æ±‚å¯ä»¥è¿”å›ã€‚ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰ä»‹äºä¸¤è€…ä¹‹é—´çš„ä¸œè¥¿ï¼ŸğŸ¤¥**

ğŸŒŸå‡è®¾ä½ æœ‰ 30 ç§’çš„è¶…æ—¶æ—¶é—´ã€‚å¦‚æœæ¯ä¸ªè¯·æ±‚éƒ½è¯•å›¾åˆ°è¾¾æœåŠ¡ Aï¼Œä¸è€ƒè™‘å®ƒå¤±è´¥ï¼Œæ‰€æœ‰æ¥è‡ªæ¶ˆè´¹è€…çš„è¯·æ±‚å°†ç­‰å¾… 30 ç§’ã€‚è¿™äº›è¯·æ±‚å°†åœ¨ 30 ç§’åè¶…æ—¶ã€‚

ğŸŒŸåœ¨è¿™ 30 ç§’å†…ï¼Œå‰©ä½™çš„ä½¿ç”¨ A çš„è¯·æ±‚å°†å°è¯•åˆ°è¾¾æœåŠ¡ Aï¼Œè¿™äº›è¯·æ±‚ä¹Ÿåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚

ğŸŒŸå› æ­¤ï¼Œæ–­è·¯å™¨æ¨¡å¼æ‰€åšçš„æ˜¯ï¼Œå¦‚æœæœåŠ¡å¤±è´¥æ¬¡æ•°è¶…è¿‡ç»™å®šé˜ˆå€¼ï¼Œå®ƒå°†ä¸ä¼šå°è¯•åˆ°è¾¾æœåŠ¡ Aï¼Œè€Œæ˜¯å›åˆ‡åˆ°æ¶ˆè´¹è€…ï¼Œå‘ŠçŸ¥æœåŠ¡ A ä¸å¯ç”¨ã€‚

## **é‚£ä¹ˆå¦‚ä½•è¿æ¥å›å»å‘¢ï¼ŸğŸ¤”**

ğŸŒŸåœ¨åå°ï¼Œå®ƒåŠæ—¶å‘æœåŠ¡ A å‘é€ ping è¯·æ±‚(å›¾ 16)æˆ–é»˜è®¤è¯·æ±‚ã€‚å› æ­¤ï¼Œå½“å“åº”æ—¶é—´å›åˆ°æ­£å¸¸é˜ˆå€¼æ—¶ï¼Œå®ƒå°†å†æ¬¡æ‰“å¼€è¯·æ±‚ã€‚

ğŸŒŸå› æ­¤ï¼Œåˆ°è¾¾æ¶ˆè´¹æœåŠ¡ A çš„ä¸‹ä¸€ä¸ªè¯·æ±‚å°†ç›´æ¥åˆ°è¾¾æœåŠ¡ A

> åœ¨æ•…éšœæœŸé—´ï¼Œæ‰€æœ‰ä½¿ç”¨æœåŠ¡ A çš„è¯·æ±‚éƒ½ä¼šè¢«å‘é€å›ä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚æ‰€ä»¥ç°åœ¨æ²¡æœ‰æ’é˜Ÿã€‚å½“æœåŠ¡æ¢å¤æ—¶ï¼Œå®ƒå°†ä¸ºæ–°çš„æµé‡å¼€æ”¾ã€‚

## ä½†æ˜¯æˆ‘ä»¬ä¸æ˜¯æ²¡æœ‰å›åº”ä¸€äº›æ¶ˆè´¹è€…çš„è¦æ±‚å—ï¼ŸğŸ™„

ğŸŒŸæ˜¯çš„ï¼Œä¸€äº›è¯·æ±‚è¢«(æ²¡æœ‰æ’é˜Ÿ)å‘å›ç»™æ¶ˆè´¹è€…ï¼Œå¹¶å¸¦æœ‰ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œä½†æ˜¯ä»–ä»¬æ²¡æœ‰å¾—åˆ°æœåŠ¡ a çš„å“åº”ã€‚

ğŸŒŸä½†æ˜¯ï¼Œå¦‚æœè¿™äº›è¯·æ±‚è¯•å›¾åˆ°è¾¾æœåŠ¡ A(å¤±è´¥äº†),å¹¶ä¸”è¿™äº›è¯·æ±‚è¢«æ’é˜Ÿï¼Œç»“æœä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

ğŸŒŸç”±äºæœåŠ¡åé¢åˆ›å»ºçš„å·¨å¤§é˜Ÿåˆ—ï¼Œæ•´ä¸ªç³»ç»Ÿå¯èƒ½å·²ç»å¤±è´¥ã€‚å› ä¸ºå³ä½¿æœåŠ¡æ¢å¤äº†ï¼Œè¿™äº›é˜Ÿåˆ—ä¹Ÿä¼šæ¶ˆè€—æœåŠ¡ Aï¼Œæœ€ç»ˆæœåŠ¡ A ä¼šå¤±è´¥ã€‚

ğŸŒŸä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•æœåŠ¡ï¼ŒA å¯èƒ½ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…å¤±è´¥ï¼ŒæŸäº›è¯·æ±‚å¯èƒ½æ— æ³•ä»æœåŠ¡ A è·å¾—å“åº”ï¼Œå¹¶å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ä½†æ˜¯ä¸€æ—¦æœåŠ¡ A æ¢å¤åœ¨çº¿ï¼Œä¸‹ä¸€ä¸ªåˆ°æ¥çš„æµé‡å°†è¢«æœåŠ¡ã€‚æ‰€ä»¥å¡è¨å¡å¾·çš„å¤±è´¥ä¸ä¼šå‘ç”Ÿã€‚

ğŸŒŸè¿™å°±æ˜¯æ–­è·¯å™¨æ¨¡å¼èƒŒåçš„åŸç†ã€‚

> ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œé•¿æ—¶é—´ç­‰å¾…å“åº”å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ä¸å…¶è®©æ¶ˆè´¹è€…ç­‰å¾…æ›´é•¿çš„æ—¶é—´ï¼Œä¸å¦‚å¿«é€Ÿåšå‡ºååº”ã€‚ä¸ç®¡æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼›é‡è¦çš„æ˜¯ç”¨æˆ·ä¸ä¼šä¸€ç›´ç­‰å¾…ã€‚

ğŸŒŸå¥½å§ï¼Œæˆ‘å¸Œæœ›ä½ ç°åœ¨çŸ¥é“æ–­è·¯å™¨æ¨¡å¼å’Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¥è°ˆè°ˆä»£ç†è®¾è®¡æ¨¡å¼ã€‚è¯·åœ¨ä¸‹é¢è¯„è®ºæ‚¨çš„æƒ³æ³•å’Œåé¦ˆã€‚ğŸ˜ƒã€‚è°¢è°¢ä½ ã€‚

# å‚è€ƒ

[](https://www.amazon.com/Release-Design-Deploy-Production-Ready-Software/dp/1680502395) [## é‡Šæ”¾å®ƒï¼:è®¾è®¡å’Œéƒ¨ç½²ç”Ÿäº§å°±ç»ªè½¯ä»¶

### é‡Šæ”¾å®ƒï¼:åœ¨ Amazon.com ä¸Šè®¾è®¡å’Œéƒ¨ç½²ç”Ÿäº§å°±ç»ªè½¯ä»¶ã€‚*å…è´¹*é€è´§åˆ°â€¦

www.amazon.com](https://www.amazon.com/Release-Design-Deploy-Production-Ready-Software/dp/1680502395) [](https://martinfowler.com/bliki/CircuitBreaker.html) [## æ–­è·¯å™¨

### è½¯ä»¶ç³»ç»Ÿå¯¹è¿è¡Œåœ¨ä¸åŒè¿›ç¨‹ä¸­çš„è½¯ä»¶è¿›è¡Œè¿œç¨‹è°ƒç”¨æ˜¯å¾ˆå¸¸è§çš„ï¼Œå¯èƒ½æ˜¯åœ¨ä¸åŒçš„â€¦

martinfowler.com](https://martinfowler.com/bliki/CircuitBreaker.html) [](https://www.edureka.co/blog/microservices-design-patterns#CircuitBreaker) [## å¾®æœåŠ¡è®¾è®¡æ¨¡å¼|å¾®æœåŠ¡æ¨¡å¼| Edureka

### åœ¨å½“ä»Šçš„å¸‚åœºä¸Šï¼Œå¾®æœåŠ¡å·²ç»æˆä¸ºæ„å»ºåº”ç”¨ç¨‹åºçš„é¦–é€‰è§£å†³æ–¹æ¡ˆã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œå®ƒä»¬å¯ä»¥è§£å†³â€¦

www.edureka.co](https://www.edureka.co/blog/microservices-design-patterns#CircuitBreaker) [](https://techblog.constantcontact.com/software-development/circuit-breakers-and-microservices/) [## æ–­è·¯å™¨å’Œå¾®æœåŠ¡æ¶æ„|æŒç»­æ¥è§¦æŠ€æœ¯åšå®¢

### åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œå¾®æœåŠ¡æ¶æ„æœ‰è®¸å¤šä¼˜åŠ¿ã€‚è¿™äº›åŒ…æ‹¬ä½è€¦åˆâ€¦

techblog.constantcontact.com](https://techblog.constantcontact.com/software-development/circuit-breakers-and-microservices/)