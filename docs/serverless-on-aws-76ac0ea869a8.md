# AWS ä¸Šçš„æ— æœåŠ¡å™¨

> åŸæ–‡ï¼š<https://medium.com/geekculture/serverless-on-aws-76ac0ea869a8?source=collection_archive---------28----------------------->

![](img/6f9a5879c5655c4784548b77cd2c49e4.png)

è¿‘å¹´æ¥ï¼Œæ— æœåŠ¡å™¨è®¡ç®—æ¨¡å¼å·²ç»æˆä¸ºå¼€å‘ç°ä»£åº”ç”¨ç¨‹åºã€å®ç”¨ç¨‹åºå’Œåç«¯è§£å†³æ–¹æ¡ˆçš„ä¸€ç§ç ´åæ€§æ¶æ„æ–¹æ³•ã€‚å®ƒæœ‰åŠ©äºå¼€å‘äººå‘˜ä¸“æ³¨äºä»£ç ï¼Œè€Œä¸æ˜¯èŠ±è´¹æ—¶é—´åœ¨åç«¯åŸºç¡€è®¾æ–½çš„é…ç½®ã€ç®¡ç†æˆ–æ‰©å±•ä¸Šã€‚

# ä»€ä¹ˆæ˜¯æ— æœåŠ¡å™¨

æ— æœåŠ¡å™¨å…è®¸æ‚¨æ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€è€ƒè™‘æœåŠ¡å™¨ã€‚åº”ç”¨æœåŠ¡å™¨çš„ä¾›åº”ã€ç®¡ç†å’Œæ‰©å±•éƒ½ç”±æ— æœåŠ¡å™¨äº‘æä¾›å•†åŠ¨æ€ç®¡ç†ã€‚

æœ‰ä¸¤ç§ç±»å‹çš„æ— æœåŠ¡å™¨è®¡ç®—æ¨¡å‹ã€‚ç¬¬ä¸€ç±»æ˜¯æŒ‡åˆ©ç”¨äº‘æœåŠ¡æ¥ç®¡ç†æœåŠ¡å™¨ç«¯é€»è¾‘çš„ web å’Œç§»åŠ¨åº”ç”¨ç¨‹åºã€‚å®ƒè¢«ç§°ä¸ºåç«¯å³æœåŠ¡(BaaS)ã€‚

ç¬¬äºŒç§ç±»å‹æ˜¯åŠŸèƒ½å³æœåŠ¡(FaaS)ã€‚åœ¨ FaaS å¤„ç†åç«¯åŸºç¡€è®¾æ–½ï¼Œå¦‚å®¹å™¨ã€è¿è¡Œæ—¶ç¯å¢ƒã€‚

# ä¸ºä»€ä¹ˆä½¿ç”¨æ— æœåŠ¡å™¨

*   æ— æœåŠ¡å™¨ç®¡ç†:å…é™¤äº†é…ç½®æˆ–ç»´æŠ¤ä»»ä½•æœåŠ¡å™¨çš„åé¡¾ä¹‹å¿§ã€‚
*   çµæ´»çš„ä¼¸ç¼©æ€§:æ‚¨çš„åº”ç”¨ç¨‹åºå°†è‡ªåŠ¨ä¼¸ç¼©ã€‚
*   ä¸ºä»·å€¼ä»˜è´¹:åªä¸ºæ‚¨ä½¿ç”¨çš„ä¸œè¥¿ä»˜è´¹ï¼Œè€Œä¸æ˜¯ä¸ºæœåŠ¡å™¨å•å…ƒä»˜è´¹ã€‚

# æ— æœåŠ¡å™¨ AWS æœåŠ¡æ¦‚è¿°

AWS æ‹¥æœ‰è¶…è¿‡ 165 é¡¹æœåŠ¡ï¼Œæ¶µç›–äº†åç«¯å¼€å‘çš„ä¸»è¦æ–¹é¢å’Œè¦æ±‚ï¼Œå¦‚è®¡ç®—èµ„æºã€å®‰å…¨æ€§ã€æœºå™¨å­¦ä¹ ã€æ¶ˆæ¯ä¼ é€’å’Œç›‘æ§æœåŠ¡ã€ç‰¹å®šéœ€æ±‚çš„æ•°æ®åº“ç­‰ç­‰ã€‚

![](img/b48ba913bb0defa430d48e3292158e04.png)

## è®¡ç®—

æœ‰äº† AWS Lambda ,æ‚¨å‡ ä¹å¯ä»¥è¿è¡Œä»»ä½•ç±»å‹çš„åº”ç”¨ç¨‹åºæˆ–åç«¯æœåŠ¡çš„ä»£ç â€”â€”æ‰€æœ‰è¿™äº›éƒ½æ— éœ€ç®¡ç†ã€‚æ‚¨å¯ä»¥å°†ä»£ç ä½œä¸ºå„ç§äº‹ä»¶è§¦å‘çš„å‡½æ•°æ¥æ‰§è¡Œï¼Œå¦‚ S3 å­˜å‚¨æ¡¶ä¸­çš„æ–‡ä»¶æ›´æ–°ã€AWS API ç½‘å…³ä¸Šçš„è¯·æ±‚ã€Dynamo DB è¡¨ä¸Šçš„æ“ä½œã€‚AWS Lambda æ˜¯ä¸€ä¸ª FaaS è§£å†³æ–¹æ¡ˆã€‚æ‚¨å¯ä»¥å°† Lambda ä¸ AWS çš„è®¸å¤šå…¶ä»–æœåŠ¡ç›¸ç»“åˆï¼Œå¹¶åœ¨è®¸å¤šåœºæ™¯ä¸­ä½¿ç”¨å®ƒï¼Œå¦‚ S3 çš„å®æ—¶æ–‡ä»¶å¤„ç†ã€å®æ—¶æµå¤„ç†ï¼Œä»¥å¤„ç†ç§»åŠ¨å’Œ web åº”ç”¨ç¨‹åºä¸­æ¥è‡ª API çš„ HTTP è¯·æ±‚

æœ‰äº† [AWS Fargate](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html) ä½ å¯ä»¥è¿è¡Œå®¹å™¨ï¼Œè€Œä¸å¿…ç®¡ç†æœåŠ¡å™¨å’Œé›†ç¾¤ã€‚Fargate é€šè¿‡è®¾è®¡åº”ç”¨ç¨‹åºéš”ç¦»æ¥æé«˜å®‰å…¨æ€§ã€‚æ‚¨ä¸éœ€è¦ä¼˜åŒ–æœåŠ¡å™¨åˆ©ç”¨ç‡ï¼Œç®¡ç†é›†ç¾¤è°ƒåº¦ã€‚Fargate å€ŸåŠ© Amazon cloud watch Container Insights æä¾›äº†ä¸°å¯Œçš„åº”ç”¨å¯è§‚å¯Ÿæ€§ã€‚è¦å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åº
ï¼Œè¯·æŒ‡å®š CPU å’Œå†…å­˜éœ€æ±‚ï¼Œå®šä¹‰ç½‘ç»œå’Œ IAM ç­–ç•¥ã€‚

## ä¿¡æ¯å‘é€

[äºšé©¬é€Šç®€å•é˜Ÿåˆ—æœåŠ¡(SQS)](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/welcome.html) æ˜¯ä¸€ç§å®Œå…¨æ‰˜ç®¡çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œä½¿æ‚¨èƒ½å¤Ÿåˆ†ç¦»å’Œæ‰©å±•å¾®æœåŠ¡ã€åˆ†å¸ƒå¼ç³»ç»Ÿå’Œæ— æœåŠ¡å™¨åº”ç”¨ã€‚ä½¿ç”¨ AWS æ§åˆ¶å°ã€å‘½ä»¤è¡Œç•Œé¢æˆ–æ‚¨é€‰æ‹©çš„ SDK ä»¥åŠä¸‰ä¸ªç®€å•çš„å‘½ä»¤ï¼Œåœ¨å‡ åˆ†é’Ÿå†…å¼€å§‹ä½¿ç”¨ SQSã€‚

SQS æä¾›ä¸¤ç§ç±»å‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ ‡å‡†é˜Ÿåˆ—æä¾›æœ€å¤§çš„ååé‡ã€æœ€å¤§åŠªåŠ›æ’åºå’Œè‡³å°‘ä¸€æ¬¡ä¼ é€’ï¼Œè€Œ FIFO é˜Ÿåˆ—è¢«è®¾è®¡æˆä¿è¯æ¶ˆæ¯æŒ‰ç…§å®ƒä»¬è¢«å‘é€çš„ç¡®åˆ‡é¡ºåºè¢«å¤„ç†ä¸€æ¬¡ã€‚

[äºšé©¬é€Šç®€å•é€šçŸ¥æœåŠ¡(SNS)](https://docs.aws.amazon.com/sns/latest/dg/welcome.html) æ˜¯ä¸€é¡¹å…¨é¢ç®¡ç†çš„æ¶ˆæ¯æœåŠ¡ï¼Œé€‚ç”¨äºåº”ç”¨å¯¹åº”ç”¨(A2A)å’Œåº”ç”¨å¯¹ä¸ªäºº(A2P)çš„é€šä¿¡ã€‚

åœ¨ç¤¾äº¤ç½‘ç»œçš„å¸®åŠ©ä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥å‘æ•°ç™¾ä¸‡ç”¨æˆ·å‘é€æ¶ˆæ¯ã€‚é™¤äº†æ¨é€é€šçŸ¥ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶ã€SMS æˆ– HTTP ç«¯ç‚¹å‘é€é€šçŸ¥ã€‚

## ç»¼åˆ

[äºšé©¬é€Š API ç½‘å…³](https://docs.aws.amazon.com/de_de/apigateway/latest/developerguide/welcome.html)æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„æœåŠ¡ï¼Œç”¨äºåˆ›å»ºã€å‘å¸ƒã€ç»´æŠ¤ã€ç›‘æ§å’Œä¿æŠ¤ä»»ä½•è§„æ¨¡çš„ APIã€‚æ‚¨å¯ä»¥åˆ›å»º RESTful APIs å’Œ WebSocket APIsï¼Œå€ŸåŠ© API Gateway å®ç°å®æ—¶é€šä¿¡åº”ç”¨ç¨‹åºã€‚

API Gateway æä¾›äº†å¼ºå¤§ã€çµæ´»çš„è®¤è¯æœºåˆ¶ï¼Œæ¯”å¦‚ AWS èº«ä»½å’Œè®¿é—®ç®¡ç†ç­–ç•¥ã€Lambda approver åŠŸèƒ½å’Œ Amazon Cognito ç”¨æˆ·æ± ã€‚

ä½¿ç”¨ [AWS Step Function](https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html) æ‚¨å¯ä»¥å°† AWS Lamdba å‡½æ•°å’Œå¤šä¸ª AWS æœåŠ¡çš„åºåˆ—ç¼–æ’åˆ°ä¸šåŠ¡å…³é”®å‹åº”ç”¨ç¨‹åºä¸­ã€‚é˜¶è·ƒå‡½æ•°åŸºäºçŠ¶æ€æœºã€‚ä»»åŠ¡æ˜¯å·¥ä½œæµä¸­çš„ä¸€ç§çŠ¶æ€ï¼Œä»£è¡¨åº”ç”¨ç¨‹åºçš„å•ä¸ªç»„ä»¶ã€‚
å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½ä¼šè¢«è‡ªåŠ¨è§¦å‘ã€è·Ÿè¸ªå’Œé‡è¯•ã€‚ä»¥ä¾¿åº”ç”¨ç¨‹åºé¡ºåˆ©æ‰§è¡Œã€‚

## å®‰å…¨æ€§

[Amazon Cognito](https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html) æ˜¯ä¸€æ¬¾å…¨é¢ç®¡ç†ä¸”ç»æµé«˜æ•ˆçš„æ³¨å†Œ/ç™»å½•æœåŠ¡ï¼Œä¸ºç”¨æˆ·æä¾› web å’Œç§»åŠ¨åº”ç”¨çš„è®¤è¯ã€æˆæƒå’Œç®¡ç†ã€‚Amazon Cognito çš„ä¸¤ä¸ªä¸»è¦ç»„ä»¶æ˜¯ç”¨æˆ·æ± å’Œèº«ä»½æ± ã€‚ç”¨æˆ·æ± æ˜¯ä¸ºåº”ç”¨ç¨‹åºç”¨æˆ·æä¾›æ³¨å†Œå’Œç™»å½•é€‰é¡¹çš„ç”¨æˆ·ç›®å½•ã€‚èº«ä»½æ± ä½¿æ‚¨èƒ½å¤Ÿæˆäºˆç”¨æˆ·å¯¹å…¶ä»– AWS æœåŠ¡çš„è®¿é—®æƒé™ã€‚æ‚¨å¯ä»¥å•ç‹¬æˆ–ä¸€èµ·ä½¿ç”¨èº«ä»½æ± å’Œç”¨æˆ·æ± ã€‚

æœ‰äº† Amazon Cognitoï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è°·æ­Œã€è„¸ä¹¦ç­‰ç¤¾äº¤èº«ä»½æä¾›å•†ä»¥åŠ SAML å’Œ OpenID Connet ç­‰ä¼ä¸šèº«ä»½æä¾›å•†ç™»å½•ã€‚

[AWS å¯†é’¥ç®¡ç†æœåŠ¡(KMS)](https://docs.aws.amazon.com/kms/latest/developerguide/overview.html) æ˜¯ä¸€é¡¹å®Œå…¨æ‰˜ç®¡çš„æœåŠ¡ï¼Œå…è®¸æ‚¨åˆ›å»ºå’Œç®¡ç†åŠ å¯†å¯†é’¥ï¼Œå¹¶æ§åˆ¶å®ƒä»¬åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå’Œ AWS æœåŠ¡ä¸­çš„ä½¿ç”¨ã€‚AWS KMS ä¸å¤§å¤šæ•°å…¶ä»– AWS æœåŠ¡é›†æˆï¼Œä¸ºæ‚¨çš„æ•°æ®åŠ å¯†ä»¥ç¡®ä¿å®‰å…¨ã€‚AWS KMS å®¢æˆ·ä¸»å¯†é’¥(CMKs)æ§åˆ¶å¯¹æ•°æ®åŠ å¯†çš„è®¿é—®ã€‚

é€šè¿‡ä½¿ç”¨ AWS KMSï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°æ§åˆ¶å¯¹åŠ å¯†æ•°æ®çš„è®¿é—®ã€‚æ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨å¯†é’¥ç®¡ç†å’ŒåŠ å¯†åŠŸèƒ½ã€‚

## ç›‘è§†

[Amazon CloudWatch](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/WhatIsCloudWatch.html) æ˜¯ä¸€æ¬¾ä¸ºå¼€å‘äººå‘˜ã€å¼€å‘äººå‘˜ã€ç«™ç‚¹å¯é æ€§å·¥ç¨‹å¸ˆ(SREs)å’Œ IT ç»ç†æ‰“é€ çš„ç›‘æ§å’Œå¯è§‚å¯Ÿæ€§æœåŠ¡ã€‚CloudWatch æä¾›äº†ä½ ä½¿ç”¨çš„æ¯ä¸€ä¸ª AWS æœåŠ¡çš„çŸ©é˜µã€‚æ‚¨å°†è·å¾—æ•°æ®å’Œå¯è¡Œçš„è§è§£æ¥ç›‘æ§æ‚¨çš„åº”ç”¨ï¼Œå“åº”ç³»ç»ŸèŒƒå›´çš„æ€§èƒ½å˜åŒ–ï¼Œä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡å’Œè¿è¡ŒçŠ¶å†µã€‚

[äºšé©¬é€Š QuickSight](https://docs.aws.amazon.com/quicksight/latest/user/welcome.html) æ˜¯ä¸€ä¸ªå¯æ‰©å±•ã€æ— æœåŠ¡å™¨ã€å¯åµŒå…¥ã€æœºå™¨å­¦ä¹ é©±åŠ¨çš„å•†ä¸šæ™ºèƒ½(BI)æœåŠ¡ï¼Œä¸“ä¸ºäº‘æ„å»ºã€‚QuickSight åœ¨å•ä¸ªä»ªè¡¨æ¿ä¸Šæä¾› AWS æ•°æ®ã€ç¬¬ä¸‰æ–¹æ•°æ®ã€å¤§æ•°æ®ã€ç”µå­è¡¨æ ¼æ•°æ®ã€SaaS æ•°æ®ã€B2B æ•°æ®ç­‰ã€‚æ‚¨å¯ä»¥å°†å…¶åµŒå…¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºã€é—¨æˆ·æˆ–ç½‘ç«™ä¸­ï¼Œä»¥æ¥æ”¶æ‚¨è‡ªå·±çš„è‡ªåŠ©æœåŠ¡åˆ†æã€‚

## æ•°æ®åº“ËŒèµ„æ–™åº“

Amazon DynamoDB æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„ NoSQL æ•°æ®åº“ï¼Œæ”¯æŒé”®å€¼å’Œæ–‡æ¡£ç»“æ„ã€‚DynamoDB è®©æ‚¨å¯ä»¥å‡è½»æ“ä½œå’Œæ‰©å±•çš„ç®¡ç†è´Ÿæ‹…ï¼Œå› æ­¤æ‚¨ä¸å¿…æ‹…å¿ƒç¡¬ä»¶ä¾›åº”ã€è®¾ç½®å’Œé…ç½®ã€å¤åˆ¶ã€è½¯ä»¶ä¿®è¡¥æˆ–é›†ç¾¤æ‰©å±•ã€‚å®ƒæœ‰ä¸ªä½æ•°æ¯«ç§’çš„å»¶è¿Ÿã€‚å¯¹äº AWS ä¸Šçš„è®¸å¤šæ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒDynamoDB æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å®ƒä¸å…¶ä»– AWS æœåŠ¡é½å¤´å¹¶è¿›ã€‚

[Amazon Aurora](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/CHAP_AuroraOverview.html) æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„å…³ç³»æ•°æ®åº“å¼•æ“ï¼Œå…¼å®¹ MySQL å’Œ PostgreSQLã€‚Amazon Aurora æ¯”æ ‡å‡† MySQL æ•°æ®åº“å¿« 5 å€ï¼Œæ¯”æ ‡å‡† PostgreSQL æ•°æ®åº“å¿« 3 å€ã€‚å®ƒè‡ªåŠ¨åŒ–å¹¶æ ‡å‡†åŒ–äº†æ•°æ®åº“é›†ç¾¤å’Œå¤åˆ¶ï¼Œè¿™æ˜¯æ•°æ®åº“ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„æ–¹é¢ã€‚Aurora è¿˜æä¾›æŒ‰éœ€è‡ªåŠ¨æ‰©å±•é…ç½®ï¼Œç§°ä¸ºäºšé©¬é€Š [Aurora æ— æœåŠ¡å™¨](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-serverless.html)ã€‚

## åˆ†æå­¦

[äºšé©¬é€Š Kinesis](https://docs.aws.amazon.com/streams/latest/dev/introduction.html) æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„æ•°æ®æµæœåŠ¡ï¼Œå¯ä»¥å®æ—¶æ”¶é›†å’Œå¤„ç†å¤§é‡çš„æ•°æ®è®°å½•ã€‚å€ŸåŠ© Amazon Kinesisï¼Œæ‚¨å¯ä»¥æ‘„å–å®æ—¶æ•°æ®ï¼Œå¦‚è§†é¢‘ã€éŸ³é¢‘ã€åº”ç”¨ç¨‹åºæ—¥å¿—ã€ç½‘ç«™ç‚¹å‡»æµå’Œç‰©è”ç½‘é¥æµ‹æ•°æ®ï¼Œç”¨äºæœºå™¨å­¦ä¹ ã€åˆ†æå’Œå…¶ä»–åº”ç”¨ã€‚

[äºšé©¬é€Šé›…å…¸å¨œ](https://docs.aws.amazon.com/athena/latest/ug/what-is.html)æ˜¯ä¸€ç§å€ŸåŠ©æ ‡å‡† SQL çš„äº¤äº’å¼æŸ¥è¯¢æœåŠ¡ï¼Œå®ƒç›´æ¥åœ¨äºšé©¬é€Šç®€å•å­˜å‚¨æœåŠ¡(äºšé©¬é€Š S3)ä¸­åˆ†ææ•°æ®ã€‚ä¸éœ€è¦è®¾ç½®æˆ–ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåªéœ€ä¸ºè¿è¡Œçš„æŸ¥è¯¢ä»˜è´¹ã€‚Athena å¯ä»¥å¹¶è¡Œè¿è¡ŒæŸ¥è¯¢ï¼Œå› æ­¤å³ä½¿æ•°æ®é›†å¾ˆå¤§ï¼Œä¹Ÿèƒ½å¾ˆå¿«å¾—åˆ°ç»“æœã€‚

## ç»“è®º

AWS æä¾›äº†è®¸å¤šæœåŠ¡ï¼Œå¯ç”¨äºæ„å»ºä»»ä½•å·¥ä½œè´Ÿè½½çš„åº”ç”¨ç¨‹åºã€‚å¼€å‘äººå‘˜å’Œè§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆæœ‰å¤§é‡çš„å·¥å…·æ¥æœ‰æ•ˆåœ°å®ç°åç«¯åº”ç”¨ç¨‹åºã€‚é«˜å¯ç”¨æ€§ã€è‡ªåŠ¨å¯ä¼¸ç¼©æ€§ã€å®‰å…¨æ€§å’ŒæŒä¹…æ€§ç­‰é‡è¦æ–¹é¢éƒ½æ˜¯å†…ç½®çš„ã€‚ä½¿ç”¨æŒ‰ä½¿ç”¨é‡ä»˜è´¹çš„å®šä»·æ¨¡å¼ï¼Œå‰æœŸæˆæœ¬ä¸ºé›¶ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•çº¦æŸã€‚è¿™ä½¿å¾—æ— æœåŠ¡å™¨æ¶æ„éå¸¸èŠ‚çœæˆæœ¬ã€‚

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ç­¾ç½²ğŸ™Œã€‚

## è¯·éšæ„è”ç³»ğŸ‘‡

> *GitHub:*[*https://github.com/Push9828*](https://github.com/Push9828) *æ¨ç‰¹:*[*https://twitter.com/PushkarThakur28*](https://twitter.com/PushkarThakur28)*é¢†è‹±:*[www.linkedin.com/in/pushkarthakur28](http://www.linkedin.com/in/pushkarthakur28)