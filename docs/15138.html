<html>
<head>
<title>How to dockerise your fastapi application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•å¯¹æ¥fastapiåº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/how-to-dockerise-your-fastapi-application-43fb4a106ae?source=collection_archive---------3-----------------------#2022-10-15">https://medium.com/geekculture/how-to-dockerise-your-fastapi-application-43fb4a106ae?source=collection_archive---------3-----------------------#2022-10-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="020e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">è®°å½•æ‚¨çš„fastapiåº”ç”¨ç¨‹åº</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/f30f15e390ea3cc6b69eba939200753c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*Gsvtd4B4dBoJDlfV.png"/></div></figure><h1 id="9259" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">ç®€ä»‹:</h1><p id="e9af" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯è®°å½•ä¸€ä¸ªæç®€çš„åº”ç”¨ç¨‹åºã€‚è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„fastapiç¨‹åºä¸ºä¾‹ï¼Œå¯¹å®ƒè¿›è¡Œdockeriseã€‚</p><h1 id="d9d4" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">ä¸€ä¸ªç®€å•çš„Fastapiåº”ç”¨ç¨‹åº:</h1><p id="f604" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„fastapiåº”ç”¨ç¨‹åºï¼Œåªæœ‰ä¸€ä¸ªç«¯ç‚¹<code class="du kt ku kv kw b">/hello</code>ã€‚å‡è®¾æ¨¡å—åä¸º<code class="du kt ku kv kw b">my_fastapi.py</code>ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kx ky l"/></div></figure><h1 id="e51f" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">è¿è¡Œfastapiåº”ç”¨ç¨‹åº:</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kx ky l"/></div></figure><h1 id="bd62" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">è¾“å‡º:</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="afbf" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬çš„fastapiåº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œå¹¶ç»™å‡ºäº†é¢„æœŸçš„è¾“å‡ºï¼Œè®©æˆ‘ä»¬æ¥å¯¹æ¥å®ƒã€‚</p><h1 id="57f7" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">ç å¤´å·¥äººâ€”â€”ä»€ä¹ˆï¼Ÿ</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es le"><img src="../Images/bc25514e4d65a651c2c54d3ec1fdcf27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*U2Jr6II8yJbVaWIP"/></div></figure><p id="6e2f" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">ä»æ–‡ä»¶ä¸Šçœ‹ï¼Œ</p><blockquote class="lf lg lh"><p id="511c" class="jx jy li jz b ka kz ij kc kd la im kf lj lb ki kj lk lc km kn ll ld kq kr ks hb bi translated"><em class="hi">å®¹å™¨æ˜¯ä¸€ä¸ªæ ‡å‡†çš„è½¯ä»¶å•å…ƒï¼Œå®ƒå°†ä»£ç åŠå…¶æ‰€æœ‰ä¾èµ–é¡¹æ‰“åŒ…ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿå¿«é€Ÿå¯é åœ°ä»ä¸€ä¸ªè®¡ç®—ç¯å¢ƒè¿è¡Œåˆ°å¦ä¸€ä¸ªè®¡ç®—ç¯å¢ƒã€‚Dockerå®¹å™¨æ˜ åƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€ç‹¬ç«‹çš„ã€å¯æ‰§è¡Œçš„è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡</em></p><p id="9be4" class="jx jy li jz b ka kz ij kc kd la im kf lj lb ki kj lk lc km kn ll ld kq kr ks hb bi translated"><a class="ae lm" href="https://www.docker.com/resources/what-container/" rel="noopener ugc nofollow" target="_blank"><em class="hi">https://www.docker.com/resources/what-container/</em></a></p></blockquote><p id="46d8" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">ä»æŠ€æœ¯ä¸Šè®²ï¼Œdockerå®¹å™¨æ˜¯åº”ç”¨ç¨‹åºä¹‹ä¸Šçš„ä¸€ä¸ªæŠ½è±¡å±‚ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯fastapiåº”ç”¨ç¨‹åºã€‚é‚£ä¹ˆï¼Œè¦åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹è¿è¡Œfastapiåº”ç”¨ç¨‹åºè€Œä¸å‡ºé”™ï¼Œæˆ‘ä»¬éœ€è¦åšäº›ä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬æŠŠå®ƒä»¬åˆ—å‡ºæ¥ã€‚</p><ol class=""><li id="8c2f" class="ln lo hi jz b ka kz kd la kg lp kk lq ko lr ks ls lt lu lv bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦<code class="du kt ku kv kw b">python</code>ã€‚</li><li id="01ff" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated"><code class="du kt ku kv kw b">fastapi</code>å’Œuvicornåº“åº”è¯¥å®‰è£…ã€‚</li></ol><p id="928b" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">è¿™å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚å‡è®¾æ‚¨å¸Œæœ›æ‚¨çš„fastapiåº”ç”¨ç¨‹åºè¢«å‘å¸ƒå¹¶è¿è¡Œåœ¨æ‚¨çš„å¯¹ç­‰æœºå™¨ä¸Šçš„å…¶ä»–åœ°æ–¹ï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„å°±æ˜¯ä¸€ä¸ªå®‰è£…äº†<code class="du kt ku kv kw b">fastapi</code>çš„<code class="du kt ku kv kw b">python</code>ç¯å¢ƒã€‚è¿™æ­£æ˜¯Dockerè§£å†³çš„é—®é¢˜ã€‚</p><p id="f958" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">æ‚¨ä¸å¿…å‘æ‚¨çš„åŒè¡Œæä¾›æ‚¨çš„ä¾èµ–åº“æˆ–READMEæ–‡æ¡£æ¥å¼€å§‹ä½¿ç”¨fastapiåº”ç”¨ç¨‹åºã€‚ä»–/å¥¹åªéœ€è¦ä¸€ä¸ªdockerç¯å¢ƒæ¥è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼Œå¹¶è®¿é—®ä½ çš„åº”ç”¨ç¨‹åºæ‰€åœ¨çš„å­˜å‚¨åº“ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<code class="du kt ku kv kw b">dockerhub</code>æ¥æ‰˜ç®¡fastapiåº”ç”¨ç¨‹åºã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°ç»„ç»‡ä¹Ÿä½¿ç”¨<code class="du kt ku kv kw b">JFrog artifactory</code>æ¥æ‰˜ç®¡ä»–ä»¬çš„å†…éƒ¨dockeræ˜ åƒã€‚</p><h1 id="00f6" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">Dockerhub:</h1><blockquote class="lf lg lh"><p id="6fdd" class="jx jy li jz b ka kz ij kc kd la im kf lj lb ki kj lk lc km kn ll ld kq kr ks hb bi translated"><em class="hi"> Docker Hubæ˜¯ç”±Dockeræä¾›çš„æ‰˜ç®¡å­˜å‚¨åº“æœåŠ¡ï¼Œç”¨äºä¸æ‚¨çš„å›¢é˜ŸæŸ¥æ‰¾å’Œå…±äº«å®¹å™¨æ˜ åƒ</em></p></blockquote><h1 id="f6ed" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">Requirements.txt:</h1><p id="7a04" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">ä¸€ä¸ª<code class="du kt ku kv kw b">requirements.txt</code>æ–‡ä»¶åˆ—å‡ºäº†è¿è¡Œé¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–åº“ã€‚æˆ‘ä»¬çš„å°å·¥ä½œå®¤åªéœ€è¦<code class="du kt ku kv kw b">fastapi</code>æ¨¡å—ã€‚</p><pre class="iy iz ja jb fd mb kw mc md aw me bi"><span id="3794" class="mf jg hi kw b fi mg mh l mi mj">fastapi==0.85.0</span></pre><p id="2a31" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">è®©æˆ‘ä»¬ç¼–å†™Dockeræ–‡ä»¶ã€‚</p><h1 id="772c" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">Dockeræ–‡ä»¶:</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kx ky l"/></div></figure><ol class=""><li id="8b17" class="ln lo hi jz b ka kz kd la kg lp kk lq ko lr ks ls lt lu lv bi translated">ä»dockerhubå¯¼å…¥pythonã€‚</li><li id="a18e" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">åˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•fastapiappã€‚</li><li id="b4ea" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">å°†<code class="du kt ku kv kw b">requirements.txt</code>æ–‡ä»¶å¤åˆ¶åˆ°appç›®å½•ä¸‹ã€‚</li><li id="a4df" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">å®‰è£…requirements.txtæ–‡ä»¶ä¸­çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚</li><li id="937e" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">å°†æ•´ä¸ªé¡¹ç›®å¤åˆ¶åˆ°fastapiappç›®å½•ä¸­ã€‚</li><li id="4c5e" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">æˆ‘ä»¬å…¬å¼€ç«¯å£8000ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºå°†åœ¨ç«¯å£8000ä¸Šè¿è¡Œã€‚</li><li id="ad55" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">å®šä¹‰<code class="du kt ku kv kw b">FASTAPI_APP</code>ç¯å¢ƒå˜é‡ã€‚å¦åˆ™è§£é‡Šå™¨å¯èƒ½ä¼šæŠ±æ€¨æ‰¾ä¸åˆ°å˜é‡</li><li id="5252" class="ln lo hi jz b ka lw kd lx kg ly kk lz ko ma ks ls lt lu lv bi translated">æœ€åï¼Œè¾“å…¥è¿è¡Œå‘½ä»¤<code class="du kt ku kv kw b">uvicorn fastapiapp.docker_fastapi:app --reload --host 0.0.0.0</code>ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æœåŠ¡å™¨æ¥å—æ¥è‡ªæ‰€æœ‰ä¸»æœºçš„è¯·æ±‚ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒåŒ…å«äº†æºç›®å½•fastapiappã€‚ä¸åŒ…æ‹¬è¿™ä¸ªå¯èƒ½ä¼šå¯¼è‡´<code class="du kt ku kv kw b">Error loading ASGI app.Could not import module</code>é”™è¯¯ã€‚</li></ol><h1 id="f8ed" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">æ„å»ºdockerå›¾åƒ:</h1><p id="c57c" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">æ—¢ç„¶æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†<code class="du kt ku kv kw b">Dockerfile</code>ï¼Œæˆ‘ä»¬å°†æ„å»ºdockeræ˜ åƒã€‚è¯·ç¡®ä¿æ‚¨çš„<code class="du kt ku kv kw b">docker desktop</code>æ­£åœ¨è¿è¡Œã€‚å¦åˆ™ä½ å¯èƒ½ä¼šå¾—åˆ°è¿™ä¸ªé”™è¯¯ã€‚</p><pre class="iy iz ja jb fd mb kw mc md aw me bi"><span id="f19b" class="mf jg hi kw b fi mg mh l mi mj">Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</span><span id="9b33" class="mf jg hi kw b fi mk mh l mi mj">(docker-env) dinesh@dinesh % docker build -t myfastapiapp .</span></pre><p id="92ad" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">è¯·æ³¨æ„å‘½ä»¤æœ«å°¾çš„å¥ç‚¹ã€‚</p><pre class="iy iz ja jb fd mb kw mc md aw me bi"><span id="7b31" class="mf jg hi kw b fi mg mh l mi mj">[+] Building 7.5s (9/9) FINISHED                                                                                                                                                                                        <br/> =&gt; [internal] load build definition from Dockerfile                                                                                                                                                               0.0s<br/> =&gt; =&gt; transferring dockerfile: 201B                                                                                                                                                                               0.0s<br/> =&gt; [internal] load .dockerignore                                                                                                                                                                                  0.0s<br/> =&gt; =&gt; transferring context: 2B                                                                                                                                                                                    0.0s<br/> =&gt; [internal] load metadata for docker.io/library/python:3.9-bullseye                                                                                                                                             2.1s<br/> =&gt; [internal] load build context                                                                                                                                                                                  0.0s<br/> =&gt; =&gt; transferring context: 3.35kB                                                                                                                                                                                0.0s<br/> =&gt; [1/4] FROM docker.io/library/python:3.9-bullseye@sha256:dd19baa7cbbf06a32808bb4d6dd63595010dc7da422ac332b789ee6ff08cc7c9                                                                                       0.0s<br/> =&gt; CACHED [2/4] WORKDIR /fastapiapp                                                                                                                                                                               0.0s<br/> =&gt; [3/4] COPY ./ ./fastapiapp                                                                                                                                                                                     0.0s<br/> =&gt; [4/4] RUN pip install -r fastapiapp/requirements.txt                                                                                                                                                           5.0s<br/> =&gt; exporting to image                                                                                                                                                                                             0.3s<br/> =&gt; =&gt; exporting layers                                                                                                                                                                                            0.3s<br/> =&gt; =&gt; writing image sha256:3f67d3fc43a32cecce470cd2878786c37018ff7fa07ed2e3a64a9f7e183f564d</span></pre><p id="aff0" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">ä¸€æ—¦æˆåŠŸæ„å»ºäº†æ˜ åƒï¼Œè¿™äº›æ˜ åƒåº”è¯¥ä½œä¸ºdockeræ˜ åƒçš„ä¸€éƒ¨åˆ†åˆ—å‡ºã€‚</p><pre class="iy iz ja jb fd mb kw mc md aw me bi"><span id="ed37" class="mf jg hi kw b fi mg mh l mi mj">(docker-env) dinesh@dinesh % docker images</span><span id="1e48" class="mf jg hi kw b fi mk mh l mi mj"><br/>REPOSITORY     TAG       IMAGE ID          CREATED          SIZE<br/>myfastapiapp   latest    6b1ab29f10db   10 minutes ago   133MB</span></pre><h1 id="558b" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">è¿è¡ŒDockeræ˜ åƒ:</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kx ky l"/></div></figure><p id="4b73" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated">ç°åœ¨ï¼Œè®¿é—®ç«¯ç‚¹åº”è¯¥ç»™å‡ºä¸ç›´æ¥è¿è¡Œfastapiåº”ç”¨ç¨‹åºç›¸åŒçš„ç»“æœã€‚</p><h1 id="926b" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">å°†Dockeræ˜ åƒæ¨é€åˆ°Docker hub:</h1><p id="73ba" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">Dockerå›¾åƒé€šè¿‡<code class="du kt ku kv kw b"><a class="ae lm" href="https://docs.docker.com/engine/reference/commandline/push/" rel="noopener ugc nofollow" target="_blank">docker push</a></code>å‘½ä»¤è¢«æ¨é€åˆ°Docker Hubã€‚å•ä¸ªDocker Hubå­˜å‚¨åº“å¯ä»¥ä¿å­˜è®¸å¤šDockerå›¾åƒ(å­˜å‚¨ä¸º<strong class="jz hj">æ ‡ç­¾</strong>)ã€‚è¦å°†å›¾åƒæ¨é€åˆ°Docker Hubï¼Œæ‚¨çš„å¸æˆ·ä¸­åº”è¯¥æœ‰ä¸€ä¸ªå­˜å‚¨åº“ã€‚å‡è®¾æˆ‘çš„å­˜å‚¨åº“åç§°æ˜¯<code class="du kt ku kv kw b">myfastapi</code>ï¼Œdocker pushå‘½ä»¤çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œ</p><pre class="iy iz ja jb fd mb kw mc md aw me bi"><span id="fde6" class="mf jg hi kw b fi mg mh l mi mj">docker push &lt;username&gt;/&lt;reponame&gt;:tagname<br/><br/>docker push dinesh/myfastapiapp:mytag</span></pre><h1 id="80e7" class="jf jg hi bd jh ji jj jk jl jm jn jo jp io jq ip jr ir js is jt iu ju iv jv jw bi translated">æ€»ç»“:</h1><p id="c408" class="pw-post-body-paragraph jx jy hi jz b ka kb ij kc kd ke im kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">å¦‚æœä½ è¯»åˆ°è¿™ä¸€è¡Œï¼Œæ„Ÿè°¢ä½ çš„è€å¿ƒå’Œæ—¶é—´ã€‚è¯·ç»§ç»­è®¿é—®è¿™ä¸ªç©ºé—´ï¼Œäº†è§£æ›´å¤šçš„æŠ€æœ¯å†…å®¹ã€‚ğŸ˜Š</p></div><div class="ab cl ml mm gp mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hb hc hd he hf"><p id="0a57" class="pw-post-body-paragraph jx jy hi jz b ka kz ij kc kd la im kf kg lb ki kj kk lc km kn ko ld kq kr ks hb bi translated"><em class="li">åŸè½½äº2022å¹´10æœˆ15æ—¥https://dock2learn.com</em><a class="ae lm" href="https://dock2learn.com/tech/how-to-dockerise-your-fastapi-application/" rel="noopener ugc nofollow" target="_blank"><em class="li"/></a><em class="li">ã€‚</em></p></div></div>    
</body>
</html>