<html>
<head>
<title>Setup OpenCV-DNN module with CUDA backend support (For Linux)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨CUDAåç«¯æ”¯æŒè®¾ç½®OpenCV-DNNæ¨¡å—(é€‚ç”¨äºLinux)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/setup-opencv-dnn-module-with-cuda-backend-support-for-linux-1677c627f3bd?source=collection_archive---------0-----------------------#2022-05-24">https://medium.com/geekculture/setup-opencv-dnn-module-with-cuda-backend-support-for-linux-1677c627f3bd?source=collection_archive---------0-----------------------#2022-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9a9adfde7199682fda23f381320ea36e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UpZzicg05zAiWSwwTys1Xw.png"/></div></div></figure><h1 id="2155" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨CUDAåç«¯æ”¯æŒä»æºä»£ç æ„å»ºOpenCV(OpenCV-DNN-CUDAæ¨¡å—)ã€‚</h1><p id="0d79" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj">é‡è¦æç¤º:</strong>OpenCV-DNNæ¨¡å—åªæ”¯æŒæ¨ç†ï¼Œæ‰€ä»¥å°½ç®¡ä½ å¯ä»¥ä»ä¸­è·å¾—æ›´å¿«çš„æ¨ç†ï¼Œä½†è®­ç»ƒå°†ä¸æˆ‘ä»¬åœ¨æ²¡æœ‰CUDAåç«¯æ”¯æŒçš„æƒ…å†µä¸‹è®¾ç½®çš„OpenCVç›¸åŒã€‚</p><h1 id="9e46" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">æ­¥ä¼</h1><p id="73c9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">1.å®‰è£…CUDA &amp; cuDNNã€‚</p><p id="03ff" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">2.å¦‚æœå°šæœªå®‰è£…ï¼Œè¯·å®‰è£…å¿…è¦çš„Ubuntuè½¯ä»¶åŒ…ã€‚</p><p id="0e51" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">3.ä¸‹è½½å¹¶è§£å‹ç¼©opencv &amp; opencv_contrib</p><p id="a7d7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">4.è®¾ç½®pythonç¯å¢ƒ</p><p id="2aae" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">5.ä½¿ç”¨CMakeå‘½ä»¤é…ç½®OpenCVåº“</p><p id="1401" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">6.ä¸ºä½ çš„NVidia GPUä»æºä»£ç æ„å»ºOpenCVã€‚</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="3a39" class="iq ir hi bd is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn bi translated">æˆ‘åœ¨YouTubeä¸Šçš„è§†é¢‘ï¼</h1><figure class="ld le lf lg fd ij"><div class="bz dy l di"><div class="lh li l"/></div></figure></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="7f8c" class="iq ir hi bd is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn bi translated">æˆ‘ä»¬å¼€å§‹å§ï¼</h1><h2 id="606b" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">æ­¥éª¤1)å®‰è£…CUDAå’ŒcuDNN</h2><p id="1281" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">ä¸ºæ‚¨çš„ç³»ç»Ÿä¸‹è½½å¹¶å®‰è£…CUDAåŠå…¶ç›¸åº”çš„cuDNNå½’æ¡£æ–‡ä»¶ã€‚å»https://developer.nvidia.com/cuda-downloadsçš„<a class="ae lx" href="https://developer.nvidia.com/cuda-downloads" rel="noopener ugc nofollow" target="_blank">ä¸‹è½½æœ€æ–°çš„CUDAå·¥å…·åŒ…ã€‚æ‚¨ä¹Ÿå¯ä»¥ä»ä»¥å‰çš„CUDAç‰ˆæœ¬çš„</a><a class="ae lx" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="noopener ugc nofollow" target="_blank">æ¡£æ¡ˆä¸­ä¸‹è½½ä»¥å‰çš„ç‰ˆæœ¬</a>,æˆ–è€…ä»ä¸Šé¢ç»™å‡ºçš„cuda-downloadsé“¾æ¥çš„å‚è€ƒèµ„æ–™éƒ¨åˆ†ä¸‹è½½ã€‚æ¥ä¸‹æ¥ï¼Œä¸‹è½½å¹¶å¤åˆ¶cuDNNæ–‡ä»¶å¤¹åŠå…¶å†…å®¹åˆ°æˆ‘ä»¬å®‰è£…CUDAçš„åœ°æ–¹ã€‚ä½ å¯ä»¥ä»https://developer.nvidia.com/cudnn<a class="ae lx" href="https://developer.nvidia.com/cudnn" rel="noopener ugc nofollow" target="_blank">ä¸‹è½½cuDNNçš„æœ€æ–°ç‰ˆæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥ä»https://developer.nvidia.com/rdp/cudnn-archiveçš„cudnnæ¡£æ¡ˆä¸‹è½½ä»¥å‰çš„ç‰ˆæœ¬ã€‚</a></p><p id="38da" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦åœ¨bashrcè„šæœ¬ä¸­æ·»åŠ è¿™äº›æ–‡ä»¶çš„è·¯å¾„ã€‚</p><p id="01e5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä¹‹åï¼Œé‡æ–°å¯åŠ¨æ‚¨çš„ç³»ç»Ÿï¼Œå¹¶é€šè¿‡é”®å…¥ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤åœ¨ç»ˆç«¯ä¸­éªŒè¯æ‚¨çš„CUDAå®‰è£…:</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="35d8" class="lj ir hi lz b fi md me l mf mg"><strong class="lz hj">nvidia-smi</strong></span><span id="c2ce" class="lj ir hi lz b fi mh me l mf mg"><strong class="lz hj">nvcc -V</strong></span></pre><p id="9b3a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">å…³æ³¨</strong> <a class="ae lx" href="https://techzizou.com/?p=424" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">æœ¬åšå®¢</strong> </a> <strong class="jq hj">å­¦ä¹ å¦‚ä½•åœ¨Linuxä¸Šå®‰è£…å’Œè®¾ç½®CUDAå’ŒCUDNNã€‚</strong></p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="d8f3" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">æ­¥éª¤2)å®‰è£…å¿…è¦çš„Ubuntuè½¯ä»¶åŒ…ï¼Œå¦‚æœè¿˜æ²¡æœ‰å®‰è£…çš„è¯ã€‚</h2><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="87b5" class="lj ir hi lz b fi md me l mf mg">sudo apt-get update<br/>sudo apt-get upgrade<br/>sudo apt-get install build-essential cmake unzip pkg-config<br/>sudo apt-get install libjpeg-dev libpng-dev libtiff-dev<br/>sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev<br/>sudo apt-get install libv4l-dev libxvidcore-dev libx264-dev<br/>sudo apt-get install libgtk-3-dev<br/>sudo apt-get install libblas-dev liblapack-dev gfortran<br/>sudo apt-get install python3-dev</span></pre></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="9d79" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">æ­¥éª¤3)ä¸‹è½½å¹¶è§£å‹ç¼©opencv &amp; opencv_contrib</h2><p id="a4b9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å¯¼èˆªåˆ°ä¸»æ–‡ä»¶å¤¹ï¼Œä¸‹è½½OpenCVå½’æ¡£æ–‡ä»¶ï¼Œå°†å…¶è§£å‹ç¼©ï¼Œå¹¶å°†æ–‡ä»¶å¤¹é‡å‘½åä¸º<em class="mi"> opencv </em>ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="a631" class="lj ir hi lz b fi md me l mf mg">cd ~<br/>wget -O opencv-4.5.5.zip <a class="ae lx" href="https://github.com/opencv/opencv/archive/4.5.5.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/opencv/opencv/archive/4.5.5.zip</a><br/>unzip -q opencv-4.5.5.zip<br/>mv opencv-4.5.5 opencv<br/>rm -f opencv-4.5.5.zip</span></pre><p id="3223" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ¥ä¸‹æ¥ï¼Œä¸‹è½½opencv_contribæ–‡ä»¶ï¼Œè§£å‹å¹¶é‡å‘½åä¸º<em class="mi"> opencv_contrib </em>ã€‚</p><p id="6ec7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated"><strong class="jq hj">æ³¨æ„</strong>:ç¡®ä¿ä¸‹è½½çš„opencv_contribç‰ˆæœ¬ä¸ä¹‹å‰ä¸‹è½½çš„opencvæ¡£æ¡ˆå®Œå…¨ç›¸åŒã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="bbd6" class="lj ir hi lz b fi md me l mf mg">wget -O opencv_contrib-4.5.5.zip <a class="ae lx" href="https://github.com/opencv/opencv_contrib/archive/4.5.5.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/opencv/opencv_contrib/archive/4.5.5.zip</a><br/>unzip -q opencv_contrib-4.5.5.zip<br/>mv opencv_contrib-4.5.5 opencv_contrib<br/>rm -f opencv_contrib-4.5.5.zip</span></pre></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="05aa" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">æ­¥éª¤4)è®¾ç½®pythonç¯å¢ƒ</h2><p id="2f22" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å¦‚æœæ‚¨çš„ç³»ç»Ÿä¸Šè¿˜æ²¡æœ‰virtualenvå’Œvirtualenvwrapperï¼Œè¯·å®‰è£…å®ƒä»¬ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="8200" class="lj ir hi lz b fi md me l mf mg">sudo pip install virtualenv virtualenvwrapper</span></pre><p id="58b4" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">ä½¿ç”¨<code class="du mj mk ml lz b">nano</code>æ‰“å¼€bashrcè„šæœ¬æ–‡ä»¶ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="753b" class="lj ir hi lz b fi md me l mf mg">nano ~/.bashrc</span></pre><p id="2d94" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">è¾“å…¥ä»¥ä¸‹å¯¼å‡ºè·¯å¾„ï¼Œåœ¨åº•éƒ¨è®¾ç½®virtualenvwrapperçš„è·¯å¾„å¹¶ä¿å­˜æ–‡ä»¶ã€‚(æŒ‰<code class="du mj mk ml lz b">ctrl+x</code>ã€<code class="du mj mk ml lz b">y</code>å’Œ<code class="du mj mk ml lz b">Enter</code>ä¿å­˜æ–‡ä»¶)</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="04b7" class="lj ir hi lz b fi md me l mf mg">export WORKON_HOME=$HOME/.virtualenvs<br/>export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3<br/>source /usr/local/bin/virtualenvwrapper.sh</span></pre><p id="0552" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">è¿è¡Œsourceæ¥æ–­è¨€bashrcè„šæœ¬åœ¨ç³»ç»Ÿä¸­çš„æ›´æ”¹ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="a506" class="lj ir hi lz b fi md me l mf mg">source ~/.bashrc</span></pre><p id="438f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">åœ¨ç»ˆç«¯ä¸­åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚æˆ‘ä»¬å°†åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…OpenCV-DNN-CUDAæ¨¡å—ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„åŸºç¡€ç¯å¢ƒã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="2225" class="lj ir hi lz b fi md me l mf mg">mkvirtualenv opencv_dnn_cuda -p python3</span></pre><p id="9e03" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å®‰è£…NumPyåŒ…ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="5502" class="lj ir hi lz b fi md me l mf mg">pip install numpy</span></pre><p id="e9a1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ:</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="66cc" class="lj ir hi lz b fi md me l mf mg">workon opencv_dnn_cuda</span></pre></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="048b" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">æ­¥éª¤5)ä½¿ç”¨cmakeå‘½ä»¤é…ç½®OpenCVä»¥å®‰è£…ä¸€äº›åº“</h2><p id="c7c2" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å¯¼èˆªåˆ°æˆ‘ä»¬åœ¨æ­¥éª¤3ä¸­åˆ›å»ºçš„<em class="mi"> opencv </em>æ–‡ä»¶å¤¹ã€‚åœ¨å…¶ä¸­åˆ›å»ºå¦ä¸€ä¸ªåä¸º<em class="mi"> build </em>çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­å¯¼èˆªã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="c5b0" class="lj ir hi lz b fi md me l mf mg">cd ~/opencv<br/>mkdir build<br/>cd build</span></pre><p id="636f" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">è¿è¡ŒCMakeå‘½ä»¤æ¥é…ç½®OpenCVçš„è®¾ç½®ï¼Œæ‚¨å¸Œæœ›ä½¿ç”¨æ‚¨é€‰æ‹©çš„è‡ªå®šä¹‰åº“å’Œå‡½æ•°ä»æºä»£ç æ„å»ºOpenCVã€‚</p><p id="3e42" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å°†ä¸‹é¢å‘½ä»¤ä¸­çš„CUDA_ARCH_BINå‚æ•°æ›´æ”¹ä¸ºæ‚¨çš„GPUçš„è®¡ç®—èƒ½åŠ›ã€‚åœ¨è¿™é‡Œæ‰¾åˆ°ä½ çš„GPUçš„cc<a class="ae lx" href="https://developer.nvidia.com/cuda-gpus" rel="noopener ugc nofollow" target="_blank"/>ã€‚æ­¤å¤–ï¼Œå¦‚æœä½¿ç”¨ä¸åŒçš„åç§°ï¼Œè¯·æ›´æ”¹PYTHON_EXECUTABLEå‚æ•°ä¸­çš„è™šæ‹Ÿç¯å¢ƒåç§°ï¼Œå¦åˆ™ä¿æŒä¸å˜ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="ec5f" class="lj ir hi lz b fi md me l mf mg">cmake -D CMAKE_BUILD_TYPE=RELEASE \<br/>	-D CMAKE_INSTALL_PREFIX=/usr/local \<br/>	-D INSTALL_PYTHON_EXAMPLES=ON \<br/>	-D INSTALL_C_EXAMPLES=OFF \<br/>	-D OPENCV_ENABLE_NONFREE=ON \<br/>	-D WITH_CUDA=ON \<br/>	-D WITH_CUDNN=ON \<br/>	-D OPENCV_DNN_CUDA=ON \<br/>	-D ENABLE_FAST_MATH=1 \<br/>	-D CUDA_FAST_MATH=1 \<br/>	-D CUDA_ARCH_BIN=6.1 \<br/>	-D WITH_CUBLAS=1 \<br/>	-D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib/modules \<br/>	-D HAVE_opencv_python3=ON \<br/>	-D PYTHON_EXECUTABLE=~/.virtualenvs/opencv_dnn_cuda/bin/python \<br/>	-D BUILD_EXAMPLES=ON ..</span></pre><p id="88e8" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">åœ¨ä¸Šé¢çš„CMakeå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æ­£åœ¨ç¼–è¯‘OpenCVï¼ŒåŒæ—¶å¯ç”¨äº†CUDAå’ŒcuDNNæ”¯æŒ(åˆ†åˆ«ä½¿ç”¨_CUDAå’Œ_CUDNN)ã€‚æˆ‘ä»¬è¿˜å¯ç”¨äº†OPENCV_DNN_CUDAå‚æ•°æ¥æ„å»ºå…·æœ‰CUDAåç«¯æ”¯æŒçš„DNNæ¨¡å—ã€‚å‡ºäºä¼˜åŒ–ç›®çš„ï¼Œæˆ‘ä»¬è¿˜è®¾ç½®äº†ENABLE_FAST_MATHã€CUDA_FAST_MATHå’ŒWITH_CUBLASã€‚</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="bac4" class="iq ir hi bd is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn bi translated">ç¬¬6æ­¥)æœ€åï¼Œä»æºä»£ç ä¸­æ„å»ºOpenCV-DNNæ¨¡å—ï¼Œä¸ºæ‚¨çš„ç‰¹å®šNVidia GPUæä¾›CUDAåç«¯æ”¯æŒ</h1><p id="d32d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">è¿è¡Œmakeå‘½ä»¤ï¼Œç”¨ä¸Šé¢é…ç½®çš„è®¾ç½®æ„å»ºOpenCVã€‚(åœ¨ç»ˆç«¯ä¸­è¿è¡Œ<code class="du mj mk ml lz b">nproc</code>ï¼Œæ‰“å°æ‚¨çš„å¤„ç†å™¨å·ã€‚åœ¨j8ä¸­ç”¨ä¸‹é¢çš„8ä»£æ›¿ã€‚)</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="6d83" class="lj ir hi lz b fi md me l mf mg">make -j8</span></pre><p id="16e9" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">è¿™å°†ä½¿ç”¨CUDAåç«¯ä»æºä»£ç æ„å»ºOpenCV-DNNæ¨¡å—ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€ä¸ªå°æ—¶å·¦å³ã€‚</p><p id="79e3" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ¥ä¸‹æ¥ï¼Œä¸€æ—¦åœ¨ä¸Šé¢çš„makeå‘½ä»¤ä¸­å®Œæˆäº†OpenCVçš„æ„å»ºï¼Œå°±åœ¨æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£…OpenCVã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="06f7" class="lj ir hi lz b fi md me l mf mg">sudo make install<br/>sudo ldconfig</span></pre><p id="7499" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ¥ä¸‹æ¥ï¼Œæœ€åä¸€æ­¥æ˜¯åœ¨æ–°å®‰è£…çš„OpenCVåº“å’Œæˆ‘ä»¬çš„pythonè™šæ‹Ÿç¯å¢ƒä¹‹é—´åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦OpenCVç»‘å®šçš„å®‰è£…è·¯å¾„ã€‚æ‚¨å¯ä»¥é€šè¿‡CMakeå‘½ä»¤æ­¥éª¤è¾“å‡º<strong class="jq hj">ä¸­å®‰è£…è·¯å¾„é…ç½®æ¥ç¡®å®šè·¯å¾„ã€‚</strong></p><p id="cccd" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œå®‰è£…è·¯å¾„æ˜¯<strong class="jq hj"><em class="mi">lib/python 3.6/site-packages/cv2/python-3.6</em></strong>ï¼Œè¿™æ„å‘³ç€æˆ‘çš„OpenCVç»‘å®šåœ¨<strong class="jq hj"><em class="mi">/usr/local/lib/python 3.6/site-packages/cv2/python-3.6</em></strong>ä¸­ã€‚æ£€æŸ¥ä½ çš„â€ã€‚æ‰€ä»¥â€œæ–‡ä»¶æ˜¯ã€‚</p><p id="99dc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ‚¨å¯ä»¥é€šè¿‡åˆ—å‡ºå…¶å†…å®¹æ¥ç¡®è®¤ä¸Šé¢çš„è·¯å¾„ã€‚è¿è¡Œä¸‹é¢çš„<code class="du mj mk ml lz b">ls</code>å‘½ä»¤:</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="5c18" class="lj ir hi lz b fi md me l mf mg">ls -l /usr/local/lib/python3.6/site-packages/cv2/python-3.6<br/>total 10104<br/>-rw-r--r-- 1 root staff 10345488 Mar 23 07:06 cv2.cpython-36m-x86_64-linux-gnu.so</span></pre><p id="cbb5" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ‚¨å°†çœ‹åˆ°ç±»ä¼¼ä¸Šé¢çš„è¾“å‡ºï¼Œç¡®è®¤cv2ç»‘å®šåœ¨è¿™é‡Œã€‚æˆ‘æœ‰Python 3.6å’Œè§£é‡Šæ–‡ä»¶åçš„64ä½æ¶æ„ã€‚æ ¹æ®æ‚¨çš„Pythonå’Œç³»ç»Ÿæ¶æ„ï¼Œæ‚¨çš„å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p><p id="7279" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ¥ä¸‹æ¥ï¼Œå¯¼èˆªåˆ°è™šæ‹Ÿç¯å¢ƒâ€œsite-packagesâ€æ–‡ä»¶å¤¹ï¼Œæœ€åä½¿ç”¨<code class="du mj mk ml lz b">ln -s</code>å‘½ä»¤ä¸ºæˆ‘ä»¬åœ¨ä¸Šé¢æ‰¾åˆ°çš„cv2ç»‘å®šåˆ›å»ºä¸€ä¸ªé“¾æ¥ã€‚è¿™å°†åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªcv2.so <a class="ae lx" href="https://devdojo.com/devdojo/what-is-a-symlink" rel="noopener ugc nofollow" target="_blank">ç¬¦å·é“¾æ¥</a>ï¼Œè¯¥ç›®å½•æ˜¯æˆ‘ä»¬è™šæ‹Ÿç¯å¢ƒä¸­çš„ç«™ç‚¹åŒ…æ–‡ä»¶å¤¹ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="8cb6" class="lj ir hi lz b fi md me l mf mg">cd ~/.virtualenvs/opencv_dnn_cuda/lib/python3.6/site-packages/<br/>ln -s /usr/local/lib/python3.6/site-packages/cv2/python-3.6/cv2.cpython-36m-x86_64-linux-gnu.so cv2.so</span></pre><p id="70d7" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ³¨æ„:è¯·ç¡®ä¿ä»”ç»†æ£€æŸ¥æ‰€æœ‰å†…å®¹ï¼Œå› ä¸ºå³ä½¿è·¯å¾„ä¸æ­£ç¡®ï¼Œè¯¥å‘½ä»¤ä¹Ÿä¼šæ— å£°åœ°å¤±è´¥ï¼Œè¿™æ„å‘³ç€æ‚¨ä¸ä¼šæ”¶åˆ°è­¦å‘Šæˆ–é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶ä¸”è¾“å‡ºä¹Ÿä¸ä¼šå·¥ä½œã€‚æ‰€ä»¥è¦æ³¨æ„è¿™ä¸€æ­¥ã€‚</p><p id="52dc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬å·²ç»åœ¨CUDAåç«¯æ”¯æŒä¸‹æˆåŠŸæ„å»ºäº†OpenCV-DNNæ¨¡å—ã€‚</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><p id="c646" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">æ£€æŸ¥cv2æ˜¯å¦å®‰è£…æ­£ç¡®ã€‚</p><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="a499" class="lj ir hi lz b fi md me l mf mg">workon opencv_dnn_cuda<br/>python</span><span id="d1d1" class="lj ir hi lz b fi mh me l mf mg">Python 3.6.9 (default, July 02 2019, 17:25:39)<br/>[GCC 6.3.0 20170516] on linux<br/>Type "help", "copyright", "credits" or "license" for more information.<br/>&gt;&gt;&gt; import cv2<br/>&gt;&gt;&gt; cv2.__version__<br/>'4.5.5'<br/>&gt;&gt;&gt;</span></pre></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="761f" class="iq ir hi bd is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn bi translated">ä½¿ç”¨ä¸‹é¢çš„test_DNN_CV.pyè„šæœ¬æ£€æŸ¥OpenCVæ˜¯å¦æ­£ç¡®å®‰è£…äº†CUDAåç«¯æ”¯æŒã€‚ä¸‹é¢ä¸‹è½½ã€‚</h1><pre class="ld le lf lg fd ly lz ma mb aw mc bi"><span id="2519" class="lj ir hi lz b fi md me l mf mg">import numpy as np<br/>import cv2 as cv<br/>import time</span><span id="1781" class="lj ir hi lz b fi mh me l mf mg">npTmp = np.random.random((1024, 1024)).astype(np.float32)</span><span id="f5d4" class="lj ir hi lz b fi mh me l mf mg">npMat1 = np.stack([npTmp,npTmp],axis=2)<br/>npMat2 = npMat1</span><span id="cfca" class="lj ir hi lz b fi mh me l mf mg">cuMat1 = cv.cuda_GpuMat()<br/>cuMat2 = cv.cuda_GpuMat()<br/>cuMat1.upload(npMat1)<br/>cuMat2.upload(npMat2)</span><span id="d5cc" class="lj ir hi lz b fi mh me l mf mg">start_time = time.time()<br/>cv.cuda.gemm(cuMat1, cuMat2,1,None,0,None,1)</span><span id="8512" class="lj ir hi lz b fi mh me l mf mg">print("CUDA using GPU --- %s seconds ---" % (time.time() - start_time))</span><span id="c9cf" class="lj ir hi lz b fi mh me l mf mg">start_time = time.time()<br/>cv.gemm(npMat1,npMat2,1,None,0,None,1)</span><span id="0924" class="lj ir hi lz b fi mh me l mf mg">print("CPU --- %s seconds ---" % (time.time() - start_time))</span></pre><h2 id="0228" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">ä¸‹è½½ä¸‹é¢çš„è„šæœ¬æ¥æµ‹è¯•OpenCV-DNNã€‚</h2><p id="c3d7" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><a class="ae lx" href="https://techzizou.com/setup-opencv-dnn-cuda-module-for-linux/#test_dnn_cv" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">ä¸‹è½½æµ‹è¯•_DNN_CV.py </strong> </a></p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h1 id="b541" class="iq ir hi bd is it ky iv iw ix kz iz ja jb la jd je jf lb jh ji jj lc jl jm jn bi translated">ä¸‹ä¸€ä¸ªæ•™ç¨‹:</h1><h2 id="b0eb" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">åœ¨Linuxä¸Šä½¿ç”¨OpenCV-DNNæ¨¡å—è¿è¡ŒYOLOv4æ¨ç†</h2><div class="mm mn ez fb mo mp"><a href="https://techzizou007.medium.com/yolov4-inference-using-opencv-dnn-cuda-on-linux-904c16d2aea7" rel="noopener follow" target="_blank"><div class="mq ab dw"><div class="mr ab ms cl cj mt"><h2 class="bd hj fi z dy mu ea eb mv ed ef hh bi translated">Linuxä¸‹åŸºäºOpenCV-DNN-CUDAçš„YOLOv4æ¨ç†</h2><div class="mw l"><h3 class="bd b fi z dy mu ea eb mv ed ef dx translated">åœ¨Linuxä¸Šä½¿ç”¨OpenCV-DNN-CUDAæ¨¡å—è¿è¡ŒYOLOv4æ¨ç†ã€‚</h3></div><div class="mx l"><p class="bd b fp z dy mu ea eb mv ed ef dx translated">techzizou007.medium.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd io mp"/></div></div></a></div></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="5e54" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">åˆ«å¿˜äº†ç•™ä¸‹ğŸ‘</h2><h2 id="c756" class="lj ir hi bd is lk ll lm iw ln lo lp ja jz lq lr je kd ls lt ji kh lu lv jm lw bi translated">ç¥æ‚¨æ„‰å¿«ï¼ï¼ï¼âœŒ</h2><h1 id="363d" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">â™•Â·ç‰¹å¥‡ä½Â·â™•</h1></div></div>    
</body>
</html>