# ä½¿ç”¨ Tap-Rpc å®Œæˆæ‚¨çš„ GRPC å¼€å‘å’Œæµ‹è¯•å·¥ä½œæµ

> åŸæ–‡ï¼š<https://medium.com/geekculture/complete-your-grpc-development-and-testing-workflow-with-tap-rpc-bc185a1adce5?source=collection_archive---------35----------------------->

![](img/96d780b179100b75414926301e8453fd.png)

æˆ‘ä»¬åœ¨[nucleus](http://gonuclei.com)ä½¿ç”¨ GRPC ä¸ºæˆ‘ä»¬çš„æœåŠ¡ï¼Œä¸»è¦æ˜¯å› ä¸º GRPC æä¾›äº†ä¸°å¯Œçš„å¥½å¤„ï¼Œä¾‹å¦‚é€šè¿‡åŸå‹æ–‡ä»¶è¿›è¡Œç®€å•çš„æœåŠ¡å®šä¹‰ï¼Œæä¾›å¯æ‰©å±•æ€§ï¼Œè·¨è¯­è¨€å’Œå¹³å°å·¥ä½œï¼Œé€šè¿‡ http2 æ”¯æŒåŒå‘æµã€‚

å°½ç®¡æœ‰è¿™äº›å¥½å¤„ï¼Œæˆ‘ä»¬è§£å†³äº†ä¸€äº›ä¸å¯é¿å…çš„é™åˆ¶å’Œæˆ‘ä»¬ç»å¸¸é¢å¯¹çš„å¼€å‘å’Œæµ‹è¯•å·¥ä½œæµç¨‹çš„ç»†å¾®å·®åˆ«ã€‚

# æˆ‘ä»¬è¯•å›¾è§£å†³çš„é—®é¢˜

ä»»ä½•é¡¹ç›®é€šå¸¸çš„å¼€å‘å’Œæµ‹è¯•å·¥ä½œæµç¨‹éƒ½åŒ…æ‹¬å‰ç«¯å’Œåç«¯å¼€å‘ï¼Œä»¥åŠæµ‹è¯•é¡¹ç›®çš„ QA äººå‘˜ã€‚

**å‰ç«¯é—®é¢˜**:å‰ç«¯å¼€å‘äººå‘˜æ€»æ˜¯ä¾èµ–åç«¯æœåŠ¡å‡†å¤‡å°±ç»ªï¼Œä»¥æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œå¾ˆå¤šæ—¶å€™æœåŠ¡ä»åœ¨è¿›è¡Œä¸­ã€‚å¦‚æœæœåŠ¡æ²¡æœ‰å‡†å¤‡å¥½ï¼Œå‰ç«¯å°†ä¸å¾—ä¸æ‰‹åŠ¨æ¨¡æ‹Ÿå“åº”ï¼Œè¿™æ˜¯éå¸¸è€—æ—¶å’Œä¹å‘³çš„ã€‚

**åç«¯é—®é¢˜**:åç«¯æœåŠ¡çš„æµ‹è¯•å®Œå…¨ä¾èµ–äºä»–ä»¬ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåç«¯å¼€å‘äººå‘˜æ— æ³•å®æ—¶ä¿®æ”¹æ¥è‡ªåº”ç”¨ç¨‹åºå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¿™ä½¿å¾—å‘ç°é—®é¢˜å˜å¾—æ›´åŠ å›°éš¾ã€‚

QA å…³æ³¨ç‚¹:åœ¨åç«¯æˆ–å®¢æˆ·ç«¯æ¨¡æ‹ŸæŸäº›è¾¹ç¼˜æ¡ˆä¾‹å’Œåœºæ™¯æ˜¯éå¸¸å›°éš¾å’Œè€—æ—¶çš„ï¼Œè¿™é€šå¸¸éœ€è¦æ”¹å˜å®¢æˆ·ç«¯å’Œåç«¯çš„ä»£ç åº“ã€‚QA æ²¡æœ‰ç®€å•çš„æ–¹æ³•æ¥å®æ—¶æŸ¥çœ‹æˆ–ä¿®æ”¹å®¢æˆ·ç«¯å’Œåç«¯ä¹‹é—´äº¤æ¢çš„è¯·æ±‚å’Œå“åº”ï¼Œè¿™å°†å¤šæ¬¡æš´éœ²é”™è¯¯å’Œæœªå¤„ç†çš„æƒ…å†µã€‚

ä¸ºäº†è§£å†³ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä»‹äºå‰ç«¯(å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº)å’Œåç«¯(æœåŠ¡)ä¹‹é—´çš„å·¥å…·

*   è¿™æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒè®©å¼€å‘äººå‘˜ä»¥ä¸€ç§æ¯”é€šå¸¸çš„æ—¥å¿—æ›´å¥½çš„æ–¹å¼å®æ—¶çœ‹åˆ°è¯·æ±‚å’Œå“åº”ã€‚
*   å…è®¸æ‚¨å®æ—¶ä¿®æ”¹å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å™¨ä¹‹é—´äº¤æ¢çš„è¯·æ±‚å’Œå“åº”ã€‚
*   å…è®¸æ‚¨ä½¿ç”¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ‰€éœ€çš„ç›¸å…³ä¿¡æ¯ç”Ÿæˆæ¨¡æ‹Ÿå“åº”ï¼Œå¹¶æä¾›å‘æœåŠ¡å‘é€æ¨¡æ‹Ÿè¯·æ±‚çš„æ–¹æ³•ã€‚

è¿™å°±æ˜¯ **Tap-Rpc** (çµæ„Ÿæ¥è‡ª Bloom Rpc grpc å®¢æˆ·ç«¯)çš„ç”±æ¥ã€‚

# TAP-RPC:

![](img/326fdc274fe48490cc4d16d2fea37b3b.png)

Tap-Rpc æœ‰æ•ˆåœ°è§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚

*   ç®€åŒ–å‰ç«¯å¼€å‘ï¼Œç”šè‡³åœ¨åç«¯ API æœªå‡†å¤‡å¥½çš„æƒ…å†µä¸‹è§£é™¤å‰ç«¯é˜»å¡ã€‚
*   æ˜¾è‘—é™ä½å¼€å‘äººå‘˜å’Œ QA ä¹‹é—´çš„ä¾èµ–æ€§
*   æœ‰åŠ©äºæœ‰æ•ˆçš„åº”ç”¨å’Œåç«¯æµ‹è¯•

# å®‰è£…å’Œä½¿ç”¨:

*   ä»è¿™é‡Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬:[https://github.com/nateshmbhat/tap-rpc/releases](https://github.com/nateshmbhat/tap-rpc/releases)

![](img/5755e8d08d824be0f36bab389aff044c.png)

*   åœ¨æ‚¨çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ï¼Œå°† grpc æœåŠ¡çš„ä¸»æœºå’Œç«¯å£è®¾ç½®ä¸ºæŒ‡å‘ Tap-Rpc çª—å£æ ‡é¢˜ä¸­é—´æ˜¾ç¤ºçš„ Tap-Rpc çš„ ip åœ°å€å’Œç«¯å£ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œçª—å£æ ‡é¢˜æ˜¾ç¤ºçš„åœ°å€ä¸ºâ€œ **192.168.6.54:50051** â€ã€‚
*   è®¾ç½®ç¼ºçœçš„ç›®æ ‡æœåŠ¡å™¨ URLï¼Œè¿™æ˜¯ç›‘è§†å™¨å’Œå®¢æˆ·æœºæ¨¡å¼æ‰€éœ€è¦çš„ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œç›®æ ‡æœåŠ¡å™¨è¢«è®¾ç½®ä¸ºâ€œdev-01.gonuclei.com:80 â€,è¿™æ˜¯çœŸæ­£çš„ grpc æœåŠ¡çš„åœ°å€ã€‚
*   ç”¨æˆ·é€‰æ‹©åŒ…å«æœåŠ¡çš„åŸå‹æ–‡ä»¶ã€‚ä¸€æ—¦æ‚¨é€‰æ‹©äº† proto æ–‡ä»¶ï¼Œæ‰€æœ‰çš„æœåŠ¡å’Œè¿™äº›æœåŠ¡ä¸­çš„ rpc éƒ½ä¼šå‡ºç°åœ¨ä¸€ä¸ªæ ‘å½¢ç»“æ„ä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„ RPCã€‚
*   æ­¤æ—¶ï¼Œæ¥è‡ªå®¢æˆ·ç«¯çš„ä»»ä½•è¯·æ±‚éƒ½å°†è¢«è½¬å‘åˆ°åå°çš„é»˜è®¤ç›®æ ‡æœåŠ¡å™¨ã€‚
*   ç°åœ¨ï¼Œæ‚¨çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå·²ç»å‡†å¤‡å¥½è®¿é—® Tap-Rpc çš„æ‰€æœ‰ç‰¹æ€§ã€‚

Tap-Rpc æä¾›äº† 3 ç§æ“ä½œæ¨¡å¼ï¼Œæ¯ç§æ¨¡å¼è§£å†³ä¸€ç»„ä¸åŒçš„é—®é¢˜:

1.  æ¨¡æ‹Ÿ Rpc æ¨¡å¼
2.  ç›‘æ§æ¨¡å¼
3.  å®¢æˆ·ç«¯æ¨¡å¼

# æ¨¡æ‹Ÿ Rpc æ¨¡å¼:

![](img/be0b8db4ae8ce4ec47983cd6165a786c.png)

Mock Rpc mode in action

æ¨¡æ‹Ÿ rpc æ¨¡å¼ä¸ºå¯ä»¥å®šåˆ¶çš„å®¢æˆ·ç«¯æä¾›æ¨¡æ‹Ÿå“åº”ã€‚è¿™ç§æ¨¡å¼è¯•å›¾æ¶ˆé™¤å¯¹åç«¯æœåŠ¡çš„ä¾èµ–ã€‚å®¢æˆ·ç«¯åªéœ€è¦æŒ‡å‘çª—å£æ ‡é¢˜ä¸­ç»™å‡ºçš„åœ°å€ï¼Œå°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Tap-Rpc ä½œä¸ºæ¨¡æ‹ŸæœåŠ¡å™¨ã€‚

*   ç”Ÿæˆçš„æ¨¡æ‹Ÿå“åº”ä¾èµ–äºåŸå‹å±æ€§åå’Œå±æ€§ç±»å‹ï¼Œè¿™æœ‰åŠ©äºç”ŸæˆçœŸå®çš„å“åº”ã€‚ä¾‹å¦‚:å›¾åƒç½‘å€ï¼Œåœ°å€æ–‡æœ¬ï¼Œç”µè¯ï¼Œæ–‡ä»¶è·¯å¾„ï¼Œç”µå­é‚®ä»¶ï¼Œå§“åç­‰ã€‚
*   æ¨¡æ‹Ÿå“åº”å¯ä»¥ç”±**åŠ¨æ€ç¼–è¾‘**ã€‚
*   æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©**å‘é€** **æ¨¡æ‹Ÿ grpc é”™è¯¯ä»£ç **å’Œè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯æ¥æµ‹è¯•é”™è¯¯åœºæ™¯ã€‚
*   æœ¬è´¨ä¸Šï¼Œtap-rpc å·¥å…·çš„æ¯ä¸ªç”¨æˆ·éƒ½æœ‰èƒ½åŠ›æ‹¥æœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¸ºè¯·æ±‚æä¾›çœŸå®çš„å“åº”ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯æ‰‹åŠ¨ç¡¬ç¼–ç æ¨¡æ‹Ÿå“åº”ã€‚

# ç›‘æ§æ¨¡å¼:

![](img/805e6267cc3d04a48092bbd4386c7e5e.png)

Monitor mode in action

ç›‘æ§æ¨¡å¼æ˜¯ Tap-Rpc æœ€æœ‰è¶£çš„ç‰¹æ€§ï¼Œå®ƒå……å½“åº”ç”¨ç¨‹åºå®¢æˆ·æœºå’ŒçœŸæ­£çš„åç«¯æœåŠ¡å™¨(ç›®æ ‡æœåŠ¡å™¨)ä¹‹é—´çš„æ¡¥æ¢ï¼Œå…è®¸æ‚¨å®æ—¶ç›‘æ§å’Œä¿®æ”¹è¯·æ±‚å’Œå“åº”ã€‚

*   ç”¨æˆ·å¯ä»¥å®æ—¶çœ‹åˆ°å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å™¨ä¹‹é—´äº¤æ¢çš„è¯·æ±‚å’Œå“åº”ã€‚
*   ç”¨æˆ·å¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾åç«¯ä¹‹å‰ä¿®æ”¹æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚
*   ç”¨æˆ·å¯ä»¥åœ¨å“åº”åˆ°è¾¾å®¢æˆ·ç«¯ä¹‹å‰ä¿®æ”¹ä»æœåŠ¡å™¨è¿”å›çš„å“åº”ã€‚
*   ç”¨æˆ·è¿˜å¯ä»¥è®¿é—®å’Œä¿®æ”¹å…ƒæ•°æ®ã€åˆ‡æ¢ TLS ä½¿ç”¨ã€è½¬å‘é”™è¯¯ã€æ›´æ”¹ç›®æ ‡æœåŠ¡å™¨ä»¥åŠ¨æ€è½¬å‘è¯·æ±‚ç­‰ã€‚

# å®¢æˆ·ç«¯æ¨¡å¼:

![](img/619e0417a758111d218aaf5eb7e268bb.png)

Client mode in action

åœ¨å®¢æˆ·æœºæ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡å‘ç›®æ ‡æœåŠ¡å™¨å‘é€çœŸå®çš„æ¨¡æ‹Ÿè¯·æ±‚æ¥ç‹¬ç«‹æµ‹è¯•æ‚¨çš„åç«¯æœåŠ¡ã€‚

*   ä½¿ç”¨å®¢æˆ·ç«¯æ¨¡å¼å‘åç«¯æœåŠ¡å‘é€çœŸå®çš„æ¨¡æ‹Ÿè¯·æ±‚ã€‚
*   å¸®åŠ©æµ‹è¯•å„ç§åœºæ™¯ä¸‹çš„æ¯ä¸ªåç«¯æœåŠ¡å’Œ rpcã€‚
*   ç”¨çœŸå®çš„æ•°æ®ç”Ÿæˆæ¨¡æ‹Ÿè¯·æ±‚ã€‚

# ä½¿ç”¨ REST è€Œä¸æ˜¯ GRPCï¼Ÿ

å¦‚æœä½ åœ¨ä½¿ç”¨ REST æœåŠ¡è€Œä¸æ˜¯ grpcï¼Œæˆ‘ä»¬ä»ç„¶ä¸ºä½ æä¾›äº†å¦ä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç† REST æœåŠ¡å’Œè¯·æ±‚çš„å·¥å…·ï¼Œä½ å¯ä»¥ä»è¿™é‡Œè·å¾—:[https://github.com/nateshmbhat/tap-rest/releases](https://github.com/nateshmbhat/tap-rest/releases)

> è¿™ç¯‡æ–‡ç« æ˜¯ç”± [manu kj](https://medium.com/u/94450a387c10?source=post_page-----bc185a1adce5--------------------------------) å…±åŒæ’°å†™çš„

> *åˆ«å¿˜äº†ç ¸é‚£ä¸ª* `*CLAP*` *æŒ‰é’®ğŸ‘ğŸ»èµ°ä¹‹å‰:)*

![](img/893063ccf3ad689296cd095afd513f93.png)

Clapping is Caring :)