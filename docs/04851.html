<html>
<head>
<title>Using the new C# Azure.Data.Tables SDK with Azure Cosmos DB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨æ–°çš„C# Azureã€‚å¸¦æœ‰Azure Cosmos DBçš„æ•°æ®è¡¨SDK</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/using-the-new-c-azure-data-tables-sdk-with-azure-cosmos-db-786085ac8190?source=collection_archive---------2-----------------------#2021-07-05">https://medium.com/geekculture/using-the-new-c-azure-data-tables-sdk-with-azure-cosmos-db-786085ac8190?source=collection_archive---------2-----------------------#2021-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b101" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ–°çš„Azureå¯¹Azure Cosmos DB Table APIå¸æˆ·æ‰§è¡Œç®€å•çš„æ“ä½œã€‚è¡¨C# SDKã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/bd0ef98de3044b79b1ff70a87d76a790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AtKwtoq8sw56MiYa.png"/></div></div></figure><p id="ec12" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ä¸Šä¸ªæœˆï¼Œ<a class="ae kf" href="https://devblogs.microsoft.com/azure-sdk/announcing-the-new-azure-data-tables-libraries/" rel="noopener ugc nofollow" target="_blank"> Azure SDKå›¢é˜Ÿå‘å¸ƒäº†ä¸€ä¸ªæ–°çš„Azure Tablesåº“ã€‚NETï¼ŒJavaï¼ŒJS/TSå’ŒPython </a>ã€‚è¿™ä¸ªç‰ˆæœ¬ä½¿Table SDKä¸å…¶ä»–<a class="ae kf" href="https://aka.ms/azsdk/guide" rel="noopener ugc nofollow" target="_blank">Azure SDK</a>ä¿æŒä¸€è‡´ï¼Œå®ƒä»¬ä½¿ç”¨ç‰¹å®šçš„Azureæ ¸å¿ƒåŒ…æ¥å¤„ç†è¯·æ±‚ã€é”™è¯¯å’Œå‡­è¯ã€‚</p><p id="c076" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae kf" href="https://docs.microsoft.com/en-us/azure/cosmos-db/table-introduction" rel="noopener ugc nofollow" target="_blank"> Azure Cosmos DBæä¾›äº†ä¸€ä¸ªTable API </a>äº§å“ï¼Œæœ¬è´¨ä¸Šæ˜¯Azure Table Storageçš„å…´å¥‹å‰‚ï¼å¦‚æœä½ éœ€è¦ä¸€ä¸ªå…¨çƒåˆ†å¸ƒçš„è¡¨å­˜å‚¨æœåŠ¡ï¼ŒAzure Cosmos DBåº”è¯¥æ˜¯ä½ çš„é¦–é€‰ã€‚</p><p id="ac3f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¦‚æœä½ è¦åœ¨Azure Cosmos DB Table APIå’Œå¸¸è§„Azure Tableå­˜å‚¨ä¹‹é—´åšå‡ºé€‰æ‹©ï¼Œæˆ‘å»ºè®®ä½ é˜…è¯»ä¸‹é¢çš„<a class="ae kf" href="https://docs.microsoft.com/en-us/azure/cosmos-db/table-introduction#table-offerings" rel="noopener ugc nofollow" target="_blank">æ–‡ç« </a>ã€‚</p><p id="d8d0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æ–°çš„Azureå¯¹Azure Cosmos DB Table APIå¸æˆ·æ‰§è¡Œç®€å•çš„æ“ä½œã€‚è¡¨C# SDKã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†å›é¡¾:</p><ul class=""><li id="21c8" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">å®‰è£…SDKğŸ’»</li><li id="7dfd" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">è¿æ¥åˆ°æˆ‘ä»¬çš„è¡¨å®¢æˆ·æœºå¹¶åˆ›å»ºä¸€ä¸ªè¡¨ğŸ”¨</li><li id="0890" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">å®šä¹‰æˆ‘ä»¬çš„å®ä½“ğŸ§¾</li><li id="0c33" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">æ·»åŠ å®ä½“â•</li><li id="1269" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">æ‰§è¡Œäº‹åŠ¡æ€§æ‰¹å¤„ç†æ“ä½œğŸ’°</li><li id="aa89" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">æŸ¥è¯¢æˆ‘ä»¬çš„è¡¨â“</li><li id="e227" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">åˆ é™¤å®ä½“âŒ</li></ul><p id="9ef5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p><h1 id="6af8" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">å®‰è£…SDKğŸ’»</h1><p id="41b3" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">å®‰è£…SDKéå¸¸ç®€å•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œä¸‹é¢çš„<em class="lr"> dotnet </em>å‘½ä»¤æ¥åšåˆ°è¿™ä¸€ç‚¹:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="6d90" class="lx kv hi lt b fi ly lz l ma mb">dotnet add package Azure.Data.Tables</span></pre><p id="e633" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¦‚æœä½ æ›´å–œæ¬¢ä½¿ç”¨UIæ¥å®‰è£…NuGetåŒ…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Visual Studioä¸­å³é”®å•å‡»æˆ‘ä»¬çš„C#é¡¹ç›®ï¼Œå•å‡»ç®¡ç†NuGetåŒ…å¹¶æœç´¢<strong class="jl hj"> Azureã€‚æ•°æ®è¡¨</strong>åŒ…:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/935e2a090fb20a35c10cec50f6684c57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FAtmDDA5ZiVoEyGW.png"/></div></div></figure><h1 id="68c4" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">è¿æ¥åˆ°æˆ‘ä»¬çš„è¡¨å®¢æˆ·æœºå¹¶åˆ›å»ºä¸€ä¸ªè¡¨ğŸ”¨</h1><p id="bdad" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">SDKä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªå®¢æˆ·ç«¯æ¥ä¸æœåŠ¡è¿›è¡Œäº¤äº’ã€‚ä¸€ä¸ª<em class="lr"> TableServiceClient </em>ç”¨äºåœ¨å¸æˆ·çº§åˆ«ä¸æˆ‘ä»¬çš„è¡¨è¿›è¡Œäº¤äº’ã€‚</p><p id="1f6e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æˆ‘ä»¬è¿™æ ·åšæ˜¯ä¸ºäº†åˆ›å»ºè¡¨ã€è®¾ç½®è®¿é—®ç­–ç•¥ç­‰ã€‚</p><p id="af9c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ª<em class="lr"> TableClient </em>ã€‚è¿™ç”¨äºåœ¨æˆ‘ä»¬çš„å®ä½“ä¸Šæ‰§è¡Œæ“ä½œã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<em class="lr"> TableClient </em>æ¥åˆ›å»ºå¦‚ä¸‹è¡¨æ ¼:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="bfce" class="lx kv hi lt b fi ly lz l ma mb">TableClient tableClient = new TableClient(config["StorageConnection"], "Customers");<br/>            await tableClient.CreateIfNotExistsAsync();</span></pre><p id="156e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ä¸ºäº†åˆ›å»ºæˆ‘ä»¬çš„è¡¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»Azureä¼ å…¥æˆ‘çš„å­˜å‚¨è¿æ¥å­—ç¬¦ä¸²å’Œæˆ‘æƒ³è¦ä¸ä¹‹äº¤äº’çš„è¡¨çš„åç§°ã€‚åœ¨ä¸‹é¢ä¸€è¡Œä¸­ï¼Œå¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°±åˆ›å»ºå®ƒã€‚</p><p id="f2fa" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è¦è·å–å­˜å‚¨è¿æ¥å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä»æˆ‘ä»¬çš„Cosmos DBå¸æˆ·çš„<strong class="jl hj">è¿æ¥å­—ç¬¦ä¸²</strong>ä¸‹è¿›è¡Œ:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/c4a690ad4715e258d274379b0b18180a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wNhOEllUasy7Jh49.png"/></div></div></figure><p id="dd0f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»åœ¨æ•°æ®æµè§ˆå™¨ä¸­åˆ›å»ºäº†è¿™ä¸ªè¡¨:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/33a2bae0a65c666e0470eb285220807a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/0*HyM_KIumq0tHUVv-.png"/></div></figure><h1 id="12d1" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">å®šä¹‰æˆ‘ä»¬çš„å®ä½“ğŸ§¾</h1><p id="ccd4" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">åœ¨è¡¨å­˜å‚¨ä¸­ï¼Œæˆ‘ä»¬åœ¨è¡¨ä¸­åˆ›å»ºéœ€è¦ä¸€ä¸ª<em class="lr">åˆ†åŒºé”®</em>å’Œä¸€ä¸ª<em class="lr">è¡Œé”®</em>çš„å®ä½“ã€‚è¿™äº›çš„ç»„åˆéœ€è¦åœ¨æˆ‘ä»¬çš„è¡¨ä¸­æ˜¯å”¯ä¸€çš„ã€‚</p><p id="ff74" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å®ä½“æœ‰ä¸€ç»„å±æ€§ï¼Œå¼ºç±»å‹å®ä½“éœ€è¦ä»<em class="lr"> ITableEntity </em>æ¥å£æ‰©å±•ï¼Œè¯¥æ¥å£å…¬å¼€åˆ†åŒºé”®ã€è¡Œé”®ã€ETagå’Œæ—¶é—´æˆ³å±æ€§ã€‚ETagå’ŒTimestampä¼šç”±Cosmos DBç”Ÿæˆï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è®¾ç½®è¿™äº›ã€‚</p><p id="8bec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¯¹äºæœ¬æ•™ç¨‹ï¼Œæˆ‘å°†ä½¿ç”¨ä¸Šè¿°å±æ€§å’Œä¸¤ä¸ªå­—ç¬¦ä¸²å±æ€§(Emailå’ŒPhoneNumber)æ¥ç»„æˆä¸€ä¸ª<strong class="jl hj"> CustomerEntity </strong>ç±»å‹ã€‚</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="af3d" class="lx kv hi lt b fi ly lz l ma mb">public class CustomerEntity : ITableEntity<br/>{<br/>    public string PartitionKey { get; set ; }<br/>    public string RowKey { get; set; }<br/>    public string Email { get; set; }<br/>    public string PhoneNumber { get; set; }<br/>    public DateTimeOffset? Timestamp { get; set; }<br/>    public ETag ETag { get; set; }<br/>}</span></pre><h1 id="4c73" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">æ·»åŠ å®ä½“â•</h1><p id="c20f" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">è¦å‘æˆ‘ä»¬çš„è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ–°å®ä½“ï¼Œæˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–å®ƒå¹¶ç®€å•åœ°è°ƒç”¨<em class="lr">ã€‚AddEntityAsync() </em>æ–¹æ³•æ¥æ’å…¥å®ƒ:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="82ee" class="lx kv hi lt b fi ly lz l ma mb">CustomerEntity customerEntity = new CustomerEntity()<br/>{<br/>     PartitionKey = "Velida",<br/>     RowKey = "Will",<br/>     PhoneNumber = "0123456789",<br/>     Email = "will@test.com"<br/>};</span><span id="1d81" class="lx kv hi lt b fi me lz l ma mb">await tableClient.AddEntityAsync(customerEntity);</span></pre><p id="e845" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å›åˆ°Cosmos DBä¸­çš„Customersè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ä½“è¢«æˆåŠŸæ’å…¥ã€‚</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/83fae143b732184e2fe09a46e948af62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ECGH4hcsTLtjawge.png"/></div></div></figure><h1 id="aba4" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">æ‰§è¡Œäº‹åŠ¡æ€§æ‰¹å¤„ç†æ“ä½œğŸ’°</h1><p id="8442" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">è¡¨æœåŠ¡å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªæ‰¹å¤„ç†è¯·æ±‚ä¸­è¿›è¡Œå¤šä¸ªæ“ä½œã€‚</p><p id="4110" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">äº‹åŠ¡æ˜¯â€œå…¨æœ‰æˆ–å…¨æ— â€ï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬æ‰¹å¤„ç†ä¸­çš„ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œ<strong class="jl hj">å®ƒä»¬éƒ½å°†å¤±è´¥ï¼</strong>äº‹åŠ¡å¯ä»¥æ··åˆæ‰§è¡Œåˆ›å»ºã€åˆ é™¤ã€æ›´æ–°å’Œæ›´æ–°æ“ä½œã€‚</p><p id="040a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è¯·æ³¨æ„ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½éœ€è¦ä»¥åŒä¸€ä¸ªåˆ†åŒºé”®ä¸ºç›®æ ‡ã€‚</p><p id="105c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘æ­£åœ¨åˆ›å»ºä¸€ä¸ª<em class="lr"> CustomerEntity </em>å¯¹è±¡çš„åˆ—è¡¨ï¼Œæˆ‘å°†æŠŠè¿™äº›å¯¹è±¡ä½œä¸ºä¸€ä¸ªæ‰¹å¤„ç†åˆ›å»ºæ“ä½œæ’å…¥åˆ°æˆ‘çš„è¡¨ä¸­ã€‚</p><p id="4f3f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º<em class="lr"> TableTransactionAction </em>çš„æ–°åˆ—è¡¨ï¼Œå¹¶å°†æˆ‘ä»¬å¸Œæœ›åŒ…å«åœ¨æ‰¹å¤„ç†æ“ä½œä¸­çš„å®ä½“åˆ—è¡¨æ·»åŠ åˆ°å…¶ä¸­ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨<em class="lr">ã€‚SubmitTransactionAsync() </em>æäº¤æ‰¹å¤„ç†æ“ä½œçš„æ–¹æ³•:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="c9fa" class="lx kv hi lt b fi ly lz l ma mb">string partitionKey = "Velida";<br/>List&lt;CustomerEntity&gt; familyList = new List&lt;CustomerEntity&gt;<br/>{<br/>      new CustomerEntity<br/>      {<br/>            PartitionKey = partitionKey,<br/>            RowKey = "Don",<br/>            PhoneNumber = "0987612345"<br/>      },<br/>      new CustomerEntity<br/>      {<br/>            PartitionKey = partitionKey,<br/>            RowKey = "Jane",<br/>            PhoneNumber = "0987612345"<br/>      },<br/>      new CustomerEntity<br/>      {<br/>            PartitionKey = partitionKey,<br/>            RowKey = "Jan",<br/>            PhoneNumber = "0987601298",<br/>            Email = "jan@test.com"<br/>      }<br/>};</span><span id="3604" class="lx kv hi lt b fi me lz l ma mb">List&lt;TableTransactionAction&gt; addFamilyBatch = new List&lt;TableTransactionAction&gt;();</span><span id="6c8a" class="lx kv hi lt b fi me lz l ma mb">addFamilyBatch.AddRange(familyList.Select(f =&gt; new TableTransactionAction(TableTransactionActionType.Add, f)));</span><span id="7b6b" class="lx kv hi lt b fi me lz l ma mb">Response&lt;IReadOnlyList&lt;Response&gt;&gt; response = await tableClient.SubmitTransactionAsync(addFamilyBatch);</span></pre><p id="93d0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å›åˆ°æˆ‘ä»¬çš„è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ä½“å·²ç»æˆåŠŸåœ°æ’å…¥åˆ°æˆ‘ä»¬çš„è¡¨ä¸­:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/46e25f16caac1d3fb4e2186c34950d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B_U-9AxncOAdo8aH.png"/></div></div></figure><h1 id="8915" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">æŸ¥è¯¢æˆ‘ä»¬çš„è¡¨â“</h1><p id="d206" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">æˆ‘ä»¬å¯ä»¥ç”¨å‡ ç§æ–¹æ³•æŸ¥è¯¢è¡¨å­˜å‚¨ä¸­çš„æ•°æ®ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µä½¿ç”¨äº†ä¸€ä¸ªODataè¡¨è¾¾å¼ã€‚</p><p id="1468" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ä½¿ç”¨ODataæŸ¥è¯¢è¿‡æ»¤å™¨å¯èƒ½æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ï¼Œä½†æ˜¯SDKæä¾›äº†ä¸€ä¸ªå¸®åŠ©å™¨åº“ï¼Œä½¿å®ƒå˜å¾—ç¨å¾®å®¹æ˜“ä¸€äº›ã€‚ä½¿ç”¨<em class="lr">ã€‚CreateQueryFilter() </em>ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç¼–å†™æˆ‘ä»¬çš„ODataæŸ¥è¯¢:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="ad5b" class="lx kv hi lt b fi ly lz l ma mb">Pageable&lt;TableEntity&gt; oDataQueryEntities = tableClient.Query&lt;TableEntity&gt;(filter: TableClient.CreateQueryFilter($"PartitionKey eq {partitionKey}"));</span><span id="996e" class="lx kv hi lt b fi me lz l ma mb">foreach (TableEntity entity in oDataQueryEntities)<br/>{<br/>    Console.WriteLine($"{entity.GetString("PartitionKey")}:{entity.GetString("RowKey")}");<br/>}</span></pre><p id="caca" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è¿è¡Œè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„å®ä½“<em class="lr">åˆ†åŒºé”®</em>å’Œ<em class="lr">è¡Œé”®</em>çš„è¿æ¥ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mf"><img src="../Images/c5e3a86f7ff45dc3654a3da87e9f8595.png" data-original-src="https://miro.medium.com/v2/resize:fit:306/format:webp/0*oyP8t5of-iccX5CW.png"/></div></figure><p id="4cc6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨LINQè¡¨è¾¾å¼æ¥æŸ¥è¯¢æˆ‘ä»¬çš„è¡¨ã€‚è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨LINQæŸ¥è¯¢æ¥æ£€ç´¢ä¸€ä¸ª<em class="lr"> CustomerEntity </em>ï¼Œå…¶<em class="lr"> RowKey </em>å€¼ä¸ºâ€œWillâ€:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="2266" class="lx kv hi lt b fi ly lz l ma mb">Pageable&lt;CustomerEntity&gt; linqEntities = tableClient.Query&lt;CustomerEntity&gt;(customer =&gt; customer.RowKey == "Will");</span><span id="b587" class="lx kv hi lt b fi me lz l ma mb">foreach (var entity in linqEntities)<br/>{<br/>     Console.WriteLine($"{entity.RowKey} {entity.PartitionKey}");<br/>}</span></pre><p id="758b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å½“è¿™æ®µä»£ç è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºæ¥çš„å®ä½“:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mg"><img src="../Images/4f0a1f5f33e41f6feaf7519d5f44a335.png" data-original-src="https://miro.medium.com/v2/resize:fit:244/format:webp/0*laBFfRsJV40X7K5J.png"/></div></figure><h1 id="33b3" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">åˆ é™¤å®ä½“âŒ</h1><p id="17a7" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">ä»æˆ‘ä»¬çš„è¡¨ä¸­åˆ é™¤å®ä½“åªæ˜¯ä¸€ä¸ªç®€å•çš„<em class="lr">ã€‚DeleteEntityAsync() </em>è°ƒç”¨ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åƒè¿™æ ·ä¼ å…¥æˆ‘ä»¬çš„<em class="lr">åˆ†åŒºé”®</em>å’Œ<em class="lr">è¡Œé”®</em>å€¼:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="4947" class="lx kv hi lt b fi ly lz l ma mb">await tableClient.DeleteEntityAsync(partitionKey, "Will");</span></pre><p id="ae9b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æ£€æŸ¥æˆ‘ä»¬çš„è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„å®ä½“å·²è¢«æˆåŠŸåˆ é™¤:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/2a4878c90b6d4b32da0cbf634594bef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VGWZXIEBRr-2PfT8.png"/></div></div></figure><h1 id="ea07" class="ku kv hi bd kw kx ky kz la lb lc ld le io lf ip lg ir lh is li iu lj iv lk ll bi translated">åŒ…æ‰</h1><p id="be2e" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">å¸Œæœ›è¯»å®Œè¿™ç¯‡æ–‡ç« åï¼Œä½ èƒ½ç†è§£ä½¿ç”¨Azureã€‚Data.Tables SDKéå¸¸ç®€å•ã€‚æˆ‘å–œæ¬¢Azure SDKå›¢é˜Ÿé‡‡å–çš„ä½¿å…¶SDKå½¼æ­¤æ›´åŠ ä¸€è‡´çš„æ–¹æ³•ã€‚</p><p id="a71d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ä½¿ç”¨å¤©è“è‰²ã€‚Data.Tables SDKï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºåŒæ—¶ä½¿ç”¨Azure Cosmos DBè¡¨å­˜å‚¨å’Œå¸¸è§„è¡¨å­˜å‚¨çš„åº”ç”¨ç¨‹åºï¼Œå› æ­¤å¦‚æœæ‚¨å‘ç°æ‚¨æ­£åœ¨ä½¿ç”¨å¸¸è§„è¡¨å­˜å‚¨æ„å»ºåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”æ‚¨æ­£åœ¨åŠªåŠ›æ‰©å±•ï¼Œæ‚¨å¯ä»¥åˆ‡æ¢åˆ°Cosmos DBï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç æ›´æ”¹ï¼</p><p id="3cd5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºAzureçš„çŸ¥è¯†ã€‚Data.Tables libraryï¼Œçœ‹çœ‹<a class="ae kf" href="https://devblogs.microsoft.com/azure-sdk/announcing-the-new-azure-data-tables-libraries/" rel="noopener ugc nofollow" target="_blank">è¿™ç¯‡åšæ–‡</a>å’Œ<a class="ae kf" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/tables/Azure.Data.Tables/samples" rel="noopener ugc nofollow" target="_blank">è¿™ç¯‡GitHub repo </a>ï¼</p><p id="8d05" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼ä¸€å¦‚æ—¢å¾€ï¼Œå¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºæˆ–åœ¨<a class="ae kf" href="https://twitter.com/willvelida" rel="noopener ugc nofollow" target="_blank"> Twitter </a>ä¸Šé—®æˆ‘ï¼</p><p id="ddfc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ç¼–ç å¿«ä¹ï¼ğŸ’»ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»</p></div></div>    
</body>
</html>