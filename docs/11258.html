<html>
<head>
<title>Android 102 : Why does dagger generate MembersInjector for us?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android 102:ä¸ºä»€ä¹ˆdaggerä¼šä¸ºæˆ‘ä»¬ç”ŸæˆMembersInjectorï¼Ÿ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/android-102-why-does-dagger-generate-membersinjector-for-us-e6e80ae92290?source=collection_archive---------7-----------------------#2022-03-13">https://medium.com/geekculture/android-102-why-does-dagger-generate-membersinjector-for-us-e6e80ae92290?source=collection_archive---------7-----------------------#2022-03-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7fe2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾èµ–æ³¨å…¥ä¾‹å­ç»“æŸäº†ä¸Šä¸€ç¯‡<a class="ae jd" rel="noopener" href="/p/db1300f9ce82"> <strong class="ih hj">æ–‡ç« </strong> </a>ã€‚ç°åœ¨æˆ‘æƒ³é€šè¿‡æ·»åŠ MembersInjectoræ¥ä½¿å®ƒå˜å¾—ç¨å¾®å¤æ‚ä¸€ç‚¹ğŸ˜ˆï¼</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/586c2f59b2fdf21a4bf65e6bbc9c2a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*kuPCY49CG17lMjUTtuYrzQ.jpeg"/></div></figure><p id="a18e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å¼•å…¥äº†MembersInjectorï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¸€æ¬¡æ³¨å…¥ä¸€ä¸ªç±»ä¸­çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªä¾èµ–é¡¹å•ç‹¬æ³¨å…¥ã€‚å³</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="cd31" class="jr js hi jn b fi jt ju l jv jw"><strong class="jn hj">dummy = DaggerDummyComponent.create().getDummy()  &lt;---- not this</strong></span><span id="618f" class="jr js hi jn b fi jx ju l jv jw"><strong class="jn hj">DaggerDummyComponent.create().inject(this)      &lt;---- all at once</strong></span></pre><p id="7632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™å°±æ˜¯MembersInjectorå‡ºç°çš„åŸå› ï¼<br/> <strong class="ih hj"> Daggerä¸ºå°†</strong> <code class="du jy jz ka jn b"><strong class="ih hj">@Inject</strong></code> <strong class="ih hj">åº”ç”¨äºå­—æ®µæˆ–æ–¹æ³•</strong>çš„ç±»ç”Ÿæˆæˆå‘˜æ³¨å…¥å™¨ã€‚å®ƒå°†ç”¨äºä¸€æ¬¡æ³¨å…¥ä»»ä½•ç±»ä¸­çš„æ‰€æœ‰ä¾èµ–é¡¹(å¯¹æˆ‘ä»¬æ¥è¯´è¿™æ˜¯ä¸»è¦æ´»åŠ¨)ã€‚</p><blockquote class="kb kc kd"><p id="38e8" class="if ig ke ih b ii ij ik il im in io ip kf ir is it kg iv iw ix kh iz ja jb jc hb bi translated">åœ¨å®˜æ–¹æ–‡ä»¶ä¸­ä¹Ÿæœ‰å¯¹<strong class="ih hj">æˆå‘˜æ³¨å…¥å™¨</strong>çš„å®šä¹‰:</p><p id="2f74" class="if ig ke ih b ii ij ik il im in io ip kf ir is it kg iv iw ix kh iz ja jb jc hb bi translated"><strong class="ih hj">æˆå‘˜æ³¨å…¥æ–¹æ³•</strong>æ˜¯ç»„ä»¶ä¸Šçš„<code class="du jy jz ka jn b">void</code>æ–¹æ³•ï¼Œæ¥å—ç‰¹å®šç±»å‹çš„å‚æ•°ï¼Œå…è®¸Daggerè®¾ç½®å…¶<code class="du jy jz ka jn b">@Inject</code>æ³¨é‡Šçš„å­—æ®µå¹¶è°ƒç”¨å…¶<code class="du jy jz ka jn b">@Inject</code>æ³¨é‡Šçš„æ–¹æ³•ã€‚</p></blockquote><p id="1e4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ€»ä¹‹ï¼Œè¿™ä¸ªç¤ºä¾‹daggerç”Ÿæˆäº†ä¸€ä¸ª<strong class="ih hj">member injector</strong>ä»¥åŠæˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å·²ç»è®¨è®ºè¿‡çš„ä¸¤ä¸ªç±»ï¼Œå³<strong class="ih hj"> DaggerDummyComponent </strong>å’Œ<strong class="ih hj"> DummyFactoryã€‚</strong></p><p id="e4bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ˜¯å¸¦æœ‰æ³¨å…¥å‡½æ•°å…¥å£ç‚¹çš„ç»„ä»¶ã€‚</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="1b15" class="jr js hi jn b fi jt ju l jv jw">@Component<br/>@Singleton<br/><strong class="jn hj">interface DummyComponent {<br/>    fun inject(activity: MainActivity)<br/>}</strong></span></pre><p id="022f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å’Œç”Ÿæˆçš„daggerç»„ä»¶ä»£ç ã€‚</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="a795" class="jr js hi jn b fi jt ju l jv jw">@DaggerGenerated<br/><strong class="jn hj">public final class DaggerDummyComponent implements DummyComponent {<br/></strong>  private final DaggerDummyComponent dummyComponent = this;<br/><br/>  private Provider&lt;Dummy&gt; dummyProvider;<br/><br/>  private DaggerDummyComponent() {<br/>    initialize();<br/>  }<br/><br/>  public static Builder builder() {<br/>    return new Builder();<br/>  }<br/><br/>  public static DummyComponent create() {<br/>    return new Builder().build();<br/>  }<br/><br/>  @SuppressWarnings("unchecked")<br/>  private void initialize() {<br/>    dummyProvider = <strong class="jn hj">DoubleCheck</strong>.<em class="ke">provider</em>(Dummy_Factory.<em class="ke">create</em>());<br/>  }</span><span id="fc00" class="jr js hi jn b fi jx ju l jv jw">  <strong class="jn hj">// We get one such overriden method for each binding we declare<br/>  </strong>@Override<br/>  public void inject(MainActivity activity) {<br/>    injectMainActivity(activity);<br/>  }<br/><br/>  private MainActivity injectMainActivity(MainActivity instance) {<br/>    MainActivity_MembersInjector.<em class="ke">injectDummy</em>(instance,             <br/>                                         dummyProvider.get());<br/>    return instance;<br/>  }<br/><br/>  public static final class Builder {<br/>    private Builder() {<br/>    }<br/><br/>    public DummyComponent build() {<br/>      return new DaggerDummyComponent();<br/>    }<br/>  }<br/>}</span></pre><p id="3d92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç”±äºæˆ‘ä»¬å·²ç»ä»¥ä¸»æ´»åŠ¨æœ¬èº«çš„å½¢å¼å®šä¹‰äº†ä¸€ä¸ªç»‘å®šï¼Œæ‰€ä»¥ç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªmembersInjectorç±»æ¥è·å–ä¸»æ´»åŠ¨ä¸­æ³¨å…¥çš„ä¾èµ–é¡¹</p><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="c61b" class="jr js hi jn b fi jt ju l jv jw">public final class MainActivity_MembersInjector implements MembersInjector&lt;MainActivity&gt; {<br/>  <strong class="jn hj">// We will get one such factory for each dependency,  <br/>  // Injected inside the mainActivity</strong><br/>  private final Provider&lt;Dummy&gt; dummyProvider;<br/><br/> public MainActivity_MembersInjector(Provider&lt;Dummy&gt; dummyProvider){<br/>    this.dummyProvider = dummyProvider;<br/>  }<br/><br/>  public static MembersInjector&lt;MainActivity&gt; create(Provider&lt;Dummy&gt; dummyProvider) {<br/>    return new MainActivity_MembersInjector(dummyProvider);<br/>  }</span><span id="f99f" class="jr js hi jn b fi jx ju l jv jw">  @Override<br/>  public void injectMembers(MainActivity instance) {<br/>    <em class="ke">injectDummy</em>(instance, dummyProvider.get());<br/>    <strong class="jn hj">// we can have more injected members here</strong><br/>  }<br/><br/> @InjectedFieldSignature("com.example.dagger_demo.MainActivity.dummy)<br/> public static void injectDummy(MainActivity instance, Dummy dummy){<br/>    instance.dummy = dummy;<br/>  }<br/>}</span></pre><p id="70c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼</p><ol class=""><li id="b51f" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated">å½“æˆ‘ä»¬åœ¨lateinitå˜é‡æˆ–ä»»ä½•ç±»ä¸­çš„ä»»ä½•æ–¹æ³•ä¸Šæ·»åŠ <strong class="ih hj"> @inject </strong>æ³¨é‡Šæ—¶ï¼ŒDaggerä¼šä¸ºç±»æœ¬èº«ç”Ÿæˆä¸€ä¸ª<strong class="ih hj">member insjector</strong>ã€‚è¯¥ç±»ä¸­åˆå§‹åŒ–äº†ä¾èµ–å…³ç³»çš„æ‰€æœ‰å·¥å‚ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç±»æ˜¯ä¸»æ´»åŠ¨ï¼Œæ³¨å…¥çš„ä¾èµ–é¡¹æ˜¯Dummyç±»å‹çš„ã€‚</li><li id="adf5" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">DaggerçŸ¥é“è¿™ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„ç»„ä»¶å…¥å£ç‚¹æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸è¿”å›ä»»ä½•ä¸œè¥¿ï¼Œå¹¶ä¸”æ¥å—ä¸€ä¸ªå‚æ•°ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“æ‚¨å°†mainActivityä¼ é€’ç»™injectæ–¹æ³•æ—¶ï¼ŒDaggerå°†è®¾ç½®ä»»ä½•<code class="du jy jz ka jn b">@Inject</code>å­—æ®µå¹¶è°ƒç”¨å…¶ä¸Šçš„ä»»ä½•<code class="du jy jz ka jn b">@Inject</code>æ–¹æ³•ã€‚</li><li id="dc0b" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">è¿™æ˜¯ä»€ä¹ˆ<strong class="ih hj">åŒé‡æ£€æŸ¥ï¼Ÿå¦‚æœæˆ‘ä»¬ä½¿ç”¨åƒ<strong class="ih hj"> @singletonè¿™æ ·çš„ä½œç”¨åŸŸæ³¨é‡Šï¼Œå®ƒæ€»æ˜¯åœ¨ç”Ÿæˆçš„ç»„ä»¶å®ç°ä¸­å¼¹å‡ºã€‚</strong></strong></li></ol><pre class="jf jg jh ji fd jm jn jo jp aw jq bi"><span id="f840" class="jr js hi jn b fi jt ju l jv jw">private void initialize() {<br/>  this.dummyProvider = DoubleCheck.<em class="ke">provider</em>(Dummy_Factory.<em class="ke">create</em>());<br/>}</span></pre><p id="0efd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘æƒ³å†™ç‚¹ä»€ä¹ˆï¼Œä½†æ˜¯çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œè¿™ç¯‡æ–‡ç« è§£é‡Šäº†æˆ‘æƒ³å†™çš„ä¸€åˆ‡ï¼Œæ‰€ä»¥å› ä¸ºæ‡’ï¼Œæˆ‘æ²¡æœ‰å†™ğŸ‘€ã€‚</p><p id="768a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨dagger <a class="ae jd" href="https://saurabhofficial.medium.com/android-101-what-does-dagger-really-generate-behind-the-scenes-db1300f9ce82" rel="noopener">çš„æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬åªè®¨è®ºäº†æ‹¥æœ‰@injectæ³¨é‡Šæ„é€ å‡½æ•°çš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¸éœ€è¦ä¸€ä¸ªæ¨¡å—æ¥æŒ‡å®šå¦‚ä½•æ„é€ ä¸€ä¸ªå¯¹è±¡ã€‚<br/>ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦æ±‚æ³¨å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰è®¿é—®å®ƒçš„æ„é€ å‡½æ•°çš„æƒé™ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸æ˜¯ä¸€äº›å¤–éƒ¨åº“ç±»ï¼Ÿ<br/>è¿™æ—¶å€™æ¨¡å—è¿›å…¥äº†ğŸ¥³.çš„æ´¾å¯¹</p><p id="1b0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†åœ¨å¦ä¸€ç¯‡æ–‡ç« <a class="ae jd" href="https://saurabhofficial.medium.com/android-103-how-is-constructor-injection-different-from-provides-method-in-dagger-66ff0209ebb3" rel="noopener">ä¸­æŸ¥çœ‹å®ƒä»¬</a></p><p id="46fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¾ˆæœ‰è§åœ°ï¼Œè¯·ç»™æˆ‘ä¸€ä¸ªæŒå£°ğŸ˜„ï¼Œå¿«ä¹é˜…è¯»ï¼</p></div></div>    
</body>
</html>