# å¸å–çš„æ•™è®­:å–æ ·å¯¹ç›‘æµ‹çš„å½±å“

> åŸæ–‡ï¼š<https://medium.com/geekculture/lesson-learned-the-sampling-impact-on-monitoring-cb454deeda88?source=collection_archive---------10----------------------->

![](img/f0abe9830d02c58095183ec68bdc64fa.png)

ä»Šå¤©ï¼Œæˆ‘æƒ³ä»‹ç»ä¸€ä¸‹æ‚¨åœ¨æ—¥å¸¸ç›‘æ§å›¾è¡¨ä¸­ä½¿ç”¨çš„æŒ‡æ ‡å¯èƒ½ä¼šå¯¹æ‚¨äº§ç”Ÿçš„å½±å“ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œè®°å¾—é¼“æŒå¹¶è®¢é˜…ï¼Œæˆ‘çœŸçš„å¾ˆæ„Ÿæ¿€ï¼

æœ¬æ–‡ä¸­ä½¿ç”¨çš„æŠ€æœ¯:

*   åº“ä¼¯å†…ç‰¹æ–¯
*   æ–°é—è¿¹(ç±»ä¼¼æ™®ç½—ç±³ä¿®æ–¯æˆ–æ•°æ®ç‹—)

æˆ‘çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æ»¡è¶³ç‰¹å®šå·¥ä½œè´Ÿè½½æ‰€éœ€çš„é€‚å½“æ•°é‡çš„å‰¯æœ¬/èµ„æº(å†…å­˜å’Œ cpu)ã€‚æˆ‘ä¸ä¼šè®¨è®ºå¦‚ä½•è°ƒä¼˜ pod æˆ– HPA/VPAï¼Œå› ä¸ºæ²¡æœ‰ç¥å¥‡çš„æ–¹æ³•æ¥å¾®è°ƒæ‚¨çš„å·¥ä½œè´Ÿè½½ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨ä¸‰ä¸ªæŒ‡æ ‡ï¼Œå®ƒä»¬ä¼šåœ¨æ‚¨å—åˆ°é‡‡æ ·å½±å“æ—¶çªå‡ºæ˜¾ç¤º:

*   è¾“å…¥æµé‡â€”åœ¨æˆ‘çš„æµ‹è¯•ä¸­ä¿æŒä¸å˜
*   å‰¯æœ¬æ•°é‡
*   äº¤æ˜“æ•°é‡

![](img/1f47723aebcdf14fb8cf73485cf06aa6.png)

ä»è¿™å¼ å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæœ‰å››ä¸ªé˜¶æ®µ:

*   20 ä¸ªå‰¯æœ¬ï¼Œ12 ä¸‡ä¸ªäº‹åŠ¡
*   10 ä¸ªå‰¯æœ¬ï¼Œ6 ä¸‡ä¸ªäº‹åŠ¡
*   5 ä¸ªå‰¯æœ¬ï¼Œ3 ä¸‡ä¸ªäº‹åŠ¡
*   çŒ«è€³æœµå¤åˆ¶å“[ğŸˆ](https://emojipedia.org/cat/)

è¿™ç§è¡Œä¸ºå®Œå…¨æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºè¾“å…¥æµé‡åœ¨å­˜åœ¨æ—¶åŸºæœ¬ä¸Šæ˜¯æ’å®šçš„ã€‚

å› æ­¤ï¼Œä»”ç»†è§‚å¯Ÿç»˜åˆ¶çš„æŒ‡æ ‡:

```
Select rate(count(*), 1 second) from Transaction where containerName = 'pod-under-test' FACET containerName  TIMESERIES MAX LIMIT MAX
```

æµè§ˆæ–‡æ¡£å‡ åˆ†é’Ÿåï¼Œæˆ‘ç»ˆäºå‘ç°äº†æ˜¯æ€ä¹ˆå›äº‹:

![](img/9ae7dde05cb594016277e922a6fa1167.png)

[https://docs.newrelic.com/docs/data-apis/understand-data/event-data/new-relic-event-limits-sampling/#impact](https://docs.newrelic.com/docs/data-apis/understand-data/event-data/new-relic-event-limits-sampling/#impact)

> æœ‰ä¸Šé™ä¸”éœ€è¦æŠ½æ ·äº‹ä»¶åŒ…æ‹¬:
> -äº¤æ˜“

ğŸ‰ ğŸ‰ ğŸ‰ ğŸ‰ ğŸ‰
åœ¨é«˜æµé‡çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ª pod å‘é€çš„æ ·æœ¬æ•°é‡éƒ½è¾¾åˆ°äº† New Relic APM ä»£ç†ä¸­é»˜è®¤é…ç½®çš„æœ€å¤§æ•°é‡ã€‚

æ‰€ä»¥ï¼Œè¿™ç§è¡Œä¸ºæ˜¯ç”±äºæ„å¤–çš„é‡‡æ ·å’Œå…·æœ‰æ„å¤–å«ä¹‰çš„å›¾å½¢ã€‚

# å¸å–çš„æ•™è®­:

*   å§‹ç»ˆéªŒè¯æ‚¨æ­£åœ¨ä½¿ç”¨çš„æŒ‡æ ‡ã€‚
*   ä¸è¦ç»˜åˆ¶æŠ½æ ·æŒ‡æ ‡ï¼Œä»¥é¿å…é”™è¯¯çš„ç»“è®ºã€‚

æˆ‘å¸Œæœ›ä½ èƒ½ä»è¿™ç¯‡åšæ–‡ä¸­å¾—åˆ°ä¸€äº›å¸®åŠ©ï¼Œå¹¶æ”¯æŒæˆ‘ã€‚ä½ å¯ä»¥åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨å†…è·å¾—æ›´å¤šä¿¡æ¯ï¼

![](img/5e942234f579c9081df2fc372dab8480.png)

> [å…³æ³¨æˆ‘](https://pie-r.medium.com/)å’Œ[è®¢é˜…](https://pie-r.medium.com/subscribe)æ¥è·å–è¿™ä¸ªç³»åˆ—å’Œä¸‹ä¸€ä¸ªç³»åˆ—çš„æ›´æ–°ï¼

![](img/e7f0083d2d403fddee9b0b2ae88dc120.png)

Photo by [River Fx](https://unsplash.com/@musicfox?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)