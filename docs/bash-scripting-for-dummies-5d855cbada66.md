# é¢å‘å‚»ç“œçš„ Bash è„šæœ¬

> åŸæ–‡ï¼š<https://medium.com/geekculture/bash-scripting-for-dummies-5d855cbada66?source=collection_archive---------7----------------------->

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç» bash è„šæœ¬çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™æ ·åœ¨æ–‡ç« ç»“æŸæ—¶ï¼Œæ‚¨å°†ä¼šäº†è§£å®ƒçš„å«ä¹‰ä»¥åŠå¦‚ä½•æ ¹æ®è‡ªå·±çš„éœ€è¦ä½¿ç”¨å®ƒ

![](img/dca2ef17903c34ae1ab8097dc0c983a3.png)

**ç†è§£ç—›å‡»**

å› æ­¤ï¼Œshell æ˜¯ä¸€ä¸ªå…è®¸æˆ‘ä»¬é€šè¿‡å‘å¸ƒå‘½ä»¤ç›´æ¥ä¸å†…æ ¸äº¤äº’çš„å®ç”¨ç¨‹åºï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œè¿™ä¸ª shell æœ‰å¤šç§â€œé£æ ¼â€ï¼Œå¯ä»¥å……å½“ ***ç¯å¢ƒ***

è¿™æ ·æ¥è€ƒè™‘ä¸€ä¸ªç¯å¢ƒï¼ŒMS PowerPoint æ˜¯ä¸€ä¸ªåˆ¶ä½œå’Œæ˜¾ç¤ºæ¼”ç¤ºå¹»ç¯ç‰‡çš„ç¯å¢ƒï¼Œä¾‹å¦‚ï¼Œä½ ä¸èƒ½åœ¨å¦ä¸€ä¸ªè½¯ä»¶å¦‚è®¡ç®—å™¨ä¸­æŸ¥çœ‹è¿™äº›å¹»ç¯ç‰‡

ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œshell æ˜¯ä¸€ä¸ªç›´æ¥è¿è¡Œå‘½ä»¤çš„ç¯å¢ƒï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ GUI æ–¹å¼çš„ç‚¹å‡»å’Œæ‹–åŠ¨ï¼Œå°±åƒæˆ‘è¯´çš„ï¼Œè¿™å¯¹äºè‡ªåŠ¨åŒ–å’Œç”Ÿäº§åŠ›æ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿

å…¶ä»–å¤–å£³åŒ…æ‹¬:-

*   python:æ˜¯çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ª ***äº¤äº’å¼ python shell*** è¿™æ„å‘³ç€å®ƒåªè¿è¡Œ Python å‘½ä»¤
*   zsh:ä¹Ÿæ˜¯è®¸å¤š Linux å‘è¡Œç‰ˆä¸­çš„å¦ä¸€ä¸ª shell ç¯å¢ƒ
*   Powershell:åŸºäº Windows çš„ shell ç¯å¢ƒ

**ç—›å‡»è¿˜æ˜¯ä¸ç—›å‡»**

å› æ­¤ï¼Œä¸€ä¸ªéå¸¸å¸¸è§çš„é—®é¢˜å¯èƒ½æ˜¯â€œæˆ‘ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ bashï¼Œä¸ºä»€ä¹ˆâ€ï¼Œä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªçœŸå®çš„åœºæ™¯ï¼Œä½ æ˜¯ä¸€ä¸ªæœ‰é“å¾·çš„é»‘å®¢/ pentesterï¼Œä½ çš„ä»»åŠ¡æ˜¯æ‰«æä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç‰¹å®šæœåŠ¡çš„ç½‘ç»œ(æ¯”å¦‚ ssh ),å¹¶å°è¯•ä½¿ç”¨é»˜è®¤å‡­è¯å¼ºè¡Œè¿›å…¥ï¼Œä½ æ‰“ç®—å¦‚ä½•æ‰‹åŠ¨å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ

shell è„šæœ¬çš„å¼ºå¤§ä¹‹å¤„å°±åœ¨è¿™é‡Œï¼Œç”±äº linux ä¸­å¼ºå¤§çš„å†…ç½®å‘½ä»¤è¡Œå·¥å…·çš„å­˜åœ¨ï¼Œè¿™ä¸ªä»»åŠ¡å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„è„šæœ¬éå¸¸å®¹æ˜“åœ°å®Œæˆï¼Œå¯ä»¥èŠ‚çœæ‚¨å¤§é‡çš„æ—¶é—´

å…¶ä»–ç”¨é€”åŒ…æ‹¬:-

*   ä½¿ç”¨`ssmtp`è‡ªåŠ¨å‘é€å•†åŠ¡ç”µå­é‚®ä»¶
*   ä» API è·å–æ•°æ®ï¼Œé€šè¿‡ç”µå­é‚®ä»¶å‘é€æˆ–ä¿å­˜åˆ°ç›®å½•ä¸­
*   å®šæœŸå¤‡ä»½æ–‡ä»¶
*   ä¸æ‚¨å®‰è£…çš„å…¶ä»–å¼ºå¤§å·¥å…·é›†æˆ
*   è¿™ä¸ªåå•è¿˜å¯ä»¥ç»§ç»­ä¸‹å»

**å…ˆå†³æ¡ä»¶**

åŸºæœ¬çš„ Linux çŸ¥è¯†æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæˆ‘ä¸ä¼šçœŸçš„ä»”ç»†æ£€æŸ¥æ¯ä¸€ä¸ªå‘½ä»¤ï¼Œæ‰€ä»¥è¦æé«˜ä½ çš„å‘½ä»¤è¡ŒæŠ€èƒ½ï¼Œç†Ÿæ‚‰åŸºæœ¬çš„å‘½ä»¤

**å¤Ÿæ¿€åŠ¨äº†å§ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹æŠ¨å‡»**

è¦å¼€å§‹ç¼–å†™è„šæœ¬ï¼Œé¦–å…ˆéœ€è¦å®šä½ bash çš„ä½ç½®ï¼Œä¸ºæ­¤åªéœ€è¿è¡Œ`which bash`,å®ƒå°±ä¼šè¿”å›è·¯å¾„

åœ¨ä½ æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œåœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œå®ƒåªæ˜¯ nanoï¼Œå› ä¸ºæˆ‘ä»¬åšçš„ä¸å¤šï¼Œé”®å…¥è¿™ä¸ªéå¸¸ç®€å•çš„ bash è„šæœ¬ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸º`hello.sh`

```
#! /usr/bin/bashecho "hello world"
```

ç°åœ¨è¦è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä½¿å®ƒå¯æ‰§è¡Œï¼Œæ‰€ä»¥`chmod +x hello.sh`ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¾“å…¥`./hello.sh`ï¼Œåº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªâ€œhello worldâ€æ‰“å°åˆ°å±å¹•ä¸Š

**BASH ä¸­çš„å˜é‡**

è¦å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œåªéœ€ç»™å®ƒå‘½åå¹¶èµ‹å€¼ï¼Œå°±åƒè¿™æ ·ï¼Œä¸ºäº†å¼•ç”¨å®ƒï¼Œæˆ‘ä»¬åœ¨å˜é‡åå‰ä½¿ç”¨ç¾å…ƒç¬¦å·

```
#! /usr/bin/bash
name="mark"
echo $name 
```

**å‘æˆ‘ä»¬çš„è„šæœ¬ä¼ é€’å‚æ•°**

å¦‚æœæ‚¨å·²ç»ç¼–å†™äº†è¶³å¤Ÿé•¿çš„ç¨‹åºå¹¶ä¸‹è½½äº†å·¥å…·ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»ç†Ÿæ‚‰äº†å°†å‚æ•°ä¼ é€’ç»™è¦ä½¿ç”¨çš„è„šæœ¬ï¼Œè¿™æ˜¯å¤§å¤šæ•°å‘½ä»¤è¡Œå·¥å…·ä¸­çš„ä¸€ä¸ªåŸºæœ¬åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ä¼ é€’è¿™äº›å‚æ•°å¹¶å°†å…¶å›æ˜¾ï¼Œè¿™åªæ˜¯ä¸ºäº†è¿›è¡Œæ¼”ç¤º

```
#! /usr/bin/bash
echo $1
echo $2
echo $3
# this is a comment btw
# another syntax is
for i in "$@"
do
  echo "$i"
done 
# more on this stuff later
```

**BASH ä¸­çš„ç”¨æˆ·è¾“å…¥**

è·å–ç”¨æˆ·è¾“å…¥å¹¶å°†å…¶ç›´æ¥èµ‹ç»™å˜é‡çš„æœ€ä½³æ–¹å¼å¦‚ä¸‹

```
#! /usr/bin/bashread -p "enter your age: " age
echo "you entered $age"
```

**é€»è¾‘è¿ç®—ç¬¦**

Bash è¿›è¡Œé€»è¾‘æ¯”è¾ƒçš„æ–¹å¼æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥è¯·åšæŒä½¿ç”¨è¿™äº›æ³¨é‡Š

1.  ä½¿ç”¨åŒæ–¹æ‹¬å·æˆ–å•æ–¹æ‹¬å·[[]]ï¼Œå› ä¸ºå®ƒä½¿æ‚¨èƒ½å¤Ÿä½¿ç”¨å¼ºå¤§çš„è¿ç®—ç¬¦
2.  ä½¿ç”¨å•åŒ(( ))ä»¥ä¾¿ä½¿ç”¨é€šå¸¸çš„=ï¼Œï¼=ï¼Œ>ï¼Œ
3.  ALWAYSSSS leave a little space on both ends of square brackets and {}- for example

```
if [[ "$name" == "adam" ]]
then
   echo "hi adam we missed you"
else
   echo "welcome $name"
fi
```

Personally that advice saved me tons of time figuring out why is my script not running

4\. ALWAYSSSS use double quotes when comparing variables

```
[[ -e "$file" ]] # True if file exists
[[ -d "$file" ]] # True if file exists and is a directory
[[ -f "$file" ]] # True if file exists and is a regular file
[[ -z "$str" ]]  # True if string is of length zero
[[ -n "$str" ]]  # True is string is not of length zero

# Compare Strings
[[ "$str1" == "$str2" ]]
[[ "$str1" != "$str2" ]]

# Integer Comparisions
[[ "$int1" -eq "$int2" ]] # $int1 == $int2
[[ "$int1" -ne "$int2" ]] # $int1 != $int2
[[ "$int1" -gt "$int2" ]] # $int1 > $int2
[[ "$int1" -lt "$int2" ]] # $int1 < $int2
[[ "$int1" -ge "$int2" ]] # $int1 >= $int2
[[ "$int1" -le "$int2" ]] # $int1 <= $int2
```

Taken from this [æƒŠäººçš„æ¥æº](https://dev.to/godcrampy/the-missing-shell-scripting-crash-course-37mk)æ‰€ä»¥æ‰€æœ‰çš„åŠŸåŠ³éƒ½å½’äºä»–â™¥ï¸

**æ¡ä»¶å’Œå¾ªç¯**

*   ç®€å•`for loop`

```
for (i=0; i<10; i++)
do
   echo "current number $i"
done
```

*   ä¸€ä¸ªå¸¦æœ‰å·§å¦™æ•°ç»„è¯­æ³•çš„`for in`å¾ªç¯ğŸ‘€

```
for i in {1..20}
do
  echo "current iteration $i"
done
```

*   `while`å¾ªç¯

```
i=10while [[ "$i" -ge 1 ]]
do
    echo "current iteration: $i"
done
```

*   `until`å¾ªç¯

```
i=1
until [[ "$i" -eq 10 ]]
do
  echo "unitl $i"
  ((i++))
done 
```

**BASH ä¸­çš„æ•°ç»„**

ç¼–ç¨‹ä¸­æœ€å¸¸è§çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œå› ä¸ºå®ƒä»¬å…è®¸æˆ‘ä»¬ä¸€æ¬¡å­˜å‚¨å¤šä¸ªå€¼ï¼Œä¸åƒå˜é‡

è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œä»¥åŠå¦‚ä½•è¿­ä»£å®ƒ

```
names=(jake mark john bob alice)
```

ä½¿ç”¨åœ†æ‹¬å·å£°æ˜æ•°ç»„ï¼Œä¸ä½¿ç”¨é€—å·åˆ†éš”å…ƒç´ ï¼Œç”šè‡³åœ¨å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ä¸ä½¿ç”¨åŒå¼•å·/å•å¼•å·

**ä¸ºäº†è®¿é—®ä¸€ä¸ªæ•°ç»„å…ƒç´ **ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™æ ·çš„å…ƒç´ ç´¢å¼•â€œ${colors[1]}â€ï¼Œå› ä¸º@ç¬¦å·åœ¨ bash ä¸­è¡¨ç¤ºâ€œæ‰€æœ‰â€ï¼Œæ‰€ä»¥**æˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼è¿­ä»£ä¸€ä¸ªæ•°ç»„**

```
for i in "${colors[@]}"
do
    echo "$i"
done
```

**æœ€ååŠŸèƒ½**

å‡½æ•°æ˜¯æ‚¨å¸Œæœ›å¤šæ¬¡æ‰§è¡Œçš„ä»£ç å—ï¼Œå› æ­¤æ‚¨ä¸å¿…ä¸€éåˆä¸€éåœ°ç¼–å†™å®ƒï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨éœ€è¦æ—¶é€šè¿‡åç§°è°ƒç”¨å®ƒ

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¿«é€Ÿçš„å°å‡½æ•°æ¥æ¬¢è¿ä»»ä½•è¾“å…¥ä»–ä»¬åå­—çš„äºº

**ç»“è®º**

Bash è„šæœ¬æ˜¯ä¸€ç§åœ¨ Linux ä¸Šè‡ªåŠ¨åŒ–ä»»åŠ¡çš„å¼ºå¤§æ–¹æ³•ï¼Œå¯ä»¥ä»¥æ— é™çš„æ–¹å¼ä½¿ç”¨ï¼Œå¹¶æé«˜ç”Ÿäº§ç‡ã€‚å¦‚æœæ‚¨æ‰“ç®—æˆä¸ºä¸€åæœ‰é“å¾·çš„é»‘å®¢æˆ–ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæˆ–è€…åªæ˜¯æƒ³è‡ªåŠ¨åŒ–å•è°ƒä¹å‘³çš„ä»»åŠ¡ï¼ŒæŒæ¡å®ƒçš„åŸºæœ¬çŸ¥è¯†æ˜¯å¾ˆé‡è¦çš„ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä»¥åçš„åšå®¢ä¸­æ¢ç´¢æ›´å¤šï¼Œå¹¶åˆ©ç”¨å®ƒæ„å»ºæœ‰è¶£çš„å·¥å…·

éå¸¸æ„Ÿè°¢ä½ é˜…è¯»â™¥ï¸