<html>
<head>
<title>Pod Security Admission Controller â€” Namespace Level</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨â€”åç§°ç©ºé—´çº§åˆ«</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/pod-security-admission-controller-namespace-level-52158281d918?source=collection_archive---------2-----------------------#2022-12-24">https://medium.com/geekculture/pod-security-admission-controller-namespace-level-52158281d918?source=collection_archive---------2-----------------------#2022-12-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d066" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">å¦‚ä½•åœ¨å‘½åç©ºé—´çº§åˆ«åº”ç”¨podå®‰å…¨æ€§æ¦‚è¿°</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/f15a3efbfb5974b7e6c28010aad0992a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7DhVxBWLKw_5M_jP"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">Photo by <a class="ae jn" href="https://unsplash.com/@alinnnaaaa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alina Grubnyak</a> on <a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="4d56" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">å‡†å…¥æ§åˆ¶å™¨</h2><p id="4ddc" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">ä¸€ä¸ª<a class="ae jn" href="https://faun.pub/kubernetes-admission-controller-2913a5b3d0c1" rel="noopener ugc nofollow" target="_blank"> <strong class="ko hj"> <em class="lf">å‡†å…¥æ§åˆ¶å™¨</em> </strong> </a> <strong class="ko hj"> <em class="lf"> </em> </strong>æ˜¯ä¸€æ®µä»£ç ï¼Œå®ƒåœ¨å¯¹è±¡æŒä¹…åŒ–ä¹‹å‰ï¼Œä½†æ˜¯åœ¨è¯·æ±‚è¢«è®¤è¯å’Œæˆæƒä¹‹åï¼Œæ‹¦æˆªå¯¹Kubernetes APIæœåŠ¡å™¨çš„è¯·æ±‚ã€‚<br/>äº†è§£æ›´å¤šâ€” <strong class="ko hj"> </strong> <a class="ae jn" href="https://faun.pub/kubernetes-admission-controller-2913a5b3d0c1" rel="noopener ugc nofollow" target="_blank"> <strong class="ko hj">å…¥é™¢æ§åˆ¶å™¨</strong> </a></p><h2 id="1989" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Podå®‰å…¨ç­–ç•¥â†’ Podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨</h2><p id="0700" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">ä¹‹å‰æœ‰<strong class="ko hj"> PodSecurityPolicy (PSP) </strong>ä½†æ˜¯ä»Kubernetes v1.21å¼€å§‹ï¼Œ<strong class="ko hj"> PodSecurityPolicy </strong>è¢«<a class="ae jn" href="https://kubernetes.io/blog/2021/04/08/kubernetes-1-21-release-announcement/#podsecuritypolicy-deprecation" rel="noopener ugc nofollow" target="_blank">å¼ƒç”¨</a>å¹¶ä¸”<strong class="ko hj">åœ¨<strong class="ko hj"> v1.25 </strong>ä¸­ä»Kubernetesä¸­ç§»é™¤</strong>ã€‚</p><p id="39d3" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated"><strong class="ko hj">ä»1.23ç‰ˆå¼€å§‹â†’ </strong>é»˜è®¤å¯ç”¨PodSecurityå‡†å…¥åŠŸèƒ½ã€‚1.23ç‰ˆä¹‹å‰çš„<br/><strong class="ko hj">â†’</strong>éœ€è¦æ‰‹åŠ¨å¯ç”¨PodSecuirtyè®¸å¯ã€‚</p><h2 id="da95" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨ç›¸å¯¹äºPodå®‰å…¨ç­–ç•¥å‡†å…¥æ§åˆ¶å™¨çš„ä¼˜åŠ¿</h2><p id="8c11" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">PSPçš„ä¸€ä¸ªé—®é¢˜æ˜¯å¾ˆéš¾åœ¨ç²’åº¦çº§åˆ«ä¸Šç”³è¯·é™åˆ¶æ€§æƒé™ï¼Œå› æ­¤ä¸å¯é¿å…åœ°å¢åŠ äº†å®‰å…¨é£é™©ã€‚å½“åˆ›å»ºpodçš„è¯·æ±‚è¢«æäº¤åˆ°é›†ç¾¤æ—¶ï¼ŒPSPè¢«åº”ç”¨ï¼Œæ²¡æœ‰åŠæ³•å°†PSPåº”ç”¨åˆ°å·²ç»åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„podã€‚</p><p id="68c1" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨æ¥ä»£æ›¿PSPå‡†å…¥æ§åˆ¶å™¨ã€‚å®ƒå¯ä»¥åº”ç”¨äºå‘½åç©ºé—´çº§åˆ«ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºé›†ç¾¤çº§åˆ«ã€‚</p><p id="b1ce" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">Podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨ä½¿ç”¨Podå®‰å…¨æ ‡å‡†ï¼Œå¯å‡è®¾ä¸ºä¸‰ç§ç²¾ç¡®é¢„å®šä¹‰çš„Podå®‰å…¨ç­–ç•¥(<em class="lf">ç‰¹æƒã€åŸºçº¿ã€</em>å’Œ<em class="lf">å—é™</em>)ã€‚</p><p id="7e15" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•é€šè¿‡åˆ©ç”¨podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨åœ¨åç§°ç©ºé—´çº§åˆ«ä¸Šåº”ç”¨podå®‰å…¨æ ‡å‡†ã€‚</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h2 id="a544" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">åœ¨å‘½åç©ºé—´çº§åˆ«åº”ç”¨Podå®‰å…¨æ€§</h2><p id="8f99" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">æ­£å¦‚æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åç§°ç©ºé—´çº§åˆ«åº”ç”¨podå®‰å…¨æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨åç§°ç©ºé—´å®šä¹‰ä¸­æ·»åŠ ä¸€äº›æ ‡ç­¾ï¼Œä»¥ä¾¿ä¸€ä¸ªåç§°ç©ºé—´èƒ½å¤Ÿå“åº”æˆ‘ä»¬çš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯å°†é™„åŠ åˆ°æˆ‘ä»¬çš„åç§°ç©ºé—´çš„æ ‡ç­¾ã€‚</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="f495" class="jo jp hi lt b fi lx ly l lz ma"># Mandatory<br/>pod-security.kubernetes.io/<strong class="lt hj">&lt;MODE&gt;</strong>: <strong class="lt hj">&lt;LEVEL&gt; </strong></span><span id="9c28" class="jo jp hi lt b fi mb ly l lz ma"># Optional     <strong class="lt hj">   </strong><br/>pod-security.kubernetes.io/<strong class="lt hj">&lt;MODE&gt;</strong>-version: <strong class="lt hj">&lt;VERSION&gt;</strong></span></pre><p id="d1cb" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">ä¸ºäº†åœ¨ç‰¹å®šçš„åç§°ç©ºé—´ä¸Šå¯ç”¨podå®‰å…¨æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥é™„åŠ ä¸¤ä¸ªæ ‡ç­¾ã€‚ä¸€ä¸ªæ˜¯å¼ºåˆ¶çš„ï¼Œå¦ä¸€ä¸ªæ˜¯å¯é€‰çš„ã€‚</p><p id="a6fd" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">åœ¨ä¸Šé¢çš„æ ‡ç­¾ä¸­ï¼Œæœ‰å‡ ä¸ªå ä½ç¬¦ã€‚å¦‚â€” <code class="du mc md me lt b"><strong class="ko hj">&lt;MODE&gt;</strong></code> <strong class="ko hj">ã€</strong> <code class="du mc md me lt b"><strong class="ko hj">&lt;LEVEL&gt;</strong></code> <strong class="ko hj"> </strong>å’Œ<code class="du mc md me lt b"> <strong class="ko hj">&lt;VERSION&gt;</strong></code> <strong class="ko hj">ã€‚</strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è®¨è®ºåº”è¯¥æ”¾ç½®ä»€ä¹ˆæ¥ä»£æ›¿è¿™äº›å ä½ç¬¦ã€‚</p><h2 id="6f0c" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">podå®‰å…¨æ ‡å‡†</h2><p id="59bc" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated"><code class="du mc md me lt b"><strong class="ko hj">LEVEL :</strong></code> <strong class="ko hj"> </strong>ä»£æ›¿<code class="du mc md me lt b"><strong class="ko hj">&lt;LEVEL&gt;</strong></code>ï¼Œæˆ‘ä»¬å¿…é¡»å®šä¹‰<strong class="ko hj"> podå®‰å…¨æ ‡å‡†ä¹‹ä¸€</strong>ã€‚ç›®å‰ï¼Œæœ‰ä¸‰ç§podå®‰å…¨æ ‡å‡†å¯ç”¨ã€‚</p><blockquote class="mf mg mh"><p id="89bd" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><strong class="ko hj"> <em class="hi"> â—ç‰¹æƒçº§â€” </em> </strong> <em class="hi">æ— é™åˆ¶ç­–ç•¥ï¼Œæä¾›å°½å¯èƒ½å¹¿æ³›çš„æƒé™çº§åˆ«ã€‚</em></p><p id="a1d2" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><strong class="ko hj"> <em class="hi"> â—åŸºçº¿â€” </em> </strong> <em class="hi">é˜²æ­¢å·²çŸ¥æƒé™å‡çº§çš„æœ€ä½é™åˆ¶æ€§ç­–ç•¥ã€‚æœ‰ä¸€ä¸ª</em> <a class="ae jn" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/#baseline" rel="noopener ugc nofollow" target="_blank"> <em class="hi">ç»¼åˆåˆ—è¡¨</em> </a> <em class="hi">åˆ—å‡ºäº†åº”è¯¥å®æ–½æˆ–ç¦æ­¢çš„æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ ‡è®°ä¸ºåç§°ç©ºé—´çš„åŸºçº¿ä¸­åˆ›å»ºä¸€ä¸ªpodï¼Œé‚£ä¹ˆå¿…é¡»ç¦æ­¢ç‰¹æƒpodã€‚</em></p><p id="ddd8" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><strong class="ko hj"> <em class="hi"> â—å—é™â€” </em> </strong> <em class="hi">ä¸¥æ ¼å—é™ç­–ç•¥ï¼Œè¯¥ç­–ç•¥çš„ä¸»è¦ç›®çš„æ˜¯éµå¾ªå½“å‰çš„podå¼ºåŒ–æœ€ä½³å®è·µã€‚ç±»ä¼¼äºåŸºçº¿æ ‡å‡†ï¼Œæœ‰ä¸€ä¸ª</em> <a class="ae jn" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/#restricted" rel="noopener ugc nofollow" target="_blank"> <em class="hi">æ§åˆ¶åˆ—è¡¨</em> </a> <em class="hi">åº”è¯¥è¢«å¼ºåˆ¶æˆ–ç¦æ­¢ã€‚ä¾‹å¦‚ï¼Œä»»ä½•å®¹å™¨éƒ½ä¸èƒ½æœ‰æ ¹ç”¨æˆ·æƒé™ã€‚å®¹å™¨å¿…é¡»ä»¥éæ ¹ç”¨æˆ·èº«ä»½è¿è¡Œã€‚</em></p></blockquote><h2 id="4635" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">å‡†å…¥æ§åˆ¶æ¨¡å¼</h2><p id="3db5" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">å¦‚å‰æ‰€è¿°ï¼ŒKubernetes<strong class="ko hj"/><a class="ae jn" href="https://kubernetes.io/docs/concepts/security/pod-security-standards/" rel="noopener ugc nofollow" target="_blank"><strong class="ko hj">Podå®‰å…¨æ ‡å‡†</strong> </a>ä¸ºPodå®šä¹‰äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ã€‚è¿™äº›æ ‡å‡†è®©æˆ‘ä»¬å®šä¹‰å¦‚ä½•ä»¥ä¸€ç§æ¸…æ™°ã€ä¸€è‡´çš„æ–¹å¼é™åˆ¶podçš„è¡Œä¸ºã€‚</p><p id="29c3" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">Kubernetesæä¾›äº†ä¸€ä¸ªå†…ç½®çš„<em class="lf"> Podå®‰å…¨</em>å‡†å…¥æ§åˆ¶å™¨æ¥æ‰§è¡ŒPodå®‰å…¨æ ‡å‡†ã€‚æˆ‘ä»¬å¯ä»¥é…ç½®åç§°ç©ºé—´æ¥å®šä¹‰æˆ‘ä»¬å¸Œæœ›åœ¨æ¯ä¸ªåç§°ç©ºé—´ä¸­ç”¨äºpodå®‰å…¨æ€§çš„å‡†å…¥æ§åˆ¶<code class="du mc md me lt b"><strong class="ko hj">MODE</strong></code>ã€‚ç›®å‰ï¼Œæœ‰ä¸‰ç§æ¨¡å¼å¯ç”¨ã€‚è®¨è®ºå¦‚ä¸‹â€”</p><blockquote class="mf mg mh"><p id="a255" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><strong class="ko hj"> <em class="hi"> â— enforce â€” </em> </strong> <em class="hi">è¿åæ”¿ç­–å°†å¯¼è‡´podè¢«æ‹’ç»ã€‚</em></p><p id="a1aa" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><strong class="ko hj"> <em class="hi"> â—å®¡è®¡â€” </em> </strong> <em class="hi">è¿åç­–ç•¥ä¼šè§¦å‘å‘</em> <a class="ae jn" href="https://kubernetes.io/docs/tasks/debug/debug-cluster/audit/" rel="noopener ugc nofollow" target="_blank"> <em class="hi">å®¡è®¡æ—¥å¿—</em> </a> <em class="hi">ä¸­è®°å½•çš„äº‹ä»¶æ·»åŠ å®¡è®¡æ³¨é‡Šï¼Œä½†åœ¨å…¶ä»–æƒ…å†µä¸‹æ˜¯å…è®¸çš„ã€‚</em></p><p id="19d3" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><strong class="ko hj"> <em class="hi"> â—è­¦å‘Šâ€” </em> </strong> <em class="hi">è¿åç­–ç•¥å°†è§¦å‘é¢å‘ç”¨æˆ·çš„è­¦å‘Šï¼Œä½†åœ¨å…¶ä»–æƒ…å†µä¸‹æ˜¯å…è®¸çš„ã€‚</em></p></blockquote><p id="df50" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated"><code class="du mc md me lt b"><strong class="ko hj">VERSION :</strong></code> <strong class="ko hj"> </strong>ç‰ˆæœ¬å¿…é¡»æ˜¯æœ‰æ•ˆçš„Kubernetesæ¬¡è¦ç‰ˆæœ¬ï¼Œæˆ–â€œæœ€æ–°â€ç‰ˆæœ¬ã€‚æ­¤æ ‡ç­¾å°†Podå®‰å…¨ç­–ç•¥çš„ç‰ˆæœ¬å›ºå®šä¸ºå®šä¹‰çš„ç‰ˆæœ¬ã€‚</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><h2 id="a0c1" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">æ¸¸æˆæ”»ç•¥</h2><p id="09e7" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">åˆ›å»ºä¸€ä¸ªåä¸º<em class="lf"> baseline-ns-1 </em>çš„æ–°å‘½åç©ºé—´ï¼Œå¹¶ç”¨ä»¥ä¸‹æ ‡ç­¾å¯¹å…¶è¿›è¡Œæ ‡è®°:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="c8cc" class="jo jp hi lt b fi lx ly l lz ma"><strong class="lt hj">$</strong> kubectl create ns baseline-ns-1</span><span id="8f55" class="jo jp hi lt b fi mb ly l lz ma"><strong class="lt hj"># Add labels</strong></span><span id="5c06" class="jo jp hi lt b fi mb ly l lz ma"><strong class="lt hj">$</strong> kubectl label ns baseline-ns-1 \<br/>&gt; pod-security.kubernetes.io/enforce=baseline \<br/>&gt; pod-security.kubernetes.io/enforce-version=v1.25</span></pre><p id="e495" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">åˆ›å»ºå‘½åç©ºé—´å¹¶åº”ç”¨æ ‡ç­¾åï¼Œpodæ¸…å•æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="222c" class="jo jp hi lt b fi lx ly l lz ma">apiVersion: v1<br/>kind: Namespace<br/>metadata:<br/>  creationTimestamp: "2022-11-08T09:26:17Z"<br/><strong class="lt hj">  labels:</strong><br/>    kubernetes.io/metadata.name: baseline-ns-1<br/><strong class="lt hj">    pod-security.kubernetes.io/enforce: baseline<br/>    pod-security.kubernetes.io/enforce-version: v1.25</strong><br/><strong class="lt hj">  name: baseline-ns-1</strong><br/>  resourceVersion: "4779"<br/>  uid: 2a8708f3-6f25-4cfb-84c1-ef6c825e23c5<br/>spec:<br/>  finalizers:<br/>  - kubernetes<br/>status:<br/>  phase: Active</span></pre><p id="2ebd" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">ç”±äºæˆ‘ä»¬è´´æœ‰â€œ<strong class="ko hj">å¼ºåˆ¶</strong>æ¨¡å¼â€å’Œâ€œ<strong class="ko hj">åŸºçº¿</strong>podå®‰å…¨æ ‡å‡†â€çš„æ ‡ç­¾ï¼Œå¦‚æœä¸€ä¸ªpodä¸ç¬¦åˆâ€œ<strong class="ko hj">åŸºçº¿</strong>æ ‡å‡†ï¼Œå®ƒå°†è¢«æ‹’ç»ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹podæ¸…å•åœ¨<em class="lf"> baseline-ns-1 </em>åç§°ç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ªpod:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="0036" class="jo jp hi lt b fi lx ly l lz ma"># pod-1.yaml</span><span id="ffdb" class="jo jp hi lt b fi mb ly l lz ma">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  labels:<br/>    run: pod-1<br/>  name: pod-1<br/>  namespace: baseline-ns-1<br/>spec:<br/>  containers:<br/>  - image: nginx<br/>    name: pod-1<br/><strong class="lt hj">    securityContext:<br/>       privileged: true</strong></span></pre><p id="607c" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">åœ¨åº”ç”¨ä¸Šè¿°podæ¸…å•åˆ›å»ºpodåï¼Œå°†å‘å‡ºä»¥ä¸‹å‘½ä»¤:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="3b1c" class="jo jp hi lt b fi lx ly l lz ma">Error from server (Forbidden): error when creating "pod-1.yaml": <strong class="lt hj">pods "pod-1" is forbidden: violates PodSecurity "baseline:v1.25": privileged (container "pod-1" must not set securityContext.privileged=true)</strong></span></pre><p id="8041" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">å‡ºç°é”™è¯¯æ˜¯å› ä¸ºåœ¨podå®šä¹‰ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<strong class="ko hj">security context . privileged = true</strong>ã€‚è¿™è¿åäº†<em class="lf">åŸºçº¿-ns-1 </em>åç§°ç©ºé—´çš„<em class="lf"> Podå®‰å…¨æ€§</em>æ ‡å‡†ã€‚</p><p id="aecc" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">ç°åœ¨ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å°†æˆ‘ä»¬çš„podéƒ¨ç½²åˆ°<em class="lf"> baseline-ns-1 </em>åç§°ç©ºé—´ä¸­ã€‚è¦ä¹ˆæˆ‘ä»¬å¿…é¡»å°†åç§°ç©ºé—´æ ‡ç­¾ä¿®æ”¹ä¸ºâ€œ<strong class="ko hj"> warn </strong>æˆ–â€œ<strong class="ko hj"> audit </strong>â€ï¼Œè¦ä¹ˆæˆ‘ä»¬å¯ä»¥ä»podæ¸…å•ä¸­åˆ é™¤<em class="lf"> </em> <strong class="ko hj"> <em class="lf">ç‰¹æƒ</em> </strong>æƒé™ã€‚</p><p id="b133" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">è®©æˆ‘ä»¬å°†podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨æ¨¡å¼æ›´æ”¹ä¸ºâ€œ<strong class="ko hj">è­¦å‘Š</strong>ï¼Œè€Œä¸æ˜¯â€œ<strong class="ko hj">å¼ºåˆ¶</strong>â€</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="ca9c" class="jo jp hi lt b fi lx ly l lz ma">apiVersion: v1<br/>kind: Namespace<br/>metadata:<br/>  creationTimestamp: "2022-11-08T09:26:17Z"<br/><strong class="lt hj">  </strong>labels:<br/>    kubernetes.io/metadata.name: baseline-ns-1<br/>    pod-security.kubernetes.io/<strong class="lt hj">warn</strong>: baseline<strong class="lt hj"><br/>    </strong>pod-security.kubernetes.io/<strong class="lt hj">warn</strong>-version: v1.25<br/>  name: baseline-ns-1<br/>  resourceVersion: "4779"<br/>  uid: 2a8708f3-6f25-4cfb-84c1-ef6c825e23c5<br/>spec:<br/>  finalizers:<br/>  - kubernetes<br/>status:<br/>  phase: Active</span></pre><p id="20a2" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">ç„¶ååº”ç”¨ç›¸åŒçš„podæ¸…å•æ–‡ä»¶åœ¨<em class="lf"> baseline-ns-1 </em>åç§°ç©ºé—´ä¸Šåˆ›å»ºä¸€ä¸ªpodã€‚åº”ç”¨podæ¸…å•åï¼Œå°†ä¼šåˆ›å»ºpodï¼Œä½†ç”±äºpodæ¸…å•ä»ç„¶è¿åpodå®‰å…¨æ ‡å‡†ï¼Œå°†ä¼šå‡ºç°å¦‚ä¸‹è­¦å‘Šæ¶ˆæ¯:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="683e" class="jo jp hi lt b fi lx ly l lz ma"><strong class="lt hj">Warning: </strong><em class="lf">would violate PodSecurity "baseline:v1.25": privileged </em>(container "pod-1" must not set securityContext.privileged=true)<br/>pod/pod-1 created</span></pre><h2 id="0e67" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">åŒæ—¶åº”ç”¨å¤šä¸ªPodå®‰å…¨æ ‡å‡†:</h2><p id="68e7" class="pw-post-body-paragraph km kn hi ko b kp kq ij kr ks kt im ku jz kv kw kx kd ky kz la kh lb lc ld le hb bi translated">å¦‚æœéœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªpodå®‰å…¨æ ‡å‡†å’Œä¸€ä¸ªåç§°ç©ºé—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåä¸º<strong class="ko hj"><em class="lf">baseline-ns-2</em></strong><em class="lf"/>çš„åç§°ç©ºé—´çš„ä¾‹å­ï¼Œå®ƒæ ‡æœ‰ä¸åŒçš„podå®‰å…¨æ ‡å‡†ç»„åˆã€‚ä½¿ç”¨ä»¥ä¸‹æ¸…å•åˆ›å»ºæ–°çš„å‘½åç©ºé—´:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="d156" class="jo jp hi lt b fi lx ly l lz ma">apiVersion: v1<br/>kind: Namespace<br/>metadata:<br/>  name: baseline-ns-2<br/>  labels:<br/>   <strong class="lt hj"> </strong># <strong class="lt hj"><em class="lf">baseline </em></strong>Standard with <strong class="lt hj"><em class="lf">enforce </em></strong>Mode </span><span id="0b81" class="jo jp hi lt b fi mb ly l lz ma">    pod-security.kubernetes.io/enforce: baseline<br/>    pod-security.kubernetes.io/enforce-version: v1.25</span><span id="e30b" class="jo jp hi lt b fi mb ly l lz ma">    # <strong class="lt hj"><em class="lf">restricted </em></strong>Standard with <strong class="lt hj"><em class="lf">warn </em></strong>Mode</span><span id="d02e" class="jo jp hi lt b fi mb ly l lz ma">    pod-security.kubernetes.io/warn: restricted<br/>    pod-security.kubernetes.io/warn-version: v1.25</span></pre><p id="c761" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">ä¸Šé¢å®šä¹‰çš„æ¸…å•å®šä¹‰äº†ä¸€ä¸ªåç§°ç©ºé—´<strong class="ko hj"><em class="lf">baseline-ns-2</em></strong><em class="lf"/>ï¼Œå®ƒå°†</p><p id="24ed" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">â—é˜»æ­¢ä»»ä½•ä¸æ»¡è¶³<code class="du mc md me lt b">baseline</code>ç­–ç•¥è¦æ±‚çš„podã€‚</p><p id="4bd6" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">â—ä¸ºä»»ä½•ä¸ç¬¦åˆ<code class="du mc md me lt b">restricted</code>ç­–ç•¥è¦æ±‚çš„å·²åˆ›å»ºpodç”Ÿæˆé¢å‘ç”¨æˆ·çš„è­¦å‘Šã€‚</p><p id="ef37" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">â—å°†<code class="du mc md me lt b">baseline</code>å’Œ<code class="du mc md me lt b">restricted</code>ç­–ç•¥çš„ç‰ˆæœ¬å›ºå®šä¸ºv1.25</p><p id="bca4" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated"><strong class="ko hj">å…·æœ‰rootæƒé™çš„å®¹å™¨:</strong>ä¸‹é¢æ˜¯ä¸€ä¸ªå…·æœ‰<strong class="ko hj"> <em class="lf"> nginx </em> </strong>å®¹å™¨çš„podçš„æ¸…å•ï¼Œå®ƒå°†ä½œä¸ºRootç”¨æˆ·è¿è¡Œã€‚è®©æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„æ¸…å•åˆ›å»ºä¸€ä¸ªpodï¼Œçœ‹çœ‹<strong class="ko hj"><em class="lf">baseline-ns-2</em></strong>åç§°ç©ºé—´çš„podå®‰å…¨æ ‡å‡†æ˜¯å¦‚ä½•ååº”çš„ã€‚</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="f0f3" class="jo jp hi lt b fi lx ly l lz ma"># pod-2.yaml</span><span id="a9e8" class="jo jp hi lt b fi mb ly l lz ma">apiVersion: v1<br/>kind: Pod<br/>metadata:<br/>  name: pod-2<br/>  namespace: baseline-ns-2<br/>spec:<br/>  containers:<br/>  - name: pod-2<br/>    image: nginx<br/><strong class="lt hj">    securityContext:<br/>      runAsUser: 0</strong></span></pre><p id="779c" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">åº”ç”¨ä¸Šè¿°æ¸…å•åï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„podï¼Œå› ä¸ºå®ƒä¸è¿å<strong class="ko hj">åŸºçº¿</strong>æ ‡å‡†ï¼Œä½†å®ƒè¿å<strong class="ko hj">é™åˆ¶</strong>æ ‡å‡†ã€‚å°½ç®¡å®ƒè¿åäº†<strong class="ko hj">å—é™</strong>æ ‡å‡†ï¼Œè¿˜æ˜¯åˆ›å»ºäº†ä¸€ä¸ªpodã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå—é™æ ‡å‡†å¤„äºè­¦å‘Šæ¨¡å¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä¼šåœ¨podåˆ›å»ºè¿‡ç¨‹ä¸­æŠ›å‡ºè­¦å‘Šæ¶ˆæ¯ã€‚è­¦å‘Šæ¶ˆæ¯åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="iy iz ja jb fd ls lt lu lv aw lw bi"><span id="7fd2" class="jo jp hi lt b fi lx ly l lz ma"><strong class="lt hj">Warning:</strong> would violate PodSecurity "restricted:v1.25": allowPrivilegeEscalation != false (container "pod-2" must set securityContext.allowPrivilegeEscalation=false), unrestricted capabilities (container "pod-2" must set securityContext.capabilities.drop=["ALL"]), <strong class="lt hj">runAsNonRoot != true (pod or container "pod-2" must set securityContext.runAsNonRoot=true</strong>), runAsUser=0 (container "pod-2" must not set runAsUser=0), seccompProfile (pod or container "pod-2" must set securityContext.seccompProfile.type to "RuntimeDefault" or "Localhost")</span></pre><p id="64a0" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated">åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨é›†ç¾¤çº§åˆ«å®æ–½podå®‰å…¨æ ‡å‡†ã€‚</p><p id="dd82" class="pw-post-body-paragraph km kn hi ko b kp lg ij kr ks lh im ku jz li kw kx kd lj kz la kh lk lc ld le hb bi translated"><strong class="ko hj">æ¥ä¸‹æ¥:</strong> <a class="ae jn" rel="noopener" href="/faun/pod-security-admission-controller-cluster-level-bda83b80d916"> <strong class="ko hj"> Podå®‰å…¨å‡†å…¥æ§åˆ¶å™¨â€”é›†ç¾¤çº§</strong> </a></p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><blockquote class="mf mg mh"><p id="fe48" class="km kn lf ko b kp lg ij kr ks lh im ku mi li kw kx mj lj kz la mk lk lc ld le hb bi translated"><em class="hi">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¾ˆæœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡»</em> <strong class="ko hj"> <em class="hi">è·Ÿéš</em> </strong> <em class="hi">ğŸ‘‰</em> <strong class="ko hj"> <em class="hi"> </em> </strong> <em class="hi">å’Œ</em> <strong class="ko hj"> <em class="hi">æ‹æ‰‹</em> </strong> <em class="hi">ğŸ‘</em> <strong class="ko hj"> <em class="hi"> </em> </strong> <em class="hi">æŒ‰é’®å¸®åŠ©æˆ‘å†™æ›´å¤šè¿™æ ·çš„æ–‡ç« ã€‚<br/>è°¢è°¢ğŸ–¤ </em></p></blockquote><h2 id="21ea" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">ğŸ‘‰æ‰€æœ‰å…³äºLinuxçš„æ–‡ç« </h2><div class="ml mm ez fb mn"><div role="button" tabindex="0" class="ab bv ff cb dy mo mp bn mq jh mr"><div class="ms l"><div class="ab q"><div class="l di"><img alt="Md Shamim" class="l de bw mt mu du" src="../Images/b46bdc53005abde6c6cb3e8ff0c200c3.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*Hqd8Xz1WHsoL1s2To3awnA.png"/><div class="dr bw l mt mu ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" rel="noopener follow" target="_top" href="/@shamimice03?source=post_page-----52158281d918--------------------------------"> Mdæ²™ç±³å§†</a></p></div></div><div class="mx my fg l"><h2 class="bd hj sk sl dy sm ea eb sn ed ef hh bi translated">æ‰€æœ‰å…³äºLinuxçš„æ–‡ç« </h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi so au sp sq sr pn ss an fx fy st su sv gb gc gd de bk ge" rel="noopener follow" target="_top" href="/@shamimice03/list/all-articles-on-linux-1339e15e3304?source=post_page-----52158281d918--------------------------------">View list</a></div><div class="sw l dw"><span class="bd b fp z dx">12 stories</span></div></div></div><div class="nk dh nl dy ab nm dw di"><div class="di nc bv nd ne"><div class="dh l"><img alt="" class="dh" src="../Images/259cf1a3ab76526a3f714f7cbaffac3d.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*G7yx3xB6zA_6GXrSu3ZWVA.png"/></div></div><div class="di nc bv nf ng nh"><div class="dh l"><img alt="" class="dh" src="../Images/985a8b8ce1f1090a033d94ee7ac5f4fd.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*SoRvlTzozcRF9cua"/></div></div><div class="di bv ni nj nh"><div class="dh l"><img alt="" class="dh" src="../Images/d917609dcb8b45812e60ccd8bf2ed277.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*AcbQlR9WFnBxlLpV"/></div></div></div></div></div><h2 id="9e84" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">ğŸ‘‰å…³äºKubernetesçš„æ‰€æœ‰æ–‡ç« </h2><div class="ml mm ez fb mn"><div role="button" tabindex="0" class="ab bv ff cb dy mo mp bn mq jh mr"><div class="ms l"><div class="ab q"><div class="l di"><img alt="Md Shamim" class="l de bw mt mu du" src="../Images/b46bdc53005abde6c6cb3e8ff0c200c3.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*Hqd8Xz1WHsoL1s2To3awnA.png"/><div class="dr bw l mt mu ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" rel="noopener follow" target="_top" href="/@shamimice03?source=post_page-----52158281d918--------------------------------"> Mdæ²™ç±³å§†</a></p></div></div><div class="mx my fg l"><h2 class="bd hj sk sl dy sm ea eb sn ed ef hh bi translated">å…³äºKubernetesçš„æ‰€æœ‰æ–‡ç« </h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi so au sp sq sr pn ss an fx fy st su sv gb gc gd de bk ge" rel="noopener follow" target="_top" href="/@shamimice03/list/all-articles-on-kubernetes-7ae1a0f96f3b?source=post_page-----52158281d918--------------------------------">View list</a></div><div class="sw l dw"><span class="bd b fp z dx">24 stories</span></div></div></div><div class="nk dh nl dy ab nm dw di"><div class="di nc bv nd ne"><div class="dh l"><img alt="" class="dh" src="../Images/f1050aa27a3ef03122558b1ba1de1f58.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*7DhVxBWLKw_5M_jP"/></div></div><div class="di nc bv nf ng nh"><div class="dh l"><img alt="" class="dh" src="../Images/f1c4131e92176033bce05392de197205.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*AkrEbqlA_j76u2I5Tm8npg.png"/></div></div><div class="di bv ni nj nh"><div class="dh l"><img alt="" class="dh" src="../Images/27d4385154af67764cf37713dbbdc38e.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*98RmgcHgM1cyOobu"/></div></div></div></div></div><h2 id="d2a9" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">ğŸ‘‰æ‰€æœ‰å…³äºå¤´ç›”çš„æ–‡ç« </h2><div class="ml mm ez fb mn"><div role="button" tabindex="0" class="ab bv ff cb dy mo mp bn mq jh mr"><div class="ms l"><div class="ab q"><div class="l di"><img alt="Md Shamim" class="l de bw mt mu du" src="../Images/b46bdc53005abde6c6cb3e8ff0c200c3.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*Hqd8Xz1WHsoL1s2To3awnA.png"/><div class="dr bw l mt mu ds n aw dt"/></div><div class="gg l dw"><p class="bd b fp z dy dz ea eb ec ed ee ef dx translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" rel="noopener follow" target="_top" href="/@shamimice03?source=post_page-----52158281d918--------------------------------"> Mdæ²™ç±³å§†</a></p></div></div><div class="mx my fg l"><h2 class="bd hj sk sl dy sm ea eb sn ed ef hh bi translated">Helmãƒ¼Series</h2></div><div class="ab q"><div class="l dw"><a class="bd b be z bi so au sp sq sr pn ss an fx fy st su sv gb gc gd de bk ge" rel="noopener follow" target="_top" href="/@shamimice03/list/helmseries-6e2076d48ba8?source=post_page-----52158281d918--------------------------------">View list</a></div><div class="sw l dw"><span class="bd b fp z dx">11 stories</span></div></div></div><div class="nk dh nl dy ab nm dw di"><div class="di nc bv nd ne"><div class="dh l"><img alt="" class="dh" src="../Images/9ba5df61339b6f5d2ad01696050835e3.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*3NGLzkzV47jeWMX8"/></div></div><div class="di nc bv nf ng nh"><div class="dh l"><img alt="" class="dh" src="../Images/74e4f8812ce0aceba2616e176b3021c2.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*wzqjRqAlMOjlwt7x"/></div></div><div class="di bv ni nj nh"><div class="dh l"><img alt="" class="dh" src="../Images/a734d6746ba78eda4d8d1347c4231bae.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*6RKJMoeEspoXyjGN"/></div></div></div></div></div></div></div>    
</body>
</html>