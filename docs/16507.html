<html>
<head>
<title>Optical Character Recognition with Hugging Face Spaces</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å…·æœ‰æ‹¥æŠ±é¢éƒ¨ç©ºé—´çš„å…‰å­¦å­—ç¬¦è¯†åˆ«</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/geekculture/optical-character-recognition-with-hugging-face-spaces-467714dfade2?source=collection_archive---------23-----------------------#2022-12-30">https://medium.com/geekculture/optical-character-recognition-with-hugging-face-spaces-467714dfade2?source=collection_archive---------23-----------------------#2022-12-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/60b5f6400e6cbf96c0051698e2018d70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mQYUJB1hVcYxcJfx.jpg"/></div></div></figure><h1 id="fecc" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">ä»€ä¹ˆæ˜¯æ‹¥æŠ±è„¸æ¢çº½ï¼Ÿ</h1><p id="2a3f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">HuggingFace Hubæ˜¯ä¸€ä¸ªå¹³å°ï¼Œå…è®¸å¼€å‘äººå‘˜å­˜å‚¨å’Œå…±äº«ä»£ç ï¼Œä»¥åŠåœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸Šè¿›è¡Œåˆä½œã€‚å®ƒæ‰˜ç®¡åŸºäºGitçš„å­˜å‚¨åº“ï¼Œè¿™æ˜¯ä¸€ç§ç‰ˆæœ¬æ§åˆ¶çš„å­˜å‚¨ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨å…¶ä¸­ä¿å­˜ä»–ä»¬æ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶ã€‚å¼€å‘äººå‘˜å¯ä»¥åœ¨Hubä¸Šä¸Šä¼ å’Œè®¿é—®è‡ªç„¶è¯­è¨€å¤„ç†ã€è®¡ç®—æœºè§†è§‰å’ŒéŸ³é¢‘ä»»åŠ¡çš„å‰æ²¿æ¨¡å‹ã€‚å®ƒè¿˜ä¸ºå„ç§é¢†åŸŸå’Œæ¨¡æ€æä¾›äº†å„ç§æ•°æ®é›†ã€‚æœ€åï¼Œå¼€å‘äººå‘˜å¯ä»¥ç ”ç©¶ç›´æ¥åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºMLæ¨¡å‹çš„äº¤äº’å¼åº”ç”¨ç¨‹åºã€‚<br/>è¦äº†è§£æ›´å¤šå…³äºæŠ±æŠ±è„¸ä¸­æ¢çš„ä¿¡æ¯ï¼ŒæŸ¥çœ‹<a class="ae km" href="https://huggingface.co/docs" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£</a>ã€‚</p><h1 id="28ee" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">ä»€ä¹ˆæ˜¯æ‹¥æŠ±è„¸ç©ºé—´ï¼Ÿ</h1><p id="d4e6" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Spacesæ˜¯ä¸€ä¸ªä¸­å¿ƒå¹³å°ï¼Œå…è®¸å¼€å‘è€…å¿«é€Ÿåˆ›å»ºå’Œå±•ç¤ºMLæ¼”ç¤ºåº”ç”¨ã€‚å®ƒä¸ä¸¤ä¸ªPythonè½¯ä»¶å¼€å‘å·¥å…·åŒ…(SDK)å…¼å®¹ï¼Œå³<a class="ae km" href="https://gradio.app/" rel="noopener ugc nofollow" target="_blank"> Gradio </a>å’Œ<a class="ae km" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>ï¼Œè¿™ä¸¤ä¸ªå·¥å…·ä½¿å¾—åœ¨çŸ­æ—¶é—´å†…åˆ›å»ºåº”ç”¨ç¨‹åºå˜å¾—ç®€å•ã€‚æ­¤å¤–ï¼Œç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºé™æ€ç©ºé—´ï¼Œå³ç©ºé—´ä¸­æ‰˜ç®¡çš„HTMLã€CSSå’ŒJavaScriptç½‘é¡µã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äºå…±äº«ç©ºé—´ä»¥åŠå¦‚ä½•åˆ›å»ºè‡ªå·±çš„å…±äº«ç©ºé—´çš„ä¿¡æ¯ï¼Œè¯·è®¿é—®<a class="ae km" href="https://huggingface.co/docs/hub/spaces" rel="noopener ugc nofollow" target="_blank">å…±äº«ç©ºé—´æ–‡æ¡£</a>ã€‚æ‚¨è¿˜å¯ä»¥å‡çº§æ‚¨çš„ç©ºé—´ï¼Œä»¥ä¾¿åœ¨GPUæˆ–å…¶ä»–åŠ é€Ÿç¡¬ä»¶ä¸Šè¿è¡Œã€‚</p><p id="5e0a" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£ä¸€ä¸‹å…‰å­¦å­—ç¬¦è¯†åˆ«(OCR)ã€‚</p><h1 id="ce24" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">å…‰å­¦å­—ç¬¦è¯†åˆ«</h1><p id="8e94" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å…‰å­¦å­—ç¬¦è¯†åˆ«(OCR)æ˜¯ä¸€ç§æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼Œç”¨äºä»æ‰«æçš„æ–‡æ¡£å’Œç…§ç‰‡ç­‰å›¾åƒä¸­è¯†åˆ«æ–‡æœ¬ã€‚å®ƒä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œåˆ†æå›¾åƒå¹¶ä»ä¸­æå–æ–‡æœ¬ã€‚ä¹‹åï¼Œæå–çš„æ–‡æœ¬è¢«è¾“å…¥åˆ°ä¸€ä¸ªOCRå¼•æ“ï¼Œè¯¥å¼•æ“å·²ç»è¢«è®­ç»ƒæ¥è¯†åˆ«å•è¯å’Œå­—ç¬¦ã€‚ç„¶åï¼ŒOCRå¼•æ“çš„è¾“å‡ºç”¨äºç”ŸæˆåŸå§‹å›¾åƒçš„æ–‡æœ¬ç‰ˆæœ¬ã€‚ä¸ºäº†è‡ªåŠ¨åŒ–æ•°æ®è¾“å…¥å’Œæ–‡æ¡£ç®¡ç†è¿‡ç¨‹ï¼Œé€šå¸¸ä½¿ç”¨OCRä»å›¾åƒä¸­æå–æ–‡æœ¬ã€‚</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/5d656f7046d8c08bdefaeff9d9088813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bBHDxzCZBS1X_qK_.png"/></div></div></figure><p id="98c9" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">æœ‰è®¸å¤šç”¨äºOCRçš„åº“å’ŒæŠ€æœ¯ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä¸ºæ–‡æœ¬è¯†åˆ«å®ç°3ç§OCRæŠ€æœ¯PaddleOCRã€KerasOCRå’ŒEasyOCRã€‚</p><p id="f73f" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•åœ¨æ‹¥æŠ±é¢éƒ¨ç©ºé—´ä¸Šæ‰˜ç®¡OCRåº”ç”¨ç¨‹åºã€‚ä¸ºæ­¤ï¼Œé¦–å…ˆä½ éœ€è¦åœ¨æ‹¥æŠ±é¢éƒ¨ç©ºé—´åˆ›å»ºä¸€ä¸ªå­˜å‚¨åº“ï¼Œå¦‚ä¸‹æ­¥éª¤æ‰€ç¤ºã€‚</p><h1 id="62b7" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">åœ¨æ‹¥æŠ±è„¸ä¸Šåˆ›å»ºå­˜å‚¨åº“çš„æ­¥éª¤(ğŸ¤—)ç©ºé—´:</h1><p id="6cba" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated"><strong class="jq hj">ç¬¬ä¸€æ­¥:</strong>åœ¨ä¸Šåˆ›å»ºå¸æˆ·ğŸ¤—æ¢çº½ï¼Œæ‰“é€ <a class="ae km" href="https://huggingface.co/spaces" rel="noopener ugc nofollow" target="_blank">æ–°ç©ºé—´</a>ã€‚è½¬åˆ°æ–‡ä»¶å’Œç‰ˆæœ¬ã€‚æ‚¨å°†çœ‹åˆ°ä¸ºé¡¹ç›®ç”Ÿæˆçš„README.mdæ–‡ä»¶ã€‚</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/6fbdb6cdf865feda520e15d132664f15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujQOkmDVOWjzhfKdce0OfA.png"/></div></div></figure><p id="1af8" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">ç¬¬äºŒæ­¥:</strong>ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»åœ¨README.mdæ–‡ä»¶ä¸­è®¾ç½®äº†å¦‚ä¸‹å…ƒæ•°æ®ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ›¿æ¢å…ƒæ•°æ®å€¼å¹¶ä¿å­˜å®ƒä»¬ã€‚æœ‰å…³å…ƒæ•°æ®é…ç½®å‚è€ƒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®ğŸ¤—<a class="ae km" href="https://huggingface.co/docs/hub/spaces-config-reference" rel="noopener ugc nofollow" target="_blank">ç©ºé—´é…ç½®</a>ã€‚</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es ky"><img src="../Images/92da14a949a26694bd89a6e29819a987.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/0*2xtFb1Wr9qmeo8z_.png"/></div></figure><p id="b8d0" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">æ­¥éª¤3: </strong>ç°åœ¨æ‚¨å¯ä»¥åˆ›å»ºæ–°æ–‡ä»¶æˆ–è€…ä»æ‚¨çš„æœ¬åœ°ç³»ç»Ÿä¸Šä¼ é¡¹ç›®æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚æ‚¨éœ€è¦åœ¨requirement.txtæ–‡ä»¶ä¸­æ·»åŠ æ‰€æœ‰éœ€è¦çš„åº“ï¼ŒğŸ¤—æœåŠ¡å™¨å°†è‡ªåŠ¨ä¸‹è½½æ‰€æœ‰çš„åº“ã€‚å¦ä¸€ç§ä¸Šä¼ æ•´ä¸ªé¡¹ç›®çš„æ–¹æ³•æ˜¯ä½¿ç”¨<a class="ae km" href="https://huggingface.co/docs/huggingface_hub/how-to-upstream" rel="noopener ugc nofollow" target="_blank"> huggingface_hub </a>ï¼Œä¸ºæ­¤è¯·ç¡®ä¿æ‚¨ç™»å½•åˆ°ğŸ¤—ä»ä½ çš„ç³»ç»Ÿé‡Œã€‚ç„¶åä½ å¯ä»¥æŒ‰ç…§<a class="ae km" href="https://huggingface.co/docs/huggingface_hub/how-to-upstream" rel="noopener ugc nofollow" target="_blank"> huggingface_hub </a>çš„æ­¥éª¤ä¸Šä¼ ä½ çš„æœ¬åœ°æ–‡ä»¶å¤¹åˆ°ğŸ¤—ç©ºé—´ã€‚</p><p id="c865" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">ç¬¬å››æ­¥:</strong>ç°åœ¨è®©æˆ‘ä»¬ä»ä»£ç å¼€å§‹ï¼Œæˆ‘ä»¬å°†åœ¨app.pyæ–‡ä»¶ä¸­ç¼–å†™æˆ‘ä»¬çš„ä»£ç ã€‚</p><h1 id="97a7" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">è®©æˆ‘ä»¬å¼€å§‹ä»£ç å®ç°</h1><p id="8bc0" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">1.å¯¼å…¥æ‰€æœ‰åº“</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="a271" class="le ir hi la b be lf lg l lh li">import os<br/>import cv2<br/>import json<br/>import easyocr<br/>import datasets<br/>import socket<br/>import requests<br/>import keras_ocr<br/><br/>import numpy as np<br/>import gradio as gr<br/>import pandas as pd<br/>import tensorflow as tf<br/>import re as r<br/><br/>from PIL import Image<br/>from datasets import Image<br/>from datetime import datetime<br/>from paddleocr import PaddleOCR<br/>from urllib.request import urlopen<br/>from huggingface_hub import Repository, upload_file</span></pre><p id="6e10" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">2.æˆ‘ä»¬ä¸ºè¿™ä¸‰ç§æ–¹æ³•åˆ†åˆ«ç¼–å†™äº†OCRç”Ÿæˆå‡½æ•°ã€‚</p><p id="fa48" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">Paddle OCRçš„ä»£ç :</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="f40f" class="le ir hi la b be lf lg l lh li">"""<br/>Paddle OCR<br/>"""<br/>def ocr_with_paddle(img):<br/>    finaltext = ''<br/>    ocr = PaddleOCR(lang='en', use_angle_cls=True)<br/>    # img_path = 'exp.jpeg'<br/>    result = ocr.ocr(img)<br/>    <br/>    for i in range(len(result[0])):<br/>        text = result[0][i][1][0]<br/>        finaltext += ' '+ text<br/>    return finaltext</span></pre><p id="ee3e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">Keras OCRçš„ä»£ç :</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="5901" class="le ir hi la b be lf lg l lh li">"""<br/>Keras OCR<br/>"""<br/>def ocr_with_keras(img):<br/>    output_text = ''<br/>    pipeline=keras_ocr.pipeline.Pipeline()<br/>    images=[keras_ocr.tools.read(img)]<br/>    predictions=pipeline.recognize(images)<br/>    first=predictions[0]<br/>    for text,box in first:<br/>        output_text += ' '+ text<br/>    return output_text</span></pre><p id="936e" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">è½»æ¾OCRçš„ä»£ç :</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="052f" class="le ir hi la b be lf lg l lh li">"""<br/>easy OCR<br/>"""<br/># gray scale image<br/>def get_grayscale(image):<br/>    return cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)<br/><br/># Thresholding or Binarization<br/>def thresholding(src):<br/>    return cv2.threshold(src,127,255, cv2.THRESH_TOZERO)[1]<br/>    <br/>def ocr_with_easy(img):<br/>    gray_scale_image=get_grayscale(img)<br/>    thresholding(gray_scale_image)<br/>    cv2.imwrite('image.png',gray_scale_image)<br/>    reader = easyocr.Reader(['th','en'])<br/>    bounds = reader.readtext('image.png',paragraph="False",detail = 0)<br/>    bounds = ''.join(bounds)<br/>    return bounds</span></pre><p id="1089" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">3.ä¸ºæ‰€æœ‰OCRæ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªå…¬å…±å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†è¾“å…¥ä½œä¸ºå›¾åƒï¼Œå¹¶ä»è¾“å…¥å›¾åƒè¿”å›ç”Ÿæˆçš„æ–‡æœ¬ã€‚</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="ba0a" class="le ir hi la b be lf lg l lh li">"""<br/>Generate OCR<br/>"""<br/>def generate_ocr(Method,input_image):<br/>    text_output = ''<br/>    if (input_image).any():<br/>        print("Method___________________",Method)<br/>        if Method == 'EasyOCR':<br/>            text_output = ocr_with_easy(input_image)<br/>        if Method == 'KerasOCR':<br/>            text_output = ocr_with_keras(input_image)<br/>        if Method == 'PaddleOCR':<br/>            text_output = ocr_with_paddle(input_image)<br/>        <br/>        flag(Method,input_image,text_output,ip_address,location)<br/>        return text_output<br/>    else:<br/>        raise gr.Error("Please upload an image!!!!")</span></pre><p id="c1b4" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">4.å®Œæˆæ‰€æœ‰è¿™äº›åŠŸèƒ½åï¼Œè®©æˆ‘ä»¬ä½¿ç”¨gradioåº”ç”¨ç¨‹åºå°†æˆ‘ä»¬çš„ä»£ç ä¸ç”¨æˆ·ç•Œé¢é›†æˆèµ·æ¥ã€‚</p><h1 id="5308" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">æ ¼æ‹‰è¿ªæ¬§</h1><p id="c181" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Gradioå¯¹äºå¼€å‘äººå‘˜æ¥è¯´æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå› ä¸ºå®ƒå…è®¸ä»–ä»¬å¿«é€Ÿè€Œè½»æ¾åœ°ä¸ºä»–ä»¬çš„æœºå™¨å­¦ä¹ æ¨¡å‹æ„å»ºäº¤äº’å¼ç”¨æˆ·ç•Œé¢ã€‚è¿™å¯¹äºå‘å…¶ä»–äººå±•ç¤ºæ¨¡å‹çš„åŠŸèƒ½ï¼Œæˆ–è€…æ”¶é›†ç”¨æˆ·å¯¹æ¨¡å‹æ€§èƒ½çš„åé¦ˆç‰¹åˆ«æœ‰ç”¨ã€‚æ­¤å¤–ï¼Œç”±äºGradioä½¿ç”¨Jupyterç¬”è®°æœ¬ï¼Œå¼€å‘äººå‘˜å¯ä»¥è½»æ¾åœ°ä¸å…¶ä»–äººåˆ†äº«ä»–ä»¬çš„å·¥ä½œï¼Œè¿™ä½¿å…¶æˆä¸ºä¸€ä¸ªå¾ˆå¥½çš„åä½œå·¥å…·ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºGradioåº”ç”¨çš„ä¿¡æ¯ï¼Œè¯·ç‚¹å‡»<a class="ae km" href="https://gradio.app/getting_started/" rel="noopener ugc nofollow" target="_blank">é“¾æ¥</a>ã€‚</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/54f941b40339a983b267e9f54ebc6430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YROLVtNrQG5hJM--.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">This is the UI for our demo using Gradio app</figcaption></figure><p id="756f" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ç§æ–¹å¼å¯åŠ¨Gradioæ¼”ç¤ºï¼Œä½¿ç”¨<code class="du ln lo lp la b">gr.blocks</code>å’Œ<code class="du ln lo lp la b">gr.interface.</code></p><p id="3f41" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">Gradioä¸­æœ‰ä¸‰ä¸ªä¸»è¦å‚æ•°:<br/> 1ã€‚åŠŸèƒ½:å¤„ç†ç”¨æˆ·ç•Œé¢ä¸»è¦åŠŸèƒ½çš„è¿›ç¨‹<br/> 2ã€‚è¾“å…¥:è¾“å…¥éƒ¨ä»¶<br/> 3çš„ç±»å‹ã€‚è¾“å‡º:è¾“å‡ºç»„ä»¶çš„ç±»å‹</p><p id="9dad" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">ä»£ç çš„æœ€åä¸€éƒ¨åˆ†æ¶‰åŠå¯åŠ¨ç•Œé¢ã€‚å®ƒç”±å„ç§ç»„ä»¶ç»„æˆï¼Œå¦‚åŠŸèƒ½ã€è¾“å…¥ã€è¾“å‡ºã€æ ‡é¢˜ã€æè¿°ç­‰ç­‰ã€‚è¿™ä¸ª<a class="ae km" href="https://www.gradio.app/docs/" rel="noopener ugc nofollow" target="_blank">é“¾æ¥</a>åŒ…å«äº†æ‰€æœ‰çš„æ¥å£ç»„ä»¶ã€‚</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="d437" class="le ir hi la b be lf lg l lh li">image = gr.Image(shape=(300, 300))<br/>method = gr.Radio(["PaddleOCR","EasyOCR", "KerasOCR"],value="PaddleOCR",elem_id="radio_div")<br/>output = gr.Textbox(label="Output",elem_id="opbox")<br/><br/>demo = gr.Interface(<br/>    generate_ocr,<br/>    [method,image],<br/>    output,<br/>    title="Optical Character Recognition",<br/>    css=".gradio-container {background-color: #C0E1F2} #radio_div {background-color: #ADA5EC; font-size: 40px;} #btn {background-color: #94D68B; font-size: 20px;} #opbox {background-color: #ADA5EC;}",<br/>    article="""&lt;p style='text-align: center;'&gt;Feel free to give us your &lt;a href="https://www.pragnakalp.com/contact/" target="_blank"&gt;feedback&lt;/a&gt; and contact us at <br/>                    &lt;a href="letstalk@pragnakalp.com" target="_blank"&gt;letstalk@pragnakalp.com&lt;/a&gt; And don't forget to check out more interesting <br/>                    &lt;a href="https://www.pragnakalp.com/services/natural-language-processing-services/" target="_blank"&gt;NLP services&lt;/a&gt; we are offering.&lt;/p&gt;<br/>                    &lt;p style='text-align: center;'&gt;Developed by :&lt;a href="https://www.pragnakalp.com" target="_blank"&gt; Pragnakalp Techlabs&lt;/a&gt;&lt;/p&gt;"""<br/>    <br/>)<br/>demo.launch()</span></pre><h1 id="9317" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">åœ¨Hugging Face Hubæ•°æ®é›†ä¸Šä¿å­˜æ•°æ®å’Œæ—¥å¿—</h1><p id="8c99" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">åˆ›å»ºåº”ç”¨ç¨‹åºåã€‚å¦‚æœæ‚¨æƒ³è®°å½•ç”¨æˆ·è¾“å…¥å’Œç»“æœï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥éµå¾ªä»¥ä¸‹æ­¥éª¤ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ‹¥æŠ±è„¸æ•°æ®é›†æ¥å­˜å‚¨æ—¥å¿—ã€‚</p><p id="802f" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">æ­¥éª¤1: </strong>è¦ä¿å­˜/å­˜å‚¨æ—¥å¿—æˆ–æ•°æ®ï¼Œè¯·åœ¨ğŸ¤—<a class="ae km" href="https://huggingface.co/datasets" rel="noopener ugc nofollow" target="_blank">æ•°æ®é›†</a>ã€‚è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒ<a class="ae km" href="https://huggingface.co/docs/datasets/index" rel="noopener ugc nofollow" target="_blank">æ•°æ®é›†æ–‡æ¡£</a>ã€‚</p><p id="55bc" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">æ­¥éª¤2: </strong>è¦ä¸æ•°æ®é›†å»ºç«‹è¿æ¥ï¼Œè¯·éµå¾ªä¸‹é¢çš„ä»£ç ç‰‡æ®µã€‚</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="5ae7" class="le ir hi la b be lf lg l lh li">HF_TOKEN = os.environ.get("HF_TOKEN")<br/>DATASET_NAME = "OCR-img-to-text"<br/><br/>DATASET_REPO_URL = f"https://huggingface.co/datasets/pragnakalp/{DATASET_NAME}"<br/>HF_TOKEN = os.environ.get("HF_TOKEN")<br/>DATASET_REPO_ID = "pragnakalp/OCR-img-to-text"<br/>print("is none?", HF_TOKEN is None)<br/>REPOSITORY_DIR = "data"<br/>LOCAL_DIR = 'data_local'<br/>os.makedirs(LOCAL_DIR,exist_ok=True)<br/><br/>repo = Repository(<br/>    local_dir="ocr_data", clone_from=DATASET_REPO_URL, use_auth_token=HF_TOKEN<br/>)<br/>repo.git_pull()</span></pre><p id="7320" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">åœ¨è¿™é‡Œï¼ŒHF_TOKENè¢«ç§°ä¸ºç”¨æˆ·è®¿é—®ä»¤ç‰Œçš„<a class="ae km" href="https://huggingface.co/docs/hub/security-tokens" rel="noopener ugc nofollow" target="_blank">ğŸ¤—ï¼Œä»¥ä¸‹å“ªç§æ˜¯å¯¹åº”ç”¨ç¨‹åºæˆ–ç¬”è®°æœ¬ç”µè„‘è¿›è¡Œèº«ä»½éªŒè¯çš„æœ€å¸¸ç”¨æ–¹æ³•ğŸ¤—æœåŠ¡ã€‚æ³¨æ„:ä¿å­˜ä»¤ç‰Œæ—¶ï¼Œå°†è§’è‰²ä¿æŒåœ¨â€œå†™å…¥â€æ¨¡å¼ã€‚ç”Ÿæˆè®¿é—®ä»¤ç‰Œåï¼Œå°†å…¶å¤åˆ¶å¹¶ä¿å­˜åˆ°æ‚¨çš„ç©ºé—´çš„è®¾ç½®â†’å­˜å‚¨åº“æœºå¯†ï¼Œä¿ç•™åç§°ä¸ºâ€œHF_TOKENâ€ã€‚</a></p><p id="000b" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">DATASET_REPO_IDå°†æ˜¯æ‚¨çš„æ•°æ®é›†è·¯å¾„ã€‚<br/> REPOSITORY_DIRå°†æ˜¯æ‚¨ä¿å­˜æ•°æ®çš„æ–‡ä»¶å¤¹åç§°ã€‚</p><p id="f0ab" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><strong class="jq hj">ç¬¬ä¸‰æ­¥:</strong>å†™ä¸€ä¸ªä¿å­˜æ•°æ®çš„å‡½æ•°ã€‚</p><pre class="kt ku kv kw fd kz la lb bn lc ld bi"><span id="3bc7" class="le ir hi la b be lf lg l lh li">"""<br/>Save generated details<br/>"""<br/>def dump_json(thing,file):<br/>    with open(file,'w+',encoding="utf8") as f:<br/>        json.dump(thing,f)<br/><br/>def flag(Method,input_image,text_output,ip_address,location):<br/>    try:<br/>        print("saving data------------------------")<br/>        adversarial_number = 0<br/>        adversarial_number = 0 if None else adversarial_number<br/>        metadata_name = datetime.now().strftime('%Y-%m-%d %H-%M-%S')<br/>        SAVE_FILE_DIR = os.path.join(LOCAL_DIR,metadata_name)<br/>        os.makedirs(SAVE_FILE_DIR,exist_ok=True)<br/>        image_output_filename = os.path.join(SAVE_FILE_DIR,'image.png')<br/>        try:<br/>            Image.fromarray(input_image).save(image_output_filename)<br/>            <br/>        except Exception:<br/>            raise Exception(f"Had issues saving PIL image to file")<br/>        # Write metadata.json to file<br/>        json_file_path = os.path.join(SAVE_FILE_DIR,'metadata.jsonl')<br/>        metadata= {'id':metadata_name,'method':Method,<br/>                   'File_name':'image.png','generated_text':text_output,<br/>                    'ip_address': ip_address,'loc': location}        <br/>        dump_json(metadata,json_file_path)  <br/>            <br/>        # Simply upload the image file and metadata using the hub's<br/>          upload_file<br/>        # Upload the image<br/>        repo_image_path = os.path.join(REPOSITORY_DIR,os.path.join<br/>                          (metadata_name,'image.png'))<br/>        <br/>        _ = upload_file(path_or_fileobj = image_output_filename,<br/>                    path_in_repo =repo_image_path,<br/>                    repo_id=DATASET_REPO_ID,<br/>                    repo_type='dataset',<br/>                    token=HF_TOKEN<br/>                ) <br/>        # Upload the metadata<br/>        repo_json_path = os.path.join(REPOSITORY_DIR,os.path.join<br/>                        (metadata_name,'metadata.jsonl'))<br/>        _ = upload_file(path_or_fileobj = json_file_path,<br/>                    path_in_repo =repo_json_path,<br/>                    repo_id= DATASET_REPO_ID,<br/>                    repo_type='dataset',<br/>                    token=HF_TOKEN<br/>                )        <br/>        adversarial_number+=1<br/>        repo.git_pull()    <br/>        return "*****Logs save successfully!!!!"<br/>    except Exception as e:<br/>        return "Error whils saving logs --&gt;"+ str(e)</span></pre><p id="3453" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated">æ‚¨å¯ä»¥åœ¨ä¸‹å›¾ä¸­çœ‹åˆ°æ—¥å¿—æ•°æ®é›†é¢„è§ˆã€‚</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/720e2b93e280ab25c7be3dacca34c8f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z_uvAyJKg9VOjp0-.png"/></div></div></figure></div><div class="ab cl lq lr gp ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="hb hc hd he hf"><p id="5ea0" class="pw-post-body-paragraph jo jp hi jq b jr kn jt ju jv ko jx jy jz kp kb kc kd kq kf kg kh kr kj kk kl hb bi translated"><em class="lx">æœ€åˆå‘è¡¨äº2022å¹´12æœˆ30æ—¥</em> <a class="ae km" href="https://www.pragnakalp.com/optical-character-recognition-with-hugging-face-spaces/" rel="noopener ugc nofollow" target="_blank">å¸¦æœ‰æ‹¥æŠ±äººè„¸ç©ºé—´çš„å…‰å­¦å­—ç¬¦è¯†åˆ«</a> <em class="lx">ã€‚</em></p></div></div>    
</body>
</html>